
<input class="sheet-modes-show sheet-hide" type="checkbox" name="attr_modes_choice" checked="checked"/>
<div class="sheet-modes-show sheet-hide">
  <div class="sheet-mode-title">
    <h2 class="sheet-mode-title">SELECT THE SHEET TYPE</h2>
  </div>
  <div class="sheet-modes">
    <label class="sheet-mode"> 
      <h4>CHARACTER</h4>
      <div class="sheet-mode">
        <input class="sheet-hide" type="radio" name="attr_mode_button" value="1"/>
        <div class="sheet-mode-image"><img src="https://raw.githubusercontent.com/LeeRhodes/roll20-character-sheets/ironcrunch-new-sheet/Ironcrunch/assets/placeholder.png"/></div>
      </div>
    </label>
    <label class="sheet-mode"> 
      <h4>COMPANION</h4>
      <div class="sheet-mode">
        <input class="sheet-hide" type="radio" name="attr_mode_button" value="2"/>
        <div class="sheet-mode-image"><img src="https://raw.githubusercontent.com/LeeRhodes/roll20-character-sheets/ironcrunch-new-sheet/Ironcrunch/assets/placeholder.png"/></div>
      </div>
    </label>
    <label class="sheet-mode"> 
      <h4>SHARED</h4>
      <div class="sheet-mode">
        <input class="sheet-hide" type="radio" name="attr_mode_button" value="3"/>
        <div class="sheet-mode-image"><img src="https://raw.githubusercontent.com/LeeRhodes/roll20-character-sheets/ironcrunch-new-sheet/Ironcrunch/assets/placeholder.png"/></div>
      </div>
    </label>
  </div>
</div>
<input class="sheet-character-mode sheet-hide" type="radio" name="attr_mode" value="1"/>
<div class="sheet-character-mode sheet-hide">
  <div class="sheet-header">
    <div class="sheet-header-items">
      <div class="sheet-character-name">
        <h3 class="sheet-character-title">CHARACTER</h3>
        <input class="sheet-pc-name" type="text" name="attr_character_name" placeholder="Character Name"/>
      </div>
      <div class="sheet-character-role">
        <h3 class="sheet-character-title">ROLE / TITLE</h3>
        <input class="sheet-pc-name" type="text" name="attr_character_role" placeholder="Character Role / Title"/>
      </div>
    </div>
    <div class="sheet-resources">
      <div class="sheet-resource">
        <label class="sheet-health-reset">RESET
          <input class="sheet-health-reset sheet-hide" type="checkbox" name="attr_health_reset"/>
        </label>
        <h2 class="sheet-resource-title">HEALTH</h2>
        <div class="sheet-health-status-box">
          <input class="sheet-resource-value" type="text" name="attr_health" value="20"/>
          <div class="sheet-health-max-box">
            <h3 class="sheet-health-max">/</h3>
            <h3 class="sheet-health-max-value"><span class="sheet-health-max-value" name="attr_max_health"></span>
              <input class="sheet-hide" type="text" name="attr_max_health" value="20"/>
            </h3>
          </div>
        </div>
      </div>
      <div class="sheet-resource">
        <h2 class="sheet-resource-title">SPIRIT</h2>
        <select class="sheet-resource-value" name="attr_spirit">
          <option value="10">+10</option>
          <option value="9">+9</option>
          <option value="8">+8</option>
          <option value="7">+7</option>
          <option value="6">+6</option>
          <option value="5">+5</option>
          <option value="4">+4</option>
          <option value="3">+3</option>
          <option value="2">+2</option>
          <option value="1">+1</option>
          <option value="0">+0</option>
        </select>
      </div>
      <div class="sheet-resource">
        <h2 class="sheet-resource-title">SUPPLY</h2>
        <select class="sheet-resource-value" name="attr_supply">
          <option value="10">+10</option>
          <option value="9">+9</option>
          <option value="8">+8</option>
          <option value="7">+7</option>
          <option value="6">+6</option>
          <option value="5">+5</option>
          <option value="4">+4</option>
          <option value="3">+3</option>
          <option value="2">+2</option>
          <option value="1">+1</option>
          <option value="0">+0</option>
        </select>
      </div>
      <div class="sheet-resource">
        <h2 class="sheet-resource-title">WEALTH</h2>
        <select class="sheet-resource-value" name="attr_wealth">
          <option value="10">+10</option>
          <option value="9">+9</option>
          <option value="8">+8</option>
          <option value="7">+7</option>
          <option value="6">+6</option>
          <option value="5">+5</option>
          <option value="4">+4</option>
          <option value="3">+3</option>
          <option value="2">+2</option>
          <option value="1">+1</option>
          <option value="0">+0</option>
        </select>
      </div>
      <div class="sheet-resource">
        <h2 class="sheet-resource-title">LOAD</h2>
        <select class="sheet-resource-value sheet-load-value" name="attr_load">
          <option value="12">12</option>
          <option value="11">11</option>
          <option value="10">10</option>
          <option value="9">9</option>
          <option value="8">8</option>
          <option value="7">7</option>
          <option value="6">6</option>
          <option value="5">5</option>
          <option value="4">4</option>
          <option value="3">3</option>
          <option value="2">2</option>
          <option value="1">1</option>
          <option value="0">0</option>
        </select>
      </div>
      <div class="sheet-resource">
        <h2 class="sheet-resource-title">EXPERIENCE</h2>
        <div class="sheet-health-status-box">
          <input class="sheet-resource-value" type="text" name="attr_xp" value="0"/>
        </div>
        <h2 class="sheet-resource-title">SPENT</h2>
        <div class="sheet-health-status-box">
          <input class="sheet-resource-value" type="text" name="attr_total_xp" value="0"/>
        </div>
      </div>
    </div>
  </div>
  <div class="sheet-nav-bar">
    <div class="sheet-nav-child">
      <label class="sheet-page-label">
        <input class="sheet-hide sheet-page-button" type="radio" name="attr_character_page_button" value="1" checked="checked"/>
        <div class="sheet-page-button-back">Summary</div>
      </label>
    </div>
    <div class="sheet-nav-child">
      <label class="sheet-page-label">
        <input class="sheet-hide sheet-page-button" type="radio" name="attr_character_page_button" value="2"/>
        <div class="sheet-page-button-back">Vows</div>
      </label>
    </div>
    <div class="sheet-nav-child">
      <label class="sheet-page-label">
        <input class="sheet-hide sheet-page-button" type="radio" name="attr_character_page_button" value="3"/>
        <div class="sheet-page-button-back">Motivations</div>
      </label>
    </div>
    <div class="sheet-nav-child">
      <label class="sheet-page-label">
        <input class="sheet-hide sheet-page-button" type="radio" name="attr_character_page_button" value="4"/>
        <div class="sheet-page-button-back">Bonds</div>
      </label>
    </div>
    <div class="sheet-nav-child">
      <label class="sheet-page-label">
        <input class="sheet-hide sheet-page-button" type="radio" name="attr_character_page_button" value="5"/>
        <div class="sheet-page-button-back">Proficiencies</div>
      </label>
    </div>
  </div>
  <input class="sheet-summary sheet-hide" type="radio" name="attr_character_page" value="1" checked="checked"/>
  <div class="sheet-summary sheet-showhide">
    <div class="sheet-stats">
      <input class="sheet-hide sheet-stat-edit" type="radio" name="attr_stat_mode" value="1" checked="checked"/>
      <div class="sheet-stat-edit sheet-showhide">
        <div class="sheet-stat-toggle sheet-set-toggle">
          <label class="sheet-stat-toggle sheet-set-toggle">SET
            <input class="sheet-hide" type="radio" name="attr_stat_mode_button" value="2"/>
          </label>
        </div>
            <div class="sheet-stat">
              <h3 class="sheet-stats-title">EDGE</h3>
              <input class="sheet-stats-input" type="text" name="attr_edge" value="1"/><span class="sheet-stats-max">MAX</span><span class="sheet-stats-max" name="attr_max_edge"></span>
            </div>
            <div class="sheet-stat">
              <h3 class="sheet-stats-title">HEART</h3>
              <input class="sheet-stats-input" type="text" name="attr_heart" value="1"/><span class="sheet-stats-max">MAX</span><span class="sheet-stats-max" name="attr_max_heart"></span>
            </div>
            <div class="sheet-stat">
              <h3 class="sheet-stats-title">IRON</h3>
              <input class="sheet-stats-input" type="text" name="attr_iron" value="1"/><span class="sheet-stats-max">MAX</span><span class="sheet-stats-max" name="attr_max_iron"></span>
            </div>
            <div class="sheet-stat">
              <h3 class="sheet-stats-title">SHADOW</h3>
              <input class="sheet-stats-input" type="text" name="attr_shadow" value="1"/><span class="sheet-stats-max">MAX</span><span class="sheet-stats-max" name="attr_max_shadow"></span>
            </div>
            <div class="sheet-stat">
              <h3 class="sheet-stats-title">WITS</h3>
              <input class="sheet-stats-input" type="text" name="attr_wits" value="1"/><span class="sheet-stats-max">MAX</span><span class="sheet-stats-max" name="attr_max_wits"></span>
            </div>
      </div>
      <input class="sheet-hide sheet-stat-set" type="radio" name="attr_stat_mode" value="2"/>
      <div class="sheet-stat-set sheet-showhide">
            <div class="sheet-stat">
              <label class="sheet-roll-label">
                <h3 class="sheet-stats-title">EDGE</h3><span class="sheet-stats-input" name="attr_edge"></span>
                <button class="sheet-hide" type="roll" title="Roll +Edge" name="rollEdge" value="&amp;{template:ironcrunch_moves} {{header=@{character_name}}} {{name=Roll +edge}} {{action=[[d12+@{edge}+(?{Modifier|0})]]}} {{negate1=[[1+@{edge}+(?{Modifier|0})]]}} {{negate2=[[2+@{edge}+(?{Modifier|0})]]}} {{negate3=[[3+@{edge}+(?{Modifier|0})]]}} {{negate4=[[4+@{edge}+(?{Modifier|0})]]}} {{negate5=[[5+@{edge}+(?{Modifier|0})]]}} {{negate6=[[6+@{edge}+(?{Modifier|0})]]}} {{negate7=[[7+@{edge}+(?{Modifier|0})]]}} {{negate8=[[8+@{edge}+(?{Modifier|0})]]}} {{negate9=[[9+@{edge}+(?{Modifier|0})]]}} {{negate10=[[10+@{edge}+(?{Modifier|0})]]}} {{negate11=[[11+@{edge}+(?{Modifier|0})]]}} {{negate12=[[12+@{edge}+(?{Modifier|0})]]}} {{challenge1=[[d20]]}} {{challenge2=[[d20]]}} {{momentum=[[@{momentum}]]}} {{modifiers=[[@{edge}+(?{Modifier|0})]]}} {{add=[[(?{Modifier|0})]]}} {{stat=[[@{edge}]]}}"></button>
              </label>
            </div>
            <div class="sheet-stat">
              <label class="sheet-roll-label">
                <h3 class="sheet-stats-title">HEART</h3><span class="sheet-stats-input" name="attr_heart"></span>
                <button class="sheet-hide" type="roll" title="Roll +Heart" name="rollHeart" value="&amp;{template:ironcrunch_moves} {{header=@{character_name}}} {{name=Roll +heart}} {{action=[[d12+@{heart}+(?{Modifier|0})]]}} {{negate1=[[1+@{heart}+(?{Modifier|0})]]}} {{negate2=[[2+@{heart}+(?{Modifier|0})]]}} {{negate3=[[3+@{heart}+(?{Modifier|0})]]}} {{negate4=[[4+@{heart}+(?{Modifier|0})]]}} {{negate5=[[5+@{heart}+(?{Modifier|0})]]}} {{negate6=[[6+@{heart}+(?{Modifier|0})]]}} {{negate7=[[7+@{heart}+(?{Modifier|0})]]}} {{negate8=[[8+@{heart}+(?{Modifier|0})]]}} {{negate9=[[9+@{heart}+(?{Modifier|0})]]}} {{negate10=[[10+@{heart}+(?{Modifier|0})]]}} {{negate11=[[11+@{heart}+(?{Modifier|0})]]}} {{negate12=[[12+@{heart}+(?{Modifier|0})]]}} {{challenge1=[[d20]]}} {{challenge2=[[d20]]}} {{momentum=[[@{momentum}]]}} {{modifiers=[[@{heart}+(?{Modifier|0})]]}} {{add=[[(?{Modifier|0})]]}} {{stat=[[@{heart}]]}}"></button>
              </label>
            </div>
            <div class="sheet-stat">
              <label class="sheet-roll-label">
                <h3 class="sheet-stats-title">IRON</h3><span class="sheet-stats-input" name="attr_iron"></span>
                <button class="sheet-hide" type="roll" title="Roll +Iron" name="rollIron" value="&amp;{template:ironcrunch_moves} {{header=@{character_name}}} {{name=Roll +iron}} {{action=[[d12+@{iron}+(?{Modifier|0})]]}} {{negate1=[[1+@{iron}+(?{Modifier|0})]]}} {{negate2=[[2+@{iron}+(?{Modifier|0})]]}} {{negate3=[[3+@{iron}+(?{Modifier|0})]]}} {{negate4=[[4+@{iron}+(?{Modifier|0})]]}} {{negate5=[[5+@{iron}+(?{Modifier|0})]]}} {{negate6=[[6+@{iron}+(?{Modifier|0})]]}} {{negate7=[[7+@{iron}+(?{Modifier|0})]]}} {{negate8=[[8+@{iron}+(?{Modifier|0})]]}} {{negate9=[[9+@{iron}+(?{Modifier|0})]]}} {{negate10=[[10+@{iron}+(?{Modifier|0})]]}} {{negate11=[[11+@{iron}+(?{Modifier|0})]]}} {{negate12=[[12+@{iron}+(?{Modifier|0})]]}} {{challenge1=[[d20]]}} {{challenge2=[[d20]]}} {{momentum=[[@{momentum}]]}} {{modifiers=[[@{iron}+(?{Modifier|0})]]}} {{add=[[(?{Modifier|0})]]}} {{stat=[[@{iron}]]}}"></button>
              </label>
            </div>
            <div class="sheet-stat">
              <label class="sheet-roll-label">
                <h3 class="sheet-stats-title">SHADOW</h3><span class="sheet-stats-input" name="attr_shadow"></span>
                <button class="sheet-hide" type="roll" title="Roll +Shadow" name="rollShadow" value="&amp;{template:ironcrunch_moves} {{header=@{character_name}}} {{name=Roll +shadow}} {{action=[[d12+@{shadow}+(?{Modifier|0})]]}} {{negate1=[[1+@{shadow}+(?{Modifier|0})]]}} {{negate2=[[2+@{shadow}+(?{Modifier|0})]]}} {{negate3=[[3+@{shadow}+(?{Modifier|0})]]}} {{negate4=[[4+@{shadow}+(?{Modifier|0})]]}} {{negate5=[[5+@{shadow}+(?{Modifier|0})]]}} {{negate6=[[6+@{shadow}+(?{Modifier|0})]]}} {{negate7=[[7+@{shadow}+(?{Modifier|0})]]}} {{negate8=[[8+@{shadow}+(?{Modifier|0})]]}} {{negate9=[[9+@{shadow}+(?{Modifier|0})]]}} {{negate10=[[10+@{shadow}+(?{Modifier|0})]]}} {{negate11=[[11+@{shadow}+(?{Modifier|0})]]}} {{negate12=[[12+@{shadow}+(?{Modifier|0})]]}} {{challenge1=[[d20]]}} {{challenge2=[[d20]]}} {{momentum=[[@{momentum}]]}} {{modifiers=[[@{shadow}+(?{Modifier|0})]]}} {{add=[[(?{Modifier|0})]]}} {{stat=[[@{shadow}]]}}"></button>
              </label>
            </div>
            <div class="sheet-stat">
              <label class="sheet-roll-label">
                <h3 class="sheet-stats-title">WITS</h3><span class="sheet-stats-input" name="attr_wits"></span>
                <button class="sheet-hide" type="roll" title="Roll +Wits" name="rollWits" value="&amp;{template:ironcrunch_moves} {{header=@{character_name}}} {{name=Roll +wits}} {{action=[[d12+@{wits}+(?{Modifier|0})]]}} {{negate1=[[1+@{wits}+(?{Modifier|0})]]}} {{negate2=[[2+@{wits}+(?{Modifier|0})]]}} {{negate3=[[3+@{wits}+(?{Modifier|0})]]}} {{negate4=[[4+@{wits}+(?{Modifier|0})]]}} {{negate5=[[5+@{wits}+(?{Modifier|0})]]}} {{negate6=[[6+@{wits}+(?{Modifier|0})]]}} {{negate7=[[7+@{wits}+(?{Modifier|0})]]}} {{negate8=[[8+@{wits}+(?{Modifier|0})]]}} {{negate9=[[9+@{wits}+(?{Modifier|0})]]}} {{negate10=[[10+@{wits}+(?{Modifier|0})]]}} {{negate11=[[11+@{wits}+(?{Modifier|0})]]}} {{negate12=[[12+@{wits}+(?{Modifier|0})]]}} {{challenge1=[[d20]]}} {{challenge2=[[d20]]}} {{momentum=[[@{momentum}]]}} {{modifiers=[[@{wits}+(?{Modifier|0})]]}} {{add=[[(?{Modifier|0})]]}} {{stat=[[@{wits}]]}}"></button>
              </label>
            </div>
        <div class="sheet-stat-toggle sheet-edit-toggle">
          <label class="sheet-stat-toggle sheet-edit-toggle">EDIT
            <input class="sheet-hide" type="radio" name="attr_stat_mode_button" value="1"/>
          </label>
        </div>
      </div>
    </div>
        <div class="sheet-character-details">
          <div class="sheet-details-row">
            <div class="sheet-character-detail">
              <p>Ancestry
                <input type="text" name="attr_ancestry" placeholder="Ancestry"/>
              </p>
            </div>
            <div class="sheet-character-detail sheet-detail-columns">
              <div class="sheet-detail-column">
                <p>Age</p>
                <input type="text" name="attr_age" placeholder="Age"/>
              </div>
              <div class="sheet-detail-column">
                <p>Sex</p>
                <input type="text" name="attr_sex" placeholder="Sex"/>
              </div>
            </div>
            <div class="sheet-character-detail">
              <p>Speed
                <input type="text" name="attr_speed" placeholder="Speed"/>
              </p>
            </div>
            <div class="sheet-character-detail">
              <p>Resilience
                <input type="text" name="attr_resilience" placeholder="Resilience"/>
              </p>
            </div>
          </div>
          <div class="sheet-details-row">
            <div class="sheet-character-detail">
              <p>Appearance
                <input type="text" name="attr_appearance" placeholder="Appearance"/>
              </p>
            </div>
            <div class="sheet-character-detail">
              <p>Alignment
                <input type="text" name="attr_alignment" placeholder="Alignment"/>
              </p>
            </div>
          </div>
        </div>
    <h3 class="sheet-divide">&emsp;MISSES&emsp;</h3>
    <div class="sheet-misses-track">
      <div>
        <label class="sheet-clear-miss">CLEAR
          <input class="sheet-clear-miss sheet-hide" type="checkbox" name="attr_clear_misses"/>
        </label>
        <select class="sheet-progress-input sheet-miss-input" name="attr_miss-0">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input sheet-miss-input" name="attr_miss-1">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input sheet-miss-input" name="attr_miss-2">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input sheet-miss-input" name="attr_miss-3">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input sheet-miss-input" name="attr_miss-4">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input sheet-miss-input" name="attr_miss-5">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input sheet-miss-input" name="attr_miss-6">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input sheet-miss-input" name="attr_miss-7">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input sheet-miss-input" name="attr_miss-8">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input sheet-miss-input" name="attr_miss-9">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <input class="sheet-hide" type="text" name="attr_misses-filled" value="floor((@{miss-0}+@{miss-1}+@{miss-2}+@{miss-3}+@{miss-4}+@{miss-5}+@{miss-6}+@{miss-7}+@{miss-8}+@{miss-9})/4)" disabled="true"/>
      </div>
    </div>
    <div>
      <h3 class="sheet-divide" style="margin-top: 1em;">NOTES</h3><br/>
      <textarea name="attr_sheet-notes"></textarea>
    </div>
  </div>
  <input class="sheet-bonds sheet-hide" type="radio" name="attr_character_page" value="5"/>
  <div class="sheet-bonds sheet-showhide">
    <h3 class="sheet-divide">&emsp;BONDS&emsp;</h3>
    <div class="sheet-bonds-track">
      <div>
        <select class="sheet-progress-input" name="attr_bond-0">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input" name="attr_bond-1">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input" name="attr_bond-2">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input" name="attr_bond-3">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input" name="attr_bond-4">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input" name="attr_bond-5">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input" name="attr_bond-6">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input" name="attr_bond-7">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input" name="attr_bond-8">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <select class="sheet-progress-input" name="attr_bond-9">
              <option value="0" selected="selected"></option>
              <option value="1">-</option>
              <option value="2">+</option>
              <option value="3">*</option>
              <option value="4">#</option>
        </select>
        <input class="sheet-hide" type="text" name="attr_bond-filled" value="floor((@{bond-0}+@{bond-1}+@{bond-2}+@{bond-3}+@{bond-4}+@{bond-5}+@{bond-6}+@{bond-7}+@{bond-8}+@{bond-9})/4)" disabled="true"/>
      </div>
    </div>
  </div>
  <input class="sheet-vows sheet-hide" type="radio" name="attr_character_page" value="2"/>
  <div class="sheet-vows sheet-showhide">
    <h3 class="sheet-divide">&emsp;VOWS&emsp;</h3>
    <div class="sheet-vows">
      <fieldset class="repeating_vow">
        <input class="sheet-vow-name" type="text" name="attr_vow_name"/>
        <div class="sheet-vows-header">
          <input type="radio" name="attr_vow_rank" value="1"/>
          <h5>Troublesome</h5>
          <input type="radio" name="attr_vow_rank" value="2"/>
          <h5>Dangerous</h5>
          <input type="radio" name="attr_vow_rank" value="3"/>
          <h5>Formidable</h5>
          <input type="radio" name="attr_vow_rank" value="4"/>
          <h5>Extreme</h5>
          <input type="radio" name="attr_vow_rank" value="5"/>
          <h5>Epic</h5>
        </div>
        <div class="sheet-vow">
          <div>
            <label class="sheet-mark-vow">MARK
              <input class="sheet-mark-vow sheet-hide" type="checkbox" name="attr_mark_progress"/>
            </label>
            <label class="sheet-vow-clear-label">CLEAR
              <input class="sheet-clear-vow sheet-hide" type="checkbox" name="attr_clear_vow"/>
            </label>
            <select class="sheet-progress-input" name="attr_vow-0">
                  <option value="0" selected="selected"></option>
                  <option value="1">-</option>
                  <option value="2">+</option>
                  <option value="3">*</option>
                  <option value="4">#</option>
            </select>
            <select class="sheet-progress-input" name="attr_vow-1">
                  <option value="0" selected="selected"></option>
                  <option value="1">-</option>
                  <option value="2">+</option>
                  <option value="3">*</option>
                  <option value="4">#</option>
            </select>
            <select class="sheet-progress-input" name="attr_vow-2">
                  <option value="0" selected="selected"></option>
                  <option value="1">-</option>
                  <option value="2">+</option>
                  <option value="3">*</option>
                  <option value="4">#</option>
            </select>
            <select class="sheet-progress-input" name="attr_vow-3">
                  <option value="0" selected="selected"></option>
                  <option value="1">-</option>
                  <option value="2">+</option>
                  <option value="3">*</option>
                  <option value="4">#</option>
            </select>
            <select class="sheet-progress-input" name="attr_vow-4">
                  <option value="0" selected="selected"></option>
                  <option value="1">-</option>
                  <option value="2">+</option>
                  <option value="3">*</option>
                  <option value="4">#</option>
            </select>
            <select class="sheet-progress-input" name="attr_vow-5">
                  <option value="0" selected="selected"></option>
                  <option value="1">-</option>
                  <option value="2">+</option>
                  <option value="3">*</option>
                  <option value="4">#</option>
            </select>
            <select class="sheet-progress-input" name="attr_vow-6">
                  <option value="0" selected="selected"></option>
                  <option value="1">-</option>
                  <option value="2">+</option>
                  <option value="3">*</option>
                  <option value="4">#</option>
            </select>
            <select class="sheet-progress-input" name="attr_vow-7">
                  <option value="0" selected="selected"></option>
                  <option value="1">-</option>
                  <option value="2">+</option>
                  <option value="3">*</option>
                  <option value="4">#</option>
            </select>
            <select class="sheet-progress-input" name="attr_vow-8">
                  <option value="0" selected="selected"></option>
                  <option value="1">-</option>
                  <option value="2">+</option>
                  <option value="3">*</option>
                  <option value="4">#</option>
            </select>
            <select class="sheet-progress-input" name="attr_vow-9">
                  <option value="0" selected="selected"></option>
                  <option value="1">-</option>
                  <option value="2">+</option>
                  <option value="3">*</option>
                  <option value="4">#</option>
            </select>
            <label class="sheet-fulfill-vow">FULFILL 
              <button class="sheet-hide" type="roll" name="rollVow" value="&amp;{template:ironcrunch_progress} {{header=@{character_name} &lt;em&gt;Fulfill Your Vow&lt;/em&gt; }} {{vowname=@{vow_name}}} {{vow=[[@{vow-filled}]]}} {{challenge1=[[d10]]}} {{challenge2=[[d10]]}}">              </button>
            </label>
            <input class="sheet-hide" type="text" name="attr_vow-filled" value="floor((@{vow-0}+@{vow-1}+@{vow-2}+@{vow-3}+@{vow-4}+@{vow-5}+@{vow-6}+@{vow-7}+@{vow-8}+@{vow-9})/4)" disabled="disabled"/>
          </div>
        </div>
      </fieldset>
    </div>
  </div>
  <input class="sheet-proficiencies sheet-hide" type="radio" name="attr_character_page" value="4"/>
  <div class="sheet-proficiencies sheet-showhide">
    <h3 class="sheet-divide">&emsp;WEAPON PROFICIENCIES&emsp;</h3>
    <div class="sheet-proficiencies-weapons">
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">axes
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_axes_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_axes_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_axes_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">polearms
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_polearms_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_polearms_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_polearms_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">swords
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_swords_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_swords_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_swords_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">thrown weapons
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_thrown weapons_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_thrown weapons_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_thrown weapons_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">whips &amp; chains
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_whips &amp; chains_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_whips &amp; chains_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_whips &amp; chains_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">blunt weapons
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_blunt weapons_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_blunt weapons_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_blunt weapons_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">projectile weapons
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_projectile weapons_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_projectile weapons_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_projectile weapons_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">stabbing weapons
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_stabbing weapons_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_stabbing weapons_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_stabbing weapons_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">unarmed
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_unarmed_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_unarmed_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_unarmed_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
    </div>
  </div>
  <div class="sheet-footer">
    <div class="sheet-momentum">
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="20"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+20</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="19"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+19</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="18"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+18</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="17"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+17</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="16"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+16</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="15"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+15</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="14"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+14</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="13"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+13</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="12"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+12</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="11"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+11</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="10"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+10</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="9"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+9</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="8"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+8</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="7"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+7</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="6"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+6</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="5"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+5</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="4"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+4</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="3"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+3</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="2" checked="checked"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+2</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="1"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">+1</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="0"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">0</h3>
        </div>
      </div>
    </div>
    <div class="sheet-momentum">
      <div class="sheet-momentum sheet-momentum-dark">
        <h3 class="sheet-momentum-title">Momentum</h3>
      </div>
      <div class="sheet-momentum-burn">
        <input class="sheet-momentum-burn" type="checkbox" title="Burn Momentum" name="attr_momentumBurn"/><span class="sheet-momentum-burn">BURN</span>
        <div class="sheet-momentum-burn-back"></div>
      </div>
      <div class="sheet-momentum-status-box">
        <h3 class="sheet-momentum-max">MAX</h3>
        <h3 class="sheet-momentum-status-value"><span name="attr_momentum_max"></span></h3>
        <input class="sheet-hide" type="text" name="attr_momentum_max" value="20"/>
      </div>
      <div class="sheet-momentum-status-box">
        <h3 class="sheet-momentum-reset">RESET</h3>
        <h3 class="sheet-momentum-status-value"><span name="attr_momentum_reset"></span></h3>
        <input class="sheet-hide" type="text" name="attr_momentum_reset" value="2"/>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="-1"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">-1</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="-2"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">-2</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="-3"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">-3</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="-4"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">-4</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="-5"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">-5</h3>
        </div>
      </div>
      <div class="sheet-momentum-box">
        <input class="sheet-momentum-box-input" type="radio" name="attr_momentum" value="-6"/>
        <div class="sheet-momentum-box-back">
          <h3 class="sheet-momentum-box-value">-6</h3>
        </div>
      </div>
    </div>
  </div>
</div>
<input class="sheet-companion-mode sheet-hide" type="radio" name="attr_mode" value="2"/>
<div class="sheet-companion-mode sheet-hide">
  <div class="sheet-header">
    <div class="sheet-header-items">
      <div class="sheet-character-name">
        <h3 class="sheet-character-title">COMPANION</h3>
        <input class="sheet-pc-name" type="text" name="attr_companion_name" placeholder="Companion Name"/>
      </div>
      <div class="sheet-character-role">
        <h3 class="sheet-character-title">ROLE / TITLE</h3>
        <input class="sheet-pc-name" type="text" name="attr_companion_role" placeholder="Companion Role / Title"/>
      </div>
    </div>
    <div class="sheet-resources">
      <div class="sheet-resource">
        <label class="sheet-health-reset">RESET
          <input class="sheet-health-reset sheet-hide" type="checkbox" name="attr_health_reset"/>
        </label>
        <h2 class="sheet-resource-title">HEALTH</h2>
        <div class="sheet-health-status-box">
          <input class="sheet-resource-value" type="text" name="attr_health" value="20"/>
          <div class="sheet-health-max-box">
            <h3 class="sheet-health-max">/</h3>
            <h3 class="sheet-health-max-value"><span class="sheet-health-max-value" name="attr_max_health"></span>
              <input class="sheet-hide" type="text" name="attr_max_health" value="20"/>
            </h3>
          </div>
        </div>
      </div>
      <div class="sheet-resource">
        <h2 class="sheet-resource-title">SPIRIT & LOYALTY</h2>
        <select class="sheet-resource-value" name="attr_spirit">
          <option value="10">+10</option>
          <option value="9">+9</option>
          <option value="8">+8</option>
          <option value="7">+7</option>
          <option value="6">+6</option>
          <option value="5">+5</option>
          <option value="4">+4</option>
          <option value="3">+3</option>
          <option value="2">+2</option>
          <option value="1">+1</option>
          <option value="0">+0</option>
        </select>
      </div>
      <div class="sheet-resource">
        <h2 class="sheet-resource-title">LOAD</h2>
        <select class="sheet-resource-value sheet-load-value" name="attr_load">
          <option value="12">12</option>
          <option value="11">11</option>
          <option value="10">10</option>
          <option value="9">9</option>
          <option value="8">8</option>
          <option value="7">7</option>
          <option value="6">6</option>
          <option value="5">5</option>
          <option value="4">4</option>
          <option value="3">3</option>
          <option value="2">2</option>
          <option value="1">1</option>
          <option value="0">0</option>
        </select>
      </div>
    </div>
  </div>
  <div class="sheet-nav-bar">
    <div class="sheet-nav-child">
      <label class="sheet-page-label">
        <input class="sheet-hide sheet-page-button" type="radio" name="attr_companion_page_button" value="1"/>
        <div class="sheet-page-button-back">Summary</div>
      </label>
    </div>
    <div class="sheet-nav-child">
      <label class="sheet-page-label">
        <input class="sheet-hide sheet-page-button" type="radio" name="attr_companion_page_button" value="2"/>
        <div class="sheet-page-button-back">Proficiencies</div>
      </label>
    </div>
  </div>
  <input class="sheet-summary sheet-hide" type="radio" name="attr_companion_page" value="1" checked="checked"/>
  <div class="sheet-summary sheet-showhide">
    <div class="sheet-stats">
          <div class="sheet-stat">
            <h3 class="sheet-stats-title">EDGE</h3>
            <input class="sheet-stats-input" type="text" name="attr_edge" value="1"/><span class="sheet-stats-max">MAX</span><span class="sheet-stats-max" name="attr_max_edge"></span>
          </div>
          <div class="sheet-stat">
            <h3 class="sheet-stats-title">HEART</h3>
            <input class="sheet-stats-input" type="text" name="attr_heart" value="1"/><span class="sheet-stats-max">MAX</span><span class="sheet-stats-max" name="attr_max_heart"></span>
          </div>
          <div class="sheet-stat">
            <h3 class="sheet-stats-title">IRON</h3>
            <input class="sheet-stats-input" type="text" name="attr_iron" value="1"/><span class="sheet-stats-max">MAX</span><span class="sheet-stats-max" name="attr_max_iron"></span>
          </div>
          <div class="sheet-stat">
            <h3 class="sheet-stats-title">SHADOW</h3>
            <input class="sheet-stats-input" type="text" name="attr_shadow" value="1"/><span class="sheet-stats-max">MAX</span><span class="sheet-stats-max" name="attr_max_shadow"></span>
          </div>
          <div class="sheet-stat">
            <h3 class="sheet-stats-title">WITS</h3>
            <input class="sheet-stats-input" type="text" name="attr_wits" value="1"/><span class="sheet-stats-max">MAX</span><span class="sheet-stats-max" name="attr_max_wits"></span>
          </div>
      <div class="sheet-stat">
        <h3 class="sheet-stats-title">Protection</h3>
        <input class="sheet-stats-input" type="text" name="attr_protection" value="0"/>
      </div>
      <div class="sheet-stat">
        <h3 class="sheet-stats-title">Face Danger / Clash Add</h3>
        <input class="sheet-stats-input" type="text" name="attr_protection" value="0"/>
      </div>
    </div>
        <div class="sheet-companion-details">
          <div class="sheet-details-row">
            <div class="sheet-companion-detail">
              <p>Ancestry
                <input type="text" name="attr_ancestry" placeholder="Ancestry"/>
              </p>
            </div>
            <div class="sheet-companion-detail">
              <p>Asset
                <input type="text" name="attr_asset" placeholder="Asset"/>
              </p>
            </div>
          </div>
          <div class="sheet-details-row">
            <div class="sheet-companion-detail sheet-detail-columns">
              <div class="sheet-detail-column">
                <p>Age</p>
                <input type="text" name="attr_age" placeholder="Age"/>
              </div>
              <div class="sheet-detail-column">
                <p>Sex</p>
                <input type="text" name="attr_sex" placeholder="Sex"/>
              </div>
            </div>
            <div class="sheet-companion-detail">
              <p>Speed
                <input type="text" name="attr_speed" placeholder="Speed"/>
              </p>
            </div>
            <div class="sheet-companion-detail">
              <p>Alignment
                <input type="text" name="attr_alignment" placeholder="Alignment"/>
              </p>
            </div>
          </div>
          <div class="sheet-details-row">
            <div class="sheet-companion-detail">
              <p>Drives/Motivations
                <input type="text" name="attr_drives" placeholder="Drives/Motivations"/>
              </p>
            </div>
          </div>
          <div class="sheet-details-row">
            <div class="sheet-companion-detail">
              <p>Goal
                <input type="text" name="attr_goal" placeholder="Goal"/>
              </p>
            </div>
          </div>
          <div class="sheet-details-row">
            <div class="sheet-companion-detail sheet-details-header">
              <div class="sheet-details-header">
                <h3 class="sheet-details-header">AS FOE</h3>
              </div>
            </div>
          </div>
          <div class="sheet-details-row">
            <div class="sheet-companion-detail">
              <p>Readiness
                <input type="text" name="attr_readiness" placeholder="Readiness"/>
              </p>
            </div>
            <div class="sheet-companion-detail">
              <p>Intelligence
                <input type="text" name="attr_intelligence" placeholder="Intelligence"/>
              </p>
            </div>
            <div class="sheet-companion-detail">
              <p>morale
                <input type="text" name="attr_morale" placeholder="morale"/>
              </p>
            </div>
            <div class="sheet-companion-detail">
              <p>Def. Rating
                <input type="text" name="attr_def_rating" placeholder="Def. Rating"/>
              </p>
            </div>
          </div>
        </div>
    <div>
      <h3 class="sheet-divide" style="margin-top: 1em;">NOTES</h3><br/>
      <textarea name="attr_sheet-notes"></textarea>
    </div>
  </div>
  <input class="sheet-proficiencies sheet-hide" type="radio" name="attr_companion_page" value="2"/>
  <div class="sheet-proficiencies sheet-showhide">
    <h3 class="sheet-divide">&emsp;WEAPON PROFICIENCIES&emsp;</h3>
    <div class="sheet-proficiencies-weapons">
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">axes
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_axes_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_axes_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_axes_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">polearms
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_polearms_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_polearms_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_polearms_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">swords
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_swords_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_swords_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_swords_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">thrown weapons
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_thrown weapons_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_thrown weapons_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_thrown weapons_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">whips &amp; chains
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_whips &amp; chains_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_whips &amp; chains_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_whips &amp; chains_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">blunt weapons
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_blunt weapons_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_blunt weapons_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_blunt weapons_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">projectile weapons
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_projectile weapons_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_projectile weapons_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_projectile weapons_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">stabbing weapons
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_stabbing weapons_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_stabbing weapons_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_stabbing weapons_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
      <div class="sheet-proficiency">
        <h3 class="sheet-proficiency-title">unarmed
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_unarmed_proficiency_0"/><span class="sheet-proficiency-text">when you <em>strike</em>, <em>clash</em>, or <em>battle</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_unarmed_proficiency_1"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, add +1.</span>
          </div>
          <div class="sheet-option-list">
            <input type="checkbox" name="attr_unarmed_proficiency_2"/><span class="sheet-proficiency-text">when you <em>inflict harm</em>, you may reroll.</span>
          </div>
        </h3>
      </div>
    </div>
  </div>
</div>
<input class="sheet-shared-mode sheet-hide" type="radio" name="attr_mode" value="3"/>
<div class="sheet-shared-mode sheet-hide"></div>
<rolltemplate class="sheet-rolltemplate-ironcrunch_moves"> 
  <div class="sheet-roll-container">{{#action}}
    <div class="sheet-subheader">{{header}}</div>
    <div class="sheet-roll-name">{{name}}</div>{{#rollLess() momentum 0}}
    {{#rollTotal() momentum -1}}
    {{#rollTotal() action negate1 }}
    <div class="sheet-result-row">
      <td>Previous Action Score:</td>
      <td>{{action}}</td>
    </div>
    <div class="sheet-result-row">
      <div class="sheet-subfooter sheet-alert">Action die cancelled for matching negative momentum.</div>
    </div>
    <div class="sheet-result-row">
      <td>Stat + Add:</td>
      <td>{{stat}} + {{add}}</td>
    </div>
    <div class="sheet-result-row">
      <div>New Action Score:</div>
      <div>{{modifiers}}</div>
    </div>
    <div class="sheet-result-row">
      <div>Challenge Dice:</div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{/rollTotal() action negate1 }}
    {{#rollTotal() action negate2 }}
    <div class="sheet-result-row">
      <td>Previous Action Score:</td>
      <td>{{action}}</td>
    </div>
    <div class="sheet-result-row">
      <div class="sheet-subfooter sheet-alert">Action die cancelled for matching negative momentum.</div>
    </div>
    <div class="sheet-result-row">
      <td>Stat + Add:</td>
      <td>{{stat}} + {{add}}</td>
    </div>
    <div class="sheet-result-row">
      <div>New Action Score:</div>
      <div>{{modifiers}}</div>
    </div>
    <div class="sheet-result-row">
      <div>Challenge Dice:</div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{/rollTotal() action negate2 }}
    {{/rollTotal() momentum -1}}
    {{#rollTotal() momentum -2}}
    {{#rollTotal() action negate3 }}
    <div class="sheet-result-row">
      <td>Previous Action Score:</td>
      <td>{{action}}</td>
    </div>
    <div class="sheet-result-row">
      <div class="sheet-subfooter sheet-alert">Action die cancelled for matching negative momentum.</div>
    </div>
    <div class="sheet-result-row">
      <td>Stat + Add:</td>
      <td>{{stat}} + {{add}}</td>
    </div>
    <div class="sheet-result-row">
      <div>New Action Score:</div>
      <div>{{modifiers}}</div>
    </div>
    <div class="sheet-result-row">
      <div>Challenge Dice:</div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{/rollTotal() action negate3 }}
    {{#rollTotal() action negate4 }}
    <div class="sheet-result-row">
      <td>Previous Action Score:</td>
      <td>{{action}}</td>
    </div>
    <div class="sheet-result-row">
      <div class="sheet-subfooter sheet-alert">Action die cancelled for matching negative momentum.</div>
    </div>
    <div class="sheet-result-row">
      <td>Stat + Add:</td>
      <td>{{stat}} + {{add}}</td>
    </div>
    <div class="sheet-result-row">
      <div>New Action Score:</div>
      <div>{{modifiers}}</div>
    </div>
    <div class="sheet-result-row">
      <div>Challenge Dice:</div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{/rollTotal() action negate4 }}
    {{/rollTotal() momentum -2}}
    {{#rollTotal() momentum -3}}
    {{#rollTotal() action negate5 }}
    <div class="sheet-result-row">
      <td>Previous Action Score:</td>
      <td>{{action}}</td>
    </div>
    <div class="sheet-result-row">
      <div class="sheet-subfooter sheet-alert">Action die cancelled for matching negative momentum.</div>
    </div>
    <div class="sheet-result-row">
      <td>Stat + Add:</td>
      <td>{{stat}} + {{add}}</td>
    </div>
    <div class="sheet-result-row">
      <div>New Action Score:</div>
      <div>{{modifiers}}</div>
    </div>
    <div class="sheet-result-row">
      <div>Challenge Dice:</div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{/rollTotal() action negate5 }}
    {{#rollTotal() action negate6 }}
    <div class="sheet-result-row">
      <td>Previous Action Score:</td>
      <td>{{action}}</td>
    </div>
    <div class="sheet-result-row">
      <div class="sheet-subfooter sheet-alert">Action die cancelled for matching negative momentum.</div>
    </div>
    <div class="sheet-result-row">
      <td>Stat + Add:</td>
      <td>{{stat}} + {{add}}</td>
    </div>
    <div class="sheet-result-row">
      <div>New Action Score:</div>
      <div>{{modifiers}}</div>
    </div>
    <div class="sheet-result-row">
      <div>Challenge Dice:</div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{/rollTotal() action negate6 }}
    {{/rollTotal() momentum -3}}
    {{#rollTotal() momentum -4}}
    {{#rollTotal() action negate7 }}
    <div class="sheet-result-row">
      <td>Previous Action Score:</td>
      <td>{{action}}</td>
    </div>
    <div class="sheet-result-row">
      <div class="sheet-subfooter sheet-alert">Action die cancelled for matching negative momentum.</div>
    </div>
    <div class="sheet-result-row">
      <td>Stat + Add:</td>
      <td>{{stat}} + {{add}}</td>
    </div>
    <div class="sheet-result-row">
      <div>New Action Score:</div>
      <div>{{modifiers}}</div>
    </div>
    <div class="sheet-result-row">
      <div>Challenge Dice:</div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{/rollTotal() action negate7 }}
    {{#rollTotal() action negate8 }}
    <div class="sheet-result-row">
      <td>Previous Action Score:</td>
      <td>{{action}}</td>
    </div>
    <div class="sheet-result-row">
      <div class="sheet-subfooter sheet-alert">Action die cancelled for matching negative momentum.</div>
    </div>
    <div class="sheet-result-row">
      <td>Stat + Add:</td>
      <td>{{stat}} + {{add}}</td>
    </div>
    <div class="sheet-result-row">
      <div>New Action Score:</div>
      <div>{{modifiers}}</div>
    </div>
    <div class="sheet-result-row">
      <div>Challenge Dice:</div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{/rollTotal() action negate8 }}
    {{/rollTotal() momentum -4}}
    {{#rollTotal() momentum -5}}
    {{#rollTotal() action negate9 }}
    <div class="sheet-result-row">
      <td>Previous Action Score:</td>
      <td>{{action}}</td>
    </div>
    <div class="sheet-result-row">
      <div class="sheet-subfooter sheet-alert">Action die cancelled for matching negative momentum.</div>
    </div>
    <div class="sheet-result-row">
      <td>Stat + Add:</td>
      <td>{{stat}} + {{add}}</td>
    </div>
    <div class="sheet-result-row">
      <div>New Action Score:</div>
      <div>{{modifiers}}</div>
    </div>
    <div class="sheet-result-row">
      <div>Challenge Dice:</div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{/rollTotal() action negate9 }}
    {{#rollTotal() action negate10 }}
    <div class="sheet-result-row">
      <td>Previous Action Score:</td>
      <td>{{action}}</td>
    </div>
    <div class="sheet-result-row">
      <div class="sheet-subfooter sheet-alert">Action die cancelled for matching negative momentum.</div>
    </div>
    <div class="sheet-result-row">
      <td>Stat + Add:</td>
      <td>{{stat}} + {{add}}</td>
    </div>
    <div class="sheet-result-row">
      <div>New Action Score:</div>
      <div>{{modifiers}}</div>
    </div>
    <div class="sheet-result-row">
      <div>Challenge Dice:</div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{/rollTotal() action negate10 }}
    {{/rollTotal() momentum -5}}
    {{#rollTotal() momentum -6}}
    {{#rollTotal() action negate11 }}
    <div class="sheet-result-row">
      <td>Previous Action Score:</td>
      <td>{{action}}</td>
    </div>
    <div class="sheet-result-row">
      <div class="sheet-subfooter sheet-alert">Action die cancelled for matching negative momentum.</div>
    </div>
    <div class="sheet-result-row">
      <td>Stat + Add:</td>
      <td>{{stat}} + {{add}}</td>
    </div>
    <div class="sheet-result-row">
      <div>New Action Score:</div>
      <div>{{modifiers}}</div>
    </div>
    <div class="sheet-result-row">
      <div>Challenge Dice:</div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{/rollTotal() action negate11 }}
    {{#rollTotal() action negate12 }}
    <div class="sheet-result-row">
      <td>Previous Action Score:</td>
      <td>{{action}}</td>
    </div>
    <div class="sheet-result-row">
      <div class="sheet-subfooter sheet-alert">Action die cancelled for matching negative momentum.</div>
    </div>
    <div class="sheet-result-row">
      <td>Stat + Add:</td>
      <td>{{stat}} + {{add}}</td>
    </div>
    <div class="sheet-result-row">
      <div>New Action Score:</div>
      <div>{{modifiers}}</div>
    </div>
    <div class="sheet-result-row">
      <div>Challenge Dice:</div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{/rollTotal() action negate12 }}
    {{/rollTotal() momentum -6}}
    {{/rollLess() momentum 0}}
    {{#^rollLess() momentum 0}}
    <div class="sheet-result-body sheet-result-row">
      <div>Action Score: </div>
      <div>{{action}}</div>
    </div>
    <div class="sheet-result-body sheet-result-row">
      <div>Challenge Dice: </div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{#rollGreater() action challenge1}}
    {{#rollTotal() challenge1 challenge2}}
    <div class="sheet-result-row sheet-roll-outcome">
      <div class="sheet-opportunity"></div>
      <div class="sheet-subfooter">OPPORTUNITY</div>
    </div>{{/rollTotal() challenge1 challenge2}}
    {{#^rollTotal() challenge1 challenge2}}
    {{#rollGreater() action challenge2}}
    <div class="sheet-result-row sheet-roll-outcome">
      <div class="sheet-strong-hit"></div>
      <div class="sheet-subfooter">STRONG HIT</div>
    </div>{{/rollGreater() action challenge2}}
    {{#^rollGreater() action challenge2}}
    <div class="sheet-result-row sheet-roll-outcome">
      <div class="sheet-weak-hit"></div>
      <div class="sheet-subfooter">WEAK HIT</div>
    </div>{{/^rollGreater() action challenge2}}
    {{/^rollTotal() challenge1 challenge2}}
    {{/rollGreater() action challenge1}}
    {{#^rollGreater() action challenge1}}
    {{#rollTotal() challenge1 challenge2}}
    <div class="sheet-result-row sheet-roll-outcome">
      <div class="sheet-complication"></div>
      <div class="sheet-subfooter">COMPLICATION</div>
    </div>{{/rollTotal() challenge1 challenge2}}
    {{#^rollTotal() challenge1 challenge2}}
    {{#rollGreater() action challenge2}}
    <div class="sheet-result-row sheet-roll-outcome">
      <div class="sheet-weak-hit"></div>
      <div class="sheet-subfooter">WEAK HIT</div>
    </div>{{/rollGreater() action challenge2}}
    {{#^rollGreater() action challenge2}}
    <div class="sheet-result-row sheet-roll-outcome">
      <div class="sheet-miss"></div>
      <div class="sheet-subfooter">MISS</div>
    </div>{{/^rollGreater() action challenge2}}
    {{/^rollTotal() challenge1 challenge2}}
    {{/^rollGreater() action challenge1}}
    {{/^rollLess() momentum 0}}
    {{/action}}
    {{#custom}}
    {{#header}}
    <div class="sheet-result-row">
      <div class="sheet-subheader">{{header}}</div>
    </div>{{/header}}
    <div class="sheet-result-row">
      <div>{{name}}  </div>
    </div>{{#allprops() custom name header}}
    <div class="sheet-result-row">
      <div>{{key}}</div>
      <div>{{value}}</div>
    </div>{{/allprops() custom name header}}
    {{/custom}}
  </div>
</rolltemplate>
<rolltemplate class="sheet-rolltemplate-ironcrunch_progress">
  <div class="sheet-roll-container">{{#vow}}
    <div class="sheet-subheader">{{header}}</div>
    <div class="sheet-vow-name">{{vowname}} </div>
    <div class="sheet-result-body sheet-result-row">
      <div>Vow Progress: </div>
      <div>{{vow}}</div>
    </div>
    <div class="sheet-result-body sheet-result-row">
      <div>Challenge Dice: </div>
      <div>{{challenge1}} {{challenge2}}</div>
    </div>{{#rollGreater() vow challenge1}}
    {{#rollTotal() challenge1 challenge2}}
    <div class="sheet-result-row sheet-roll-outcome">
      <div class="sheet-opportunity"></div>
      <div class="sheet-subfooter">OPPORTUNITY</div>
    </div>{{/rollTotal() challenge1 challenge2}}
    {{#^rollTotal() challenge1 challenge2}}
    {{#rollGreater() vow challenge2}}
    <div class="sheet-result-row sheet-roll-outcome">
      <div class="sheet-strong-hit"></div>
      <div class="sheet-subfooter">STRONG HIT</div>
    </div>{{/rollGreater() vow challenge2}}
    {{#^rollGreater() vow challenge2}}
    <div class="sheet-result-row sheet-roll-outcome">
      <div class="sheet-weak-hit"></div>
      <div class="sheet-subfooter">WEAK HIT</div>
    </div>{{/^rollGreater() vow challenge2}}
    {{/^rollTotal() challenge1 challenge2}}
    {{/rollGreater() vow challenge1}}
    {{#^rollGreater() vow challenge1}}
    {{#rollTotal() challenge1 challenge2}}
    <div class="sheet-result-row sheet-roll-outcome">
      <div class="sheet-complication"></div>
      <div class="sheet-subfooter">COMPLICATION</div>
    </div>{{/rollTotal() challenge1 challenge2}}
    {{#^rollTotal() challenge1 challenge2}}
    {{#rollGreater() vow challenge2}}
    <div class="sheet-result-row sheet-roll-outcome">
      <div class="sheet-weak-hit"></div>
      <div class="sheet-subfooter">WEAK HIT</div>
    </div>{{/rollGreater() vow challenge2}}
    {{#^rollGreater() vow challenge2}}
    <div class="sheet-result-row sheet-roll-outcome">
      <div class="sheet-miss"></div>
      <div class="sheet-subfooter">MISS</div>
    </div>{{/^rollGreater() vow challenge2}}
    {{/^rollTotal() challenge1 challenge2}}
    {{/^rollGreater() vow challenge1}}
    {{/vow}}
  </div>
</rolltemplate>
<script type="text/worker">
  on('change:repeating_assets:assettype', function(values) {
  setAttrs({
      ['repeating_assets_Asset' + values.previousValue]: 'off',
      ['repeating_assets_Asset' + values.newValue]: 'on'
  });
});

on('change:repeating_assets:assetDropdownCompanion', function(values) {
  setAttrs({
      ['repeating_assets_AssetCompanionDiv' + values.previousValue]: 'off',
      ['repeating_assets_AssetCompanionDiv' + values.newValue]: 'on'
  });
});

on('change:repeating_assets:assetDropdownPath', function(values) {
  setAttrs({
      ['repeating_assets_AssetPathDiv' + values.previousValue]: 'off',
      ['repeating_assets_AssetPathDiv' + values.newValue]: 'on'
  });
});

on('change:repeating_assets:assetDropdownCombatTalent', function(values) {
  setAttrs({
      ['repeating_assets_AssetCombatTalentDiv' + values.previousValue]: 'off',
      ['repeating_assets_AssetCombatTalentDiv' + values.newValue]: 'on'
  });
});

on('change:repeating_assets:assetDropdownRitual', function(values) {
  setAttrs({
      ['repeating_assets_AssetRitualDiv' + values.previousValue]: 'off',
      ['repeating_assets_AssetRitualDiv' + values.newValue]: 'on'
  });
});

on('change:repeating_assets:builder-titles', function(values) {
  setAttrs({
      ['repeating_assets_builder-titles-' + values.previousValue]: 'off',
      ['repeating_assets_builder-titles-' + values.newValue]: 'on'
  });
});

on('change:repeating_assets:builder-ability-1', function(values) {
  setAttrs({
      ['repeating_assets_builder-ability-1-' + values.previousValue]: 'off',
      ['repeating_assets_builder-ability-1-' + values.newValue]: 'on'
  });
});

on('change:repeating_assets:builder-ability-2', function(values) {
  setAttrs({
      ['repeating_assets_builder-ability-2-' + values.previousValue]: 'off',
      ['repeating_assets_builder-ability-2-' + values.newValue]: 'on'
  });
});

on('change:repeating_assets:builder-ability-3', function(values) {
  setAttrs({
      ['repeating_assets_builder-ability-3-' + values.previousValue]: 'off',
      ['repeating_assets_builder-ability-3-' + values.newValue]: 'on'
  });
});

on('change:repeating_assets:track-dropdown', function(values) {
  setAttrs({
      ['repeating_assets_track-dropdown-' + values.previousValue]: 'off',
      ['repeating_assets_track-dropdown-' + values.newValue]: 'on'
  });
});// Debilities update Momentum MAX and RESET.
on('change:debilWounded change:debilShaken change:debilUnprepared change:debilEncumbered change:debilMarked change:debilHaunted change:debilMaimed change:debilCorrupted change:debilOathbreaker change:debilLeech change:debilCustom1 change:debilCustom2', function() {
  var numDebilities=0
  getAttrs(["debilWounded","debilShaken", "debilUnprepared", "debilEncumbered", "debilMarked", "debilHaunted", "debilMaimed", "debilCorrupted", "debilOathbreaker", "debilLeech", "debilCustom1", "debilCustom2", "momentum_max", "momentum_reset"], function(values) {
      if(values.debilWounded == "on") numDebilities=numDebilities+1;
      if(values.debilShaken == "on") numDebilities=numDebilities+1;
      if(values.debilUnprepared == "on") numDebilities=numDebilities+1;
      if(values.debilEncumbered == "on") numDebilities=numDebilities+1;
      if(values.debilMarked == "on") numDebilities=numDebilities+1;
      if(values.debilHaunted == "on") numDebilities=numDebilities+1;
      if(values.debilMaimed == "on") numDebilities=numDebilities+1;
      if(values.debilCorrupted == "on") numDebilities=numDebilities+1;
      if(values.debilOathbreaker == "on") numDebilities=numDebilities+1;
      if(values.debilLeech == "on") numDebilities=numDebilities+1;
      if(values.debilCustom1 == "on") numDebilities=numDebilities+1;
      if(values.debilCustom2 == "on") numDebilities=numDebilities+1;
      setAttrs({ momentum_max: (20 - numDebilities)});
      if (numDebilities===0) setAttrs({ momentum_reset: 2});
      if (numDebilities===1) setAttrs({ momentum_reset: 1});
      if (numDebilities>1) setAttrs({ momentum_reset: 0});
  });
});

// Do not allow Momentum to go over MAX.
on('change:momentum change:momentum_max', function() {
  getAttrs(["momentum","momentum_max"], function(values) {
      if(parseInt(values.momentum) > parseInt(values.momentum_max)) setAttrs({ momentum: parseInt(values.momentum_max)});
  });
});

on('change:momentumBurn', function() {
  getAttrs([ "momentum_reset" ], function(values) {
      setAttrs({
          momentum: parseInt(values.momentum_reset),
          momentumBurn: 'off'
      });
  });
});on('change:character_page_button', function(eventinfo) {
  setAttrs({
    character_page: eventinfo.newValue
  });
});

on('change:companion_page_button', function(eventinfo) {
  setAttrs({
    companion_page: eventinfo.newValue
  });
});

on('change:shared_page_button', function(eventinfo) {
  setAttrs({
    shared_page: eventinfo.newValue
  });
});

on('change:mode_button', function(eventinfo) {
  setAttrs({
    mode: eventinfo.newValue,
    modes_choice: 'off'
  });
});

on('change:stat_mode_button', function(eventinfo) {
  setAttrs({
    stat_mode: eventinfo.newValue,
  });
});on('change:repeating_vow:mark_progress', function() {
  let vow
  let vow_rank
  getAttrs([
    "repeating_vow_vow_rank",
    'repeating_vow_vow-0',
    'repeating_vow_vow-1',
    'repeating_vow_vow-2',
    'repeating_vow_vow-3',
    'repeating_vow_vow-4',
    'repeating_vow_vow-5',
    'repeating_vow_vow-6',
    'repeating_vow_vow-7',
    'repeating_vow_vow-8',
    'repeating_vow_vow-9'
  ],
  function(values) {
    vow = [ 
      parseInt(values['repeating_vow_vow-0']),
      parseInt(values['repeating_vow_vow-1']),
      parseInt(values['repeating_vow_vow-2']),
      parseInt(values['repeating_vow_vow-3']),
      parseInt(values['repeating_vow_vow-4']),
      parseInt(values['repeating_vow_vow-5']),
      parseInt(values['repeating_vow_vow-6']),
      parseInt(values['repeating_vow_vow-7']),
      parseInt(values['repeating_vow_vow-8']),
      parseInt(values['repeating_vow_vow-9'])
    ]
    vow_rank = parseInt(values.repeating_vow_vow_rank)


  function getCurrentProgress (vowValues) {
    let total = 0
    vowValues.map(x =>{
      total = x + total
    })
    return total
  }

  function updateVowValues (newValue) {
    let vowNumber = 0
    for (; newValue > 0;) {
      let updateValue = (newValue < 4) ? newValue : 4
      setAttrs({
        ['repeating_vow_vow-' + vowNumber]: updateValue
      })
      newValue = newValue - updateValue
      vowNumber++
    }
  }

  function updateVow (mark, vowArray) {
    let newValue = mark + getCurrentProgress(vowArray)
    let finalValue = (newValue < 40) ? newValue : 40
    updateVowValues(finalValue)
  }
  console.log(vow_rank)
  if (vow_rank === 1) {
    let mark = 12
    updateVow(mark, vow)
  } else if (vow_rank === 2) {
    let mark = 8
    updateVow(mark, vow)
  } else if (vow_rank === 3) {
    let mark = 4
    updateVow(mark, vow)
  } else if (vow_rank === 4) {
    let mark = 2
    updateVow(mark, vow)
  } else if (vow_rank === 5) {
    let mark = 1
    updateVow(mark, vow)
  } else {
    setAttrs({ 
      'repeating_vow_mark_error': 'on'
    })
    console.log('error')
  }
});
});

on('change:repeating_vow:clear_vow', function() {
  setAttrs({ 
    'repeating_vow_vow-0': '0',
    'repeating_vow_vow-1': '0',
    'repeating_vow_vow-2': '0',
    'repeating_vow_vow-3': '0',
    'repeating_vow_vow-4': '0',
    'repeating_vow_vow-5': '0',
    'repeating_vow_vow-6': '0',
    'repeating_vow_vow-7': '0',
    'repeating_vow_vow-8': '0',
    'repeating_vow_vow-9': '0',
    'repeating_vow_clear_vow': 'off'
  });
});

on('change:clear_misses', function() {
  setAttrs({ 
    'miss-0': '0',
    'miss-1': '0',
    'miss-2': '0',
    'miss-3': '0',
    'miss-4': '0',
    'miss-5': '0',
    'miss-6': '0',
    'miss-7': '0',
    'miss-8': '0',
    'miss-9': '0',
    'clear_misses': 'off'
  });
});var updateMaxHealth = function() {
  getAttrs(['iron'], function(v) {
    let max_health = (v.iron*4)+16
    setAttrs({
      max_health: max_health
    });
  });
};

//Calculate Max Health
on('change:iron', function() {
  updateMaxHealth();
});

//Reset Health if set above Max
on('change:health', function(healthChange) {
  getAttrs(["max_health"], function(values) {
    if (parseInt(healthChange.newValue) > parseInt(values.max_health)) {
      setAttrs({health: values.max_health});
    }
  });
});

on('change:health_reset', function() {
  getAttrs(["max_health"], function(values) {
      setAttrs({health: values.max_health});
  });
});

//Cannot increase Health while Wounded
//Health reaching 0 marks Wounded
on('change:health', function(eventinfo) {
    getAttrs(["debilWounded"], function(values) {
        if(values.debilWounded == "on") {
            if (parseInt(eventinfo.newValue) > parseInt(eventinfo.previousValue)) {
                setAttrs({health: eventinfo.previousValue});
            }
        }
    });
});

//Cannot increase Spirit while Shaken
//Spirit reaching 0 marks Shaken
on('change:spirit', function(eventinfo) {
    getAttrs(["debilShaken"], function(values) {
        if(values.debilShaken == "on") {
            if (parseInt(eventinfo.newValue) > parseInt(eventinfo.previousValue)) {
                setAttrs({spirit: eventinfo.previousValue});
            }
        }
    });
});

//Cannot increase Supply while Unprepared
//Supply reaching 0 marks Unprepared
on('change:supply', function(eventinfo) {
    getAttrs(["debilUnprepared"], function(values) {
        if(values.debilUnprepared == "on") {
            if (parseInt(eventinfo.newValue) > parseInt(eventinfo.previousValue)) {
                setAttrs({supply: eventinfo.previousValue});
            }
        }
    });
    if (parseInt(eventinfo.newValue) === 0) setAttrs({debilUnprepared: "on"});
});
const ancestries = {
  'construct': { 
    stats: { edge: 2, heart: 0, iron: 4, shadow: 3, wits: 2 }, 
    aspects: [ 'Gifted', 'Fated', 'Martially trained', 'Versatile', 'Burdened', 'Immune', 'Resistant', 'Valorous' ],
    age: { young: null, mature: null }
  },
  'dark dwarf': {
    stats: { edge: 1, heart: 1, iron: 4, shadow: 5, wits: 2 },
    aspects: [ 'Adaptable', 'Immune', 'Dark vision', 'Strong', 'Depths denizen', 'Brutal', 'Crafty', 'Resistant' ],
    age: { young: 55, mature: 120 }
  },
  'dark elf': { 
    stats: { edge: 3, heart: 0, iron: 2, shadow: 6, wits: 2 }, 
    aspects: [ 'Martially trained', 'Adaptable', 'Immune', 'Dark vision', 'Keen senses', 'Tricky', 'Depths denizen', 'Conniving' ],
    age: { young: 153, mature: 330 }
  },
  'deep gnome': { 
    stats: { edge: 1, heart: 1, iron: 3, shadow: 4, wits: 4 },
    aspects: [ 'Lucky', 'Striver', 'Dark vision', 'Keen senses', 'Smart', 'Depths denizen', 'Resistant' ],
    age: { young: 55, mature: 120 }
  },
  'dwarf': {
    stats: { edge: 1, heart: 2, iron: 4, shadow: 3, wits: 3 },
    aspects: [ 'Martially trained', 'Adaptable', 'Dark vision', 'Strong', 'Depths denizen', 'Crafty', 'Forager', 'Resistant' ],
    age: { young: 55, mature: 120 }
  },
  'ebu gogo': {
    stats: { edge: 5, heart: 1, iron: 3, shadow: 4, wits: 0 },
    aspects: [ 'Dark vision', 'Keen senses', 'Light-footed', 'Tricky', 'Depths denizen', 'Brutal', 'Forager', 'Valorous' ],
    age: { young: 20, mature: 45 }
  },
  'elf': {
    stats: { edge: 4, heart: 2, iron: 1, shadow: 3, wits: 3 },
    aspects: [ 'Martially trained', 'Adaptable', 'Immune', 'Keen senses', 'Light-footed', 'Intuitive traveller', 'Sensitive', 'Survivalist' ],
    age: { young: 153, mature: 330 }
  },
  'gnome': {
    stats: { edge: 0, heart: 4, iron: 2, shadow: 3, wits: 4 },
    aspects: [ 'Lucky', 'Striver', 'Keen senses', 'Smart', 'Inquisitive', 'Charming', 'Cheerful', 'Crafty', 'Resistant' ],
    age: { young: 55, mature: 120 }
  },
  'goblin': {
    stats: { edge: 4, heart: 1, iron: 1, shadow: 5, wits: 2 },
    aspects: [ 'Martially trained', 'Striver', 'Dark vision', 'Keen senses', 'Light-footed', 'Tricky', 'Conniving', 'Forager', 'Survivalist' ],
    age: { young: 15, mature: 36 }
  },
  'half elf': {
    stats: { edge: 3, heart: 3, iron: 1, shadow: 3, wits: 3 },
    aspects: [ 'Versatile', 'Keen senses', 'Smart', 'Charming', 'Intuitive traveler', 'Congenial', 'Survivalist' ],
    age: { young: 27, mature: 60 }
  },
  'half-ogre': {
    stats: { edge: 1, heart: 2, iron: 5, shadow: 4, wits: 1 },
    aspects: [ 'Striver', 'Dark vision', 'Rampager', 'Strong', 'Intimidating', 'Brutal', 'Resistant', 'Valorous' ],
    age: { young: 18, mature: 42 }
  },
  'half-orc': {
    stats: { edge: 2, heart: 2, iron: 4, shadow: 3, wits: 2 },
    aspects: [ 'Martially trained', 'Adaptable', 'Dark vision', 'Strong', 'Intimidating', 'Brutal', 'Hard to die' ],
    age: { young: 18, mature: 42 }
  },
  'half-troll': {
    stats: { edge: 2, heart: 3, iron: 4, shadow: 3, wits: 1 },
    aspects: [ 'Naturally armed', 'Striver', 'Dark vision', 'Strong', 'Regenerative', 'Forager', 'Survivalist', 'Resistant', 'Valorous' ],
    age: { young: 15, mature: 36 }
  },
  'halfling': {
    stats: { edge: 3, heart: 5, iron: 0, shadow: 3, wits: 2 },
    aspects: [ 'Lucky', 'Adaptable', 'Keen senses', 'Light-footed', 'Brave', 'Valorous' ],
    age: { young: 27, mature: 60 }
  },
  'hobgoblin': {
    stats: { edge: 3, heart: 1, iron: 3, shadow: 4, wits: 2 },
    aspects: [ 'Martially trained', 'Striver', 'Dark vision', 'Keen senses', 'Strong', 'Tricky', 'Intimidating', 'Brutal', 'Resistant' ],
    age: { young: 15, mature: 36 }
  },
  'human': {
    stats: { edge: 2, heart: 2, iron: 2, shadow: 2, wits: 2 },
    aspects: [ 'High potential', 'Gifted', 'Specialized', 'Fated', 'Versatile', 'Inquisitive', 'Congenial' ],
    age: { young: 20, mature: 45 }
  },
  'menehune': {
    stats: { edge: 2, heart: 3, iron: 0, shadow: 3, wits: 5 },
    aspects: [ 'Adaptable', 'Dark vision', 'Keen senses', 'Light-footed', 'Smart', 'Intuitive traveller' ],
    age: { young: 55, mature: 120 }
  },
  'samsaran': {
    stats: { edge: 2, heart: 3, iron: 0, shadow: 3, wits: 5 },
    aspects: [ 'Specialized', 'Fated', 'Striver', 'Smart', 'Hard to die' ],
    age: { young: 83, mature: 180 }
  },
  'undead': {
    stats: { edge: 2, heart: 1, iron: 2, shadow: 6, wits: 2 },
    aspects: [ 'Fated', 'Striver', 'Burdened', 'Immune', 'Depths denizen', 'Resistant', 'Valorous', 'Hard to die' ],
    age: { young: null, mature: null }
  },
  'air sprite': {
    stats: {edge: 4, heart: 2, iron: 0, shadow: 5, wits: 2},
    aspects: ['Martially trained', 'Striver', 'Immune', 'Light-footed', 'Tricky', 'Charming', 'Conniving', 'Inquisitive', 'Intuitive traveller', 'Cheerful'],
    age: { young: 83, mature: 180 }
  },
  'airborn': {
    stats: {edge: 4, heart: 2, iron: 1, shadow: 4, wits: 2},
    aspects: ['Martially trained', 'Striver', 'Immune', 'Light-footed', 'Tricky', 'Elemental kin', 'Intuitive traveller', 'Conniving '],
    age: { young: 20, mature: 45 }
  },
  'earth sprite': {
    stats: {edge: 2, heart: 2, iron: 4, shadow: 5, wits: 0 },
    aspects: ['Martially trained', 'Immune', 'Crewed', 'Strong', 'Tricky ', 'Intimidating', 'Valorous', 'Hard to die'],
    age: { young: 83, mature: 180 }
  },
  'earthborn': {
    stats: {edge: 1, heart: 2, iron: 5, shadow: 3, wits: 2},
    aspects: ['Martially trained', 'Striver', 'Immune', 'Strong', 'Elemental kin', 'Resistant', 'Hard to die'],
    age: { young: 20, mature: 45 }
  },
  'fire sprite': {
    stats: {edge: 2, heart: 4, iron: 2, shadow: 3, wits: 2 },
    aspects: ['Martially trained', 'Immune', 'Crewed', 'Strong', 'Tricky ', 'Intimidating', 'Valorous', 'Hard to die'],
    age: { young: 83, mature: 180 }
  },
  'fireborn': {
    stats: {edge: 2, heart: 5, iron: 2, shadow: 2, wits: 2 },
    aspects: ['Fated ', 'Immune ', 'Rampager ', 'Brave ', 'Elemental kin', 'Intimidating', 'Brutal'],
    age: { young: 20, mature: 45 }
  },
  'water sprite': {
    stats: {edge: 3, heart: 2, iron: 1, shadow: 3, wits: 3 },
    aspects: ['Fated ', 'Versatile ', 'Immune ', 'Smart ', 'Charming', 'Conniving', 'Sensitive'],
    age: { young: 83, mature: 180 }
  },
  'waterborn': {
    stats: {edge: 2, heart: 1, iron: 2, shadow: 3, wits: 5},
    aspects: ['Fated ', 'Versatile ', 'Immune ', 'Smart ', 'Elemental kin'],
    age: { young: 20, mature: 45 }
  },
  'amphibian': {
    stats: {edge: 3, heart: 2, iron: 2, shadow: 4, wits: 2 },
    aspects: ['Adaptable ','Immune ','Dark vision ','Keen senses ','Tricky','Animal kin','Regenerative'],
    age: { young: 15, mature: 36 }
  },
  'apefolk': {
    stats: {edge: 3, heart: 2, iron: 4, shadow: 1, wits: 3 },
    aspects: ['Martially trained','Rampager','Light-footed','Strong ','Animal kin','Intimidating','Brutal','Valorous'],
    age: { young: 15, mature: 36 }
  },
  'chiropteran': {
    stats: {edge: 3, heart: 1, iron: 1, shadow: 6, wits: 2 },
    aspects: ['Naturally armed ','Dark vision ','Keen senses ','Crewed ','Light-footed','Tricky','Animal kin','Valorous'],
    age: { young: 20, mature: 45 }
  },
  'elephantine': {
    stats: {edge: 0, heart: 3, iron: 4, shadow: 2, wits: 4 },
    aspects: ['Naturally armed ','Rampager ','Keen senses ','Brave ','Strong ','Intuitive traveller ','Animal kin ','Resistant'],
    age: { young: 27, mature: 60 }
  },
  'faun': {
    stats: {edge: 2, heart: 5, iron: 1, shadow: 2, wits: 3},
    aspects: ['Naturally armed ','Brave ','Smart ','Intuitive traveler ','Animal kin','Charming','Sensitive','Cheerful ','Survivalist'],
    age: { young: 20, mature: 45 }
  },
  'feline': {
    stats: {edge: 5, heart: 1, iron: 1, shadow: 4, wits: 2},
    aspects: ['Naturally armed ','Dark vision ','Keen senses', 'Light-footed','Tricky','Inquisitive','Intuitive traveller ','Animal kin','Predator','Survivalist'],
    age: { young: 20, mature: 45 }
  },
  'hogfolk': {
    stats: {edge: 2, heart: 1, iron: 3, shadow: 2, wits: 5 },
    aspects: ['Rampager ','Keen senses ','Strong ','Smart ','Inquisitive ','Animal kin','Forager','Survivalist'],
    age: { young: 20, mature: 45 }
  },
  'houndfolk': {
    stats: {edge: 2, heart: 4, iron: 2, shadow: 2, wits: 3},
    aspects: ['Naturally armed ','Striver ','Keen senses ','Brave ','Smart','Animal kin','Charming','Intimidating ','Congenial','Cheerful'],
    age: { young: 20, mature: 45 }
  },
  'kitsune': {
    stats: {edge: 3, heart: 2, iron: 0, shadow: 6, wits: 2 },
    aspects: ['Naturally armed ','Keen senses ','Light-footed ','Tricky ','Animal kin','Conniving','Cheerful','Forager'],
    age: { young: 20, mature: 45 }
  },
  'leporine': {
    stats: {edge: 3, heart: 5, iron: 1, shadow: 2, wits: 2 },
    aspects: ['Lucky ','Dark vision ','Keen senses ','Light-footed ','Brave','Animal kin','Valorous'],
    age: { young: 20, mature: 45 }
  },
  'lizardfolk': {
    stats: {edge: 3, heart: 2, iron: 4, shadow: 4, wits: 0},
    aspects: ['Naturally armed ','Immune ','Dark vision', 'Light-footed','Tricky','Animal kin','Regenerative ','Resistant'],
    age: { young: 20, mature: 45 }
  },
  'lupine': {
    stats: {edge: 5, heart: 0, iron: 3, shadow: 3, wits: 2},
    aspects: ['Naturally armed ','Dark vision ','Keen senses', 'Light-footed','Animal kin','Intimidating','Brutal ','Predator','Valorous'],
    age: { young: 20, mature: 45 }
  },
  'minotaur': {
    stats: {edge: 2, heart: 0, iron: 5, shadow: 3, wits: 3},
    aspects: ['Naturally armed ','Dark vision ','Rampager ','Strong ','Depths denizen','Animal kin','Intimidating','Brutal ','Hard to die'],
    age: { young: 20, mature: 45 }
  },
  'ophidian': {
    stats: {edge: 3, heart: 1, iron: 2, shadow: 6, wits: 1 },
    aspects: ['Immune ','Dark vision ','Keen senses ','Light-footed ','Tricky','Animal kin','Conniving','Brutal','Predator'],
    age: { young: 27, mature: 60 }
  },
  'owlfolk': {
    stats: {edge: 2, heart: 0, iron: 2, shadow: 4, wits: 5 },
    aspects: ['Dark vision ','Keen senses ','Tricky ','Smart', 'Animal kin','Predator','Valorous','Hard to die'],
    age: { young: 15, mature: 36 }
  },
  'pantherine': {
    stats: {edge: 3, heart: 0, iron: 4, shadow: 4, wits: 2},
    aspects: ['Martially trained ','Dark vision ','Keen senses ','Strong ','Tricky','Animal king','Intimidating','Brutal', 'Predator'],
    age: { young: 20, mature: 45 }
  },
  'raccoonian': {
    stats: {edge: 3, heart: 2, iron: 0, shadow: 4, wits: 4},
    aspects: ['Immune ','Dark vision ','Light-footed ','Tricky ','Smart ','Inquisitive','Animal kin','Charming','Forager', 'Survivalist'],
    age: { young: 20, mature: 45 }
  },
  'raptorfolk': {
    stats: {edge: 4, heart: 2, iron: 2, shadow: 1, wits: 4},
    aspects: ['Martially trained ','Keen senses ','Light-footed ','Smart ','Inquisitive','Intuitive traveller','Animal kin ','Charming','Predator','Survivalist'],
    age: { young: 15, mature: 36 }
  },
  'rhinofolk': {
    stats: {edge: 1, heart: 3, iron: 5, shadow: 2, wits: 2},
    aspects: ['Naturally armed ','Keen senses ','Brave ','Strong ','Animal kin','Brutal','Survivalist','Resistant'],
    age: { young: 27, mature: 60 }
  },
  'rodentfolk': {
    stats: {edge: 3, heart: 0, iron: 2, shadow: 5, wits: 3},
    aspects: ['Naturally armed ','Dark vision ','Keen senses ','Tricky ','Smart','Inquisitive','Depths denizen','Animal kin ','Forager','Survivalist'],
    age: { young: 20, mature: 45 }
  },
  'tengu': {
    stats: {edge: 3, heart: 1, iron: 1, shadow: 5, wits: 3},
    aspects: ['Naturally armed ','Light-footed ','Tricky ','Inquisitive ','Animal kin ','Conniving ','Forager ','Survivalist ','Hard to die'],
    age: { young: 20, mature: 45 }
  },
  'testudine': {
    stats: {edge: 0, heart: 3, iron: 2, shadow: 3, wits: 5},
    aspects: ['Striver ','Brave ','Smart ','Inquisitive ','Animal kin ','Charming','Sensitive','Resistant','Hard to die'],
    age: { young: 27, mature: 60 }
  },
  'ursine': {
    stats: {edge: 0, heart: 3, iron: 5, shadow: 3, wits: 2},
    aspects: ['Naturally armed ','Immune ','Dark vision ','Keen senses ','Brave ','Strong ','Animal kin ','Intimidating','Resistant'],
    age: { young: 20, mature: 45 }
  },
  'vanara': {
    stats: {edge: 5, heart: 2, iron: 1, shadow: 3, wits: 2},
    aspects: ['Lucky ','Light-footed ','Tricky','Animal kin ','Charming ','Conniving ','Congenial ','Cheerful ','Valorous'],
    age: { young: 20, mature: 45 }
  },
}

on('change:ancestry', function(values) {
  try {
    let selectedAncestry = ancestries[values.newValue.toLowerCase()]
    setAttrs({
      'edge': selectedAncestry.stats.edge,
      'heart': selectedAncestry.stats.heart,
      'iron': selectedAncestry.stats.iron,
      'shadow': selectedAncestry.stats.shadow,
      'wits': selectedAncestry.stats.wits
    });
  } catch (e) {
    console.error('Ancestry does not exist.')
  }
});

const ageModifiers = {
  'young': { edge: 3, heart: 1, iron: 3, shadow: 2, wits: 1 },
  'adult': { edge: 2, heart: 2, iron: 2, shadow: 2, wits: 2 },
  'mature': { edge: 1, heart: 3, iron: 1, shadow: 2, wits: 3 }
}

on('change:age', function(values) {
  try {
    const ageValue = values.newValue.toLowerCase()
    let selectedAge
    if (ageValue  == 'young' || ageValue  == 'adult' || ageValue  == 'mature') {
      selectedAge = ageModifiers[values.newValue.toLowerCase()]
      updateStats(selectedAge)
    } else {
      getAttrs(['ancestry'], function(ancestryValue) {
        let selectedAncestry = ancestries[ancestryValue.ancestry.toLowerCase()]
        if (parseInt(ageValue) <= selectedAncestry.age.young) {
          selectedAge = ageModifiers['young']
          updateStats(selectedAge)
        } else if (parseInt(ageValue) > selectedAncestry.age.young && parseInt(ageValue) < selectedAncestry.age.mature) {
          selectedAge = ageModifiers['adult']
          updateStats(selectedAge)
        } else if (parseInt(ageValue) >= selectedAncestry.age.mature) {
          selectedAge = ageModifiers['mature']
          updateStats(selectedAge)
        } else {
          console.error('Age value is not a number.')
        }
      }) 
    }

    function updateStats (selectedAge) {
      getAttrs(['edge','heart','iron','shadow','wits'], function(values) {
        const maxEdge = parseInt(values.edge) + parseInt(selectedAge.edge)
        const maxHeart = parseInt(values.heart) + parseInt(selectedAge.heart)
        const maxIron = parseInt(values.iron) + parseInt(selectedAge.iron)
        const maxShadow = parseInt(values.shadow) + parseInt(selectedAge.shadow)
        const maxWits = parseInt(values.wits) + parseInt(selectedAge.wits)
        setAttrs({ 
          'max_edge': maxEdge,
          'max_heart': maxHeart,
          'max_iron': maxIron,
          'max_shadow': maxShadow,
          'max_wits': maxWits
        });
      });
    }
  } catch (e) {
    console.error('Age value is not supported.')
  }
});
</script>