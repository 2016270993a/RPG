- var track = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ]
- var difficulties = { 1:'Troublesome', 2: 'Dangerous', 3: 'Formidable', 4: 'Extreme', 5: 'Epic' }

mixin progressBox
  option(value="0" selected)
  option(value="1") -
  option(value="2") +
  option(value="3") *
  option(value="4") #

div.sheet-vows
  fieldset.repeating_vow
    input(type="text" class="sheet-vow-name" name="attr_vow_name")
    div.sheet-vows-header
      each difficulty, index in difficulties
        input(type="radio" name="attr_vow_rank" value=index)
        h5=difficulty

    div.sheet-vow
      div
        //- TODO: Mark progress based on difficulty
        label.sheet-mark-vow MARK
          input(class="sheet-mark-vow sheet-hide" type="checkbox" name="attr_mark_progress")
        label.sheet-vow-clear-label CLEAR
          input(class="sheet-clear-vow sheet-hide" type="checkbox" name="attr_clear_vow")
        each index in track
          select(name=`attr_vow-${index}` class="sheet-progress-input")
            +progressBox
        label.sheet-fulfill-vow FULFILL 
          button(
            type="roll"
            class='sheet-hide'
            name="rollVow"
            value="&{template:ironcrunch_progress} {{progress_type=Vow}} {{header=@{character_name} <em>Fulfill Your Vow</em> }} {{progress_name=@{vow_name}}} {{progress=[[@{vow-filled}]]}} {{challenge1=[[d10]]}} {{challenge2=[[d10]]}}"
          )               
        input(
          type="text"
          class="sheet-hide"
          name="attr_vow-filled"
          value="floor((@{vow-0}+@{vow-1}+@{vow-2}+@{vow-3}+@{vow-4}+@{vow-5}+@{vow-6}+@{vow-7}+@{vow-8}+@{vow-9})/4)"
          disabled
        )
  h3 Vow Archive
  fieldset.repeating_vowarchive
    span(name="attr_vow_name")
