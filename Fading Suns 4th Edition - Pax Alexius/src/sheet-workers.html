<script type="text/worker">

    /* UNUSED YET

    const characteristics = {
        body: [ 'strength', 'dexterity', 'endurance' ],
        mind: [ 'wits', 'perception', 'will' ],
        spirit: [ 'presence', 'intuition', 'faith' ]
    };
    const all_characteristics = [].concat(Object.values(characteristics).flat());

    const all_skills = [
        'academia',
        'alchemy',
        'animalia',
        'arts',
        'charm',
        'crafts',
        'disguise',
        'drive',
        'empathy',
        'fight',
        'focus',
        'impress',
        'interface',
        'intrusion',
        'knavery',
        'melee',
        'observe',
        'perform',
        'pilot',
        'remedy',
        'shoot',
        'sleight_of_hand',
        'sneak',
        'survival',
        'tech_redemption',
        'vigor'
    ];

    */


    on("sheet:opened", function() {
        
        // sheet versioning
        getAttrs( [ 'sheet_version' ], values => {

            if (values.sheet_version !== "latest") {

                // insert version updates here
            }

            const latest_version = "1.0.0";
            
            if (values.sheet_version != latest_version) {
                setAttrs({ sheet_version: latest_version });
            }
        });

        // translate roll queries
        {
            let setAttrsObj = {};

            // Goal rolls
            let goal_bonus_penalty = getTranslationByKey('goal_bonus_penalty');
            setAttrsObj['goal_bonus_penalty_rollquery_i18n'] = `${goal_bonus_penalty}|0`;

            setAttrs(setAttrsObj);
        }
        
    });

</script>
