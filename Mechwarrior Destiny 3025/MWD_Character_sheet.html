<!--Top of Charsheet Inputs-->
<input type="checkbox" name="attr_tab" class="hidden tab-is-main" value="main" checked>
	
<!--Page Selector Tabs-->
<div class="title">
	<label class="tab-selector" title="General">
		<input type="radio" name="attr_tab" value="general" checked>
		<span>
			General Information
		</span>
	</label>
	<label class="tab-selector" title="Stats">
		<input type="radio" name="attr_tab" value="stats">
		<span>
			Stats, Skills, and Equipment
		</span>
    </label>
    <label class="tab-selector" title="Battlemech">
		<input type="radio" name="attr_tab" value="battlemech">
		<span>
			Battlemech & Combat Vehicle
		</span>
	</label>
    <label class="tab-selector" title="NPC">
		<input type="radio" name="attr_tab" value="NPC">
		<span>
			NPC
		</span>
	</label>
</div>

<!--Fixed Header-->
<!--Character Name & Game Logo-->
<div class="container-name-logo">
    <!--Character Name-->
    <div class="character-name white-container">
        <label class="label-name font1-medium" >Name:</label>
        <input type="text" class="field-name font1-big" autocomplete="off" spellcheck="false" title="@{character_name}"name="attr_character_name">
    </div>

    <!--Mechwarrior Destiny Logo-->
    <div class="mechwarrior-destiny-logo white-container" >
        <img src="https://raw.githubusercontent.com/nicolas-sancho/Repositorio/master/Logo-Color-Transparent.PNG" alt="MechWarrior Destiny" width="300px" height="180px">
    </div>
</div>

<!--Tabs-->
<!--General Information Tab-->
<input type="checkbox" name="attr_tab" class="hidden tab" value="general" checked>
<div class="page-general panel">

	<!--Vital Factors-->
	<div class="container-vital-factors">

		<label class="label-vital-factors font1-medium section-title">Vital Factors</label>
		<!--Faction-->
		<label class="label-faction font2-medium">Faction:</label>
		<input type="text" list="3025_factions" class="field-faction font2-medium" spellcheck="false" title="@{faction}" name="attr_faction">
        <datalist id="3025_factions">
			<option value="Capellan Confederation (House Liao)">
			<option value="Draconis Combine (House Kurita)">
			<option value="Federated Suns (House Davion)">
			<option value="Free Worlds League (House Marik)">
			<option value="Lyran Commonwealth (House Steiner)">
			<option value="Magistracy of Canopus">
			<option value="Outworlds Alliance">
			<option value="Taurian Concordat">
			<option value="Pirate (Bandit Kingdom)">
			<option value="ComStar">
			<option value="Mercenary">
			<option value="Pirate (Independent)">
			<option value="Unaffiliated">
        </datalist>
		<!--Age-->
		<label class="label-age font2-medium">Age:</label>
		<input type="number" class="field-age font2-medium" title="@{age}" name="attr_age">
		<!--Rank-->
		<label class="label-rank font2-medium">Rank:</label>
		<input type="text" class="field-rank font2-medium" autocomplete="off" spellcheck="false" title="@{rank}" name="attr_name">
		<!--Experience Level-->
		<label class="label-experience-level font2-medium">Experience Level: </label>
		<select type="text" class= "field-experience-level font2-medium" title="@{experience_level}" name="attr_experience_level">
			<option value="green" selected="selected">Green</option>
			<option value="regular">Regular</option>
			<option value="veteran">Veteran</option>
			<option value="elite">Elite</option>
		</select>
		<!--XP-->
		<label class="label-xp font2-medium">XP:</label>
		<input type="number" class="field-xp font2-medium"  title="@{xp}" name="attr_xp">
	</div>

    <!--Plot Points, Edge Points and Initiative-->
    <div class="container-plot-points">
        <div class="container-points">
            <label class="label-plot-points font2-medium">Plot points</label>
            <input type="number" class="field-plot-points font2-medium" name="attr_plot-points" title="@{plot-points}" value="3" min="0" max="5">
        </div>
        <div class="container-points">
            <label class="label-edge-points font2-medium">Edge points</label>
            <input type="number" class="field-edge-points font2-medium" name="attr_edge-points" title="@{edge-points}" value="1" min="0" max="6">
		</div>
		<div class="container-points">
            <label class="label-initiative-base font2-medium">Initiative</label>
            <input type="number" class="field-base-initiative font2-medium" name="attr_base-initiative" title="@{base-initiative}" value="1" min="0" max="10">
            <button type="roll" class="initiative-button" name="roll_initiative" value="&{template:custom} {{title= Initiative Roll}} {{subtitle= @{character_name}}} {{Base Initiative = [[@{base-initiative}]] }} {{Initiative Roll = [[2d6 + @{base-initiative} &{tracker} ]] }}"> </button>
        </div>
    </div>
    
	<!--Character's Tags-->
    <div class="container-character-tags">
        <label class="label-character-tags font1-medium">Tags</label>
        <div class="container-tags"> 
            <label class="label-tag font2-medium">&bull;</label>
            <input type="text" class="field-tag font2-medium" autocomplete="off" spellcheck="false" title="@{tag1}" name="attr_tag1">
            <label class="label-tag font2-medium">&bull;</label>
            <input type="text" class="field-tag font2-medium" autocomplete="off" spellcheck="false" title="@{tag2}" name="attr_tag2">
            <label class="label-tag font2-medium">&bull;</label>
            <input type="text" class="field-tag font2-medium" autocomplete="off" spellcheck="false" title="@{tag3}" name="attr_tag3">
            <label class="label-tag font2-medium">&bull;</label>
            <input type="text" class="field-tag font2-medium" autocomplete="off" spellcheck="false" title="@{tag4}" name="attr_tag4">
            <label class="label-tag font2-medium">&bull;</label>
            <input type="text" class="field-tag font2-medium" autocomplete="off" spellcheck="false" title="@{tag5}" name="attr_tag5">
        </div>
	</div>
	
    <!--History-->
    <div class="container-history">
        <label class="label-history font1-medium">History</label>
        <textarea class ="field-history font2-small" spellcheck="false" title="@{history}" name="attr_history"></textarea>
    </div>

    <!--Personality-->
    <div class="container-personality">
        <label class="label-personality font1-medium">Personality</label>
        <textarea class="field-personality font2-small" spellcheck="false" title="@{personality}" name="attr_personality"></textarea>
	</div>

	<!--Disposition-->
	<div class="container-disposition">
		<label class="label-disposition font1-medium">Disposition</label>
		<textarea class="field-disposition font2-small" rows="3" spellcheck="false" title="@{disposition}" name="attr_disposition"></textarea>
	</div>

    <!--Cues-->
    <div class="container-cues">
        <label class="label-cues font1-medium">Cues</label>
        <div class="container-repeating-cues">
            <fieldset class="repeating_cues">
                <textarea type="text" class="field-cue font2-small" autocomplete="off" spellcheck="false" name="attr_cue"></textarea>
                <button type="roll" class="shout-button" name="shout_cue" value="&{template:custom} {{title=  **@{character_name} says:** }} {{desc= ***&laquo; @{cue} &raquo;*** }} "></button> 
            </fieldset>
        </div>
    </div>
	
</div>

<!--Stats, Skills and Equipment Tab-->
<input type="checkbox" name="attr_tab" class="hidden tab" value="stats" >
<div class="page-stats panel">

    <!--Attributes-->
    <div class="container-attributes withOverflowingBackground">
        <label class="label-attributes font1-medium">Attributes</label>
        <div class="container-attributes-values">
            <div class="container-attribute">
                <label class="label-attribute font1-medium" >STR</label>
                <button type="roll" class="attribute-button" name="roll_attribute" value="&{template:custom} ?{Secondary Attribute|STR, [[@{str}]] **STR**|RFL, [[@{RFL}]] **RFL**|INT, [[@{int}]] **INT**|WIL, [[@{wil}]] **WIL**|CHA, [[@{cha}]] **CHA**} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0}[[ [[ [[1d6]] + [[1d6]] + [[@{str}]] + [[?{Secondary Attribute}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]]  {{title= Pure Attribute Test}} {{subtitle= @{character_name}}} {{Base Attribute= [[@{str}]] **STR**}}  {{Secondary Attributte= ?{Secondary Attribute} }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Roll=$[[8]] }} {{Opposing_Roll= $[[7]] }} "></button>
                <input type="number" class="field-attribute font1-medium" name="attr_str" title="@{str}" value="1" min="1" max="6">
            </div>
        
            <div class="container-attribute">
                <label class="label-attribute font1-medium" >RFL</label>
                <button type="roll" class="attribute-button" name="roll_attribute" value="&{template:custom} ?{Secondary Attribute|STR, [[@{str}]] **STR**|RFL, [[@{RFL}]] **RFL**|INT, [[@{int}]] **INT**|WIL, [[@{wil}]] **WIL**|CHA, [[@{cha}]] **CHA**} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{rfl}]] + [[?{Secondary Attribute}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Pure Attribute Test}} {{subtitle= @{character_name}}} {{Base Attribute= [[@{rfl}]] **RFL**}}   {{Secondary Attributte= ?{Secondary Attribute} }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Roll= $[[8]] }} {{Opposing_Roll= $[[7]] }}"></button>
                <input type="number" class="field-attribute font1-medium" name="attr_rfl" title="@{rfl}" value="1" min="1" max="6">
            </div>

            <div class="container-attribute">
                <label class="label-attribute font1-medium" >INT</label>
                <button type="roll" class="attribute-button" name="roll_attribute" value="&{template:custom} ?{Secondary Attribute|STR, [[@{str}]] **STR**|RFL, [[@{RFL}]] **RFL**|INT, [[@{int}]] **INT**|WIL, [[@{wil}]] **WIL**|CHA, [[@{cha}]] **CHA**} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{int}]] + [[?{Secondary Attribute}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Pure Attribute Test}} {{subtitle= @{character_name}}} {{Base Attribute= [[@{int}]] **INT**}} {{Secondary Attributte= ?{Secondary Attribute} }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Roll= $[[8]] }} {{Opposing_Roll= $[[7]] }}"></button>
                <input type="number" class="field-attribute font1-medium" name="attr_int" title="@{int}" value="1" min="1" max="6">
            </div>

            <div class="container-attribute">
                <label class="label-attribute font1-medium" >WIL</label>
                <button type="roll" class="attribute-button" name="roll_attribute" value="&{template:custom} ?{Secondary Attribute|STR, [[@{str}]] **STR**|RFL, [[@{RFL}]] **RFL**|INT, [[@{int}]] **INT**|WIL, [[@{wil}]] **WIL**|CHA, [[@{cha}]] **CHA**} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{wil}]] + [[?{Secondary Attribute}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Pure Attribute Test}} {{subtitle= @{character_name}}} {{Base Attribute= [[@{wil}]] **WIL**}} {{Secondary Attributte= ?{Secondary Attribute} }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Roll= $[[8]] }} {{Opposing_Roll= $[[7]] }}"></button>
                <input type="number" class="field-attribute font1-medium" name="attr_wil" title="@{wil}" value="1" min="1" max="6">
            </div>

            <div class="container-attribute">
                <label class="label-attribute font1-medium" >CHA</label>
                <button type="roll" class="attribute-button" name="roll_attribute" value="&{template:custom} ?{Secondary Attribute|STR, [[@{str}]] **STR**|RFL, [[@{RFL}]] **RFL**|INT, [[@{int}]] **INT**|WIL, [[@{wil}]] **WIL**|CHA, [[@{cha}]] **CHA**} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{cha}]] + [[?{Secondary Attribute}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Pure Attribute Test}} {{subtitle= @{character_name}}} {{Base Attribute= [[@{cha}]] **CHA**}} {{Secondary Attributte= ?{Secondary Attribute} }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Roll= $[[8]] }} {{Opposing_Roll= $[[7]] }}"></button>
                <input type="number" class="field-attribute font1-medium" name="attr_cha" title="@{cha}" value="1" min="1" max="6">
            </div>

            <div class="container-attribute">
                <label class="label-edg font1-medium" >EDG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                <input type="number" class="field-attribute font1-medium" name="attr_edg" title="@{edg}" value="1" min="1" max="6">
            </div>
        </div>
	</div>

	<!--Skills-->
    <div class="container-skills">
		<label class="label-skills font1-medium">Skills</label>
		<!--Fixed Skills-->
        <div class="container-fixed-skills">
            <!--Labels Skills-->
            <label class="label-name-skill font2-small">Name</label>
            <label class="label-rating-skill font2-small">Rating</label>
            <label class="label-attribute-skill font2-small">+ Attribute</label>
            <label class="label-bonus-skill font2-small"> = Bonus</label>

            <!--Untrained Skill-->
            <label class="label-skill font2-medium">Untrained</label>
            <input type="number" class="field-skill-rating font2-medium" value="0" disabled="true">
            <select type="text" class="field-skill-attribute font2-medium" title="@{untrained-attribute}" name="attr_untrained-attribute">
                <option value="@{str}" selected="selected">STR</option>
                <option value="@{rfl}" >RFL</option>
                <option value="@{int}">INT</option>
                <option value="@{wil}">WIL</option>
                <option value="@{cha}">CHA</option>
            </select>
            <input type="number" class="field-skill-bonus font2-medium" title="@{untrained-bonus}" name="attr_untrained-bonus" value="@{untrained-attribute}" disabled="true">
            <button type="roll" class="skill-button" name="roll_untrained" value="&{template:custom} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{untrained-bonus}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Untrained Skill Test}} {{subtitle= @{character_name} }}  {{Attribute Bonus= [[@{untrained-bonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Roll= $[[4]] }} {{Opposing_Roll= $[[5]] }}"></button>

            <!--Gunnery skill-->
            <label class="label-skill font2-medium">Gunnery</label>
            <input type="number" class="field-skill-rating font2-medium" title="@{gunnery-rating}" name="attr_gunnery-rating" required maxlength="1" value="0" min="0" max="6">
            <select type="text" class="field-skill-attribute font2-medium" title="@{gunnery-attribute}" name="attr_gunnery-attribute">
                <option value="@{str}">STR</option>
                <option value="@{rfl}" selected="selected">RFL</option>
                <option value="@{int}">INT</option>
                <option value="@{wil}">WIL</option>
                <option value="@{cha}">CHA</option>
            </select>
            <input type="number" class="field-skill-bonus font2-medium" title="@{gunnery-bonus}" name="attr_gunnery-bonus" value="@{gunnery-rating} + @{gunnery-attribute}" disabled="true">
            <button type="roll" class="skill-button" name="roll_gunnery" value="&{template:custom} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{gunnery-bonus}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Gunnery Test}} {{subtitle= @{character_name} }}  {{Gunnery Bonus= [[@{gunnery-bonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Roll= $[[4]] }} {{Opposing_Roll= $[[5]] }}"></button>

            <!--Piloting skill-->
            <label class="label-skill font2-medium">Piloting</label>
            <input type="number" class="field-skill-rating font2-medium" title="@{piloting-rating}" name="attr_piloting-rating" required maxlength="1" value="0" min="0" max="6">
            <select type="text" class="field-skill-attribute font2-medium" title="@{piloting-attribute}" name="attr_piloting-attribute">
                <option value="@{str}">STR</option>
                <option value="@{rfl}" selected="selected">RFL</option>
                <option value="@{int}">INT</option>
                <option value="@{wil}">WIL</option>
                <option value="@{cha}">CHA</option>
            </select>
            <input type="number" class="field-skill-bonus font2-medium" title="@{piloting-bonus}" name="attr_piloting-bonus" value="@{piloting-rating} + @{piloting-attribute}" disabled="true">
            <button type="roll" class="skill-button" name="roll_piloting" value="&{template:custom} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Piloting Test}} {{subtitle= @{character_name} }}  {{Piloting Bonus= [[@{piloting-bonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Roll= $[[4]] }} {{Opposing_Roll= $[[5]] }}"></button>
        </div>
        <!--Repeating Skills-->
        <div class="container-repeating-skills">
            <fieldset class="repeating_skills">
                <input type="text" class="field-skill font2-medium" autocomplete="off" spellcheck="false" name="attr_skillname">
                <input type="number" class="field-skill-rating font2-medium" name="attr_skillrating" required maxlength="1" value="1" min="0" max="6">
                <select type="text" class="field-skill-attribute font2-medium" name="attr_skillattribute">
                    <option value="blank" selected="selected"> </option>
                    <option value="@{str}">STR</option>
                    <option value="@{rfl}">RFL</option>
                    <option value="@{int}">INT</option>
                    <option value="@{wil}">WIL</option>
                    <option value="@{cha}">CHA</option>
                </select>
                <input type="number" class="field-skill-bonus font2-medium" name="attr_skillbonus" value="@{skillrating}+@{skillattribute}" disabled="true">
                <button type="roll" class="skill-button" name="roll_repskill" value="&{template:custom} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{skillbonus}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= @{skillname} Test}} {{subtitle= @{character_name} }}  {{ @{skillname} Bonus= [[@{skillbonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Roll= $[[4]] }} {{Opposing_Roll= $[[5]] }}"></button>
            </fieldset>
        </div>
    </div>

    <!--Plot Points, Edge Points and Initiative-->
    <div class="container-plot-points">
        <div class="container-points">
            <label class="label-plot-points font2-medium">Plot points</label>
            <input type="number" class="field-plot-points font2-medium" name="attr_plot-points" title="@{plot-points}" value="3" min="0" max="5">
        </div>
        <div class="container-points">
            <label class="label-edge-points font2-medium">Edge points</label>
            <input type="number" class="field-edge-points font2-medium" name="attr_edge-points" title="@{edge-points}" value="1" min="0" max="6">
		</div>
		<div class="container-points">
            <label class="label-initiative-base font2-medium">Initiative</label>
            <input type="number" class="field-base-initiative font2-medium" name="attr_base-initiative" title="@{base-initiative}" value="1" min="0" max="10">
            <button type="roll" class="initiative-button" name="roll_initiative" value="&{template:custom} {{title= Initiative Roll}} {{subtitle= @{character_name}}} {{Base Initiative = [[@{base-initiative}]] }} {{Initiative Roll = [[2d6 + @{base-initiative} &{tracker} ]] }}"> </button>
        </div>
    </div>
    
    <!--Life Modules-->
    <div class="container-life-modules">
        <label class="label-life-modules font1-medium">Life Modules</label>
        
        <label class="label-life-faction font2-medium">Faction:</label>
        <input type="text" list="3025_life_factions" class="field-life-faction font2-small" spellcheck="false" title="@{life-faction}" name="attr_life-faction">
        <datalist id="3025_life_factions">
			<option value="Capellan Confederation (House Liao)">
			<option value="Draconis Combine (House Kurita)">
			<option value="Federated Suns (House Davion)">
			<option value="Free Worlds League (House Marik)">
			<option value="Lyran Commonwealth (House Steiner)">
			<option value="Magistracy of Canopus">
			<option value="Outworlds Alliance">
			<option value="Taurian Concordat">
			<option value="Pirate (Bandit Kingdom)">
			<option value="ComStar">
			<option value="Mercenary">
			<option value="Pirate (Independent)">
			<option value="Unaffiliated">
        </datalist>
        
        <label class="label-life-childhood font2-medium">Childhood:</label>
        <input type="text" list="3025_childhood" class="field-life-childhood font2-small" spellcheck="false" title="@{life-childhood}" name="attr_life-childhood">
        <datalist id="3025_childhood">
			<option value="Backwoods">+1 to Tracking OR Projectile Weapons</option>
			<option value="Blue Collar">+1 to Art, Technician, OR Zero-G Operations</option>
			<option value="Mercenary Brat">+1 to Small Arms</option>
			<option value="Farm">+1 to Animal Handling</option>
			<option value="Fugitives">+1 to Escape Artist OR Disguise</option>
			<option value="Nobility">+1 to Protocol</option>
			<option value="Slave">+1 to Athletics</option>
			<option value="Spacer Family">+1 to Zero-G Operations</option>
			<option value="Street">+1 to Streetwise</option>
			<option value="War Orphan">+1 to Survival</option>
			<option value="White Collar">+1 to Protocol</option>
        </datalist>

        <label class="label-life-education font2-medium">Higher<br>Education:</label>
		<input type="text" list="3025_life_education" class="field-life-education font2-small" spellcheck="false" title="@{life-education}" name="attr_life-education">
        <datalist id="3025_life_education">
            <option value="Technical College">+1 to Technician OR Communications</option>
            <option value="Trade School">+1 to Knowledge Skill</option>
            <option value="University">+1 to Science OR MedTech</option>
            <option value="Solaris VII Internship">+1 to Streetwise</option>
            <option value="Police Academy">+1 to Investigation OR Intimidation</option>
            <option value="Intelligence Operative Training">+1 Intimidation OR Tracking</option>
            <option value="Military Academy">+1 to Tactics OR Leadership</option>
            <option value="Military Enlistment">+1 to Support Weapons OR Artillery</option>
            <option value="Family Training">Requires the Nobility Life Module. +1 to Leadership</option>
            <option value="Officer Candidate School">+1 to Tactics OR Leadership</option>
        </datalist>
        
        <label class="label-life-real font2-medium">Real Life:</label>
        <input type="text" list="3025_field_life" class="field-life-real font2-small" spellcheck="false" title="@{life-real}" name="attr_life-real">
        <datalist id="3025_field_life" class="font2-small">
            <option value="Agitator">+1 to Melee Combat</option>
            <option value="Civilian Job">+1 to Art OR Knowledge Skill</option>
            <option value="Combat Correspondent">+1 to Perception</option>
            <option value="ComStar Service">+1 to Communications OR Computers</option>
            <option value="Covert Operations">+1 to Stealth OR Demolitions</option>
            <option value="Explorer">+1 to Navigation</option>
            <option value="Guerrilla Insurgent">+1 to Stealth OR Acting</option>
            <option value="Merchant">+1 to Negotiation</option>
            <option value="Ne’er-Do-Well">+1 to Acting</option>
            <option value="Organized Crime">+1 to Intimidation</option>
            <option value="Postgraduate Studies">+1 Science OR Technician</option>
            <option value="Solaris Insider">+1 to Negotiation</option>
            <option value="Solaris VII Games">+1 to Piloting (BattleMech) OR Gunnery (BattleMech)</option>
            <option value="Think Tank">+1 to Science OR Knowledge Skill</option>
            <option value="Tour of Duty">Requires: Military Enlistment, Military Academy, Family Training, or Officer Candidate School
                .+1 to one of the following: Artillery, Gunnery, Melee Combat, Piloting, Projectile Weapons, Small Arms, Support Weapons</option>
            <option value="To Serve and Protect">Requires Police Academy Life Module. +1 to Small Arms OR Intimidation</option>
            <option value="Travel">+1 to any Skill (excluding Artillery, Gunnery, Piloting, or Support Weapons)</option>
        </datalist>
    </div>

    <!--Traits-->
    <div class="container-traits">
        <label class="label-traits font1-medium">Traits</label>
        
        <label class="label-trait font2-medium">Positive Trait:</label>
        <textarea type="text" class="field-trait font2-small" autocomplete="off" spellcheck="false" title="@{positive-trait-1}" name="attr_positive-trait-1"></textarea>

        <label class="label-trait font2-medium">Positive Trait:</label>
        <textarea type="text" class="field-trait font2-small" autocomplete="off" spellcheck="false" title="@{positive-trait-2}" name="attr_positive-trait-2"></textarea>

        <label class="label-trait font2-medium">Negative Trait:</label>
        <textarea type="text" class="field-trait font2-small" autocomplete="off" spellcheck="false" title="@{negative-trait-1}" name="attr_negative-trait-1"></textarea>

        <label class="label-trait font2-medium">Negative Trait:</label>
        <textarea type="text" class="field-trait font2-small" autocomplete="off" spellcheck="false" title="@{negative-trait-2}" name="attr_negative-trait-2"></textarea>
    </div>
    
    <!--Inventory-->
    <div class="container-inventory">
        <label class="label-inventory font1-medium">Inventory</label>
        <fieldset class="repeating_inventory">
            <input type="text" class="field-inventory font2-medium" autocomplete="off" spellcheck="false" name="attr_fielditem">
        </fieldset>
    </div>

    <!--Personal Weaponry-->
    <div class="container-personal-weaponry">
        
        <!--Fixed Personal Weaponry-->
        <div class="container-fixed-personal-weaponry">

            <label class="label-personal-weaponry font1-medium"><br>Personal Weaponry</label>
            <label class="label-personal-weapon-range font2-small"><br>Range</label>
            <label class="label-personal-weapon-skill font2-small">&nbsp;&nbsp;&nbsp;Attack<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Skill<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+</label>
            <label class="label-personal-weapon-name font2-small">Name</label>
            <label class="label-personal-weapon-damage font2-small">Damage</label>
            <label class="label-personal-weapon-damage-type font2-small">F/P</label>
            <label class="label-personal-weapon-close font2-small">Close</label>
            <label class="label-personal-weapon-near font2-small">Near</label>
            <label class="label-personal-weapon-far font2-small">Far</label>
            <label class="label-personal-weapon-attribute font2-small">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Linked<br>&nbsp;&nbsp;&nbsp;Attribute</label>
            
            <!--Evasive Maneuvers-->
            <select type="text" class="field-weapon-name font2-medium disabled-select">
                <option value="Evasive Maneuvers" selected="selected" >Evasive Maneuvers</option>
            </select>
            <!--Weapon Damage-->
            <input type="number" class="field-personal-weapon-damage font2-medium" disabled="true">
            <!--Weapon Damage Type-->
            <select type="text" class="field-weapon-damage-type font2-medium" disabled="true">
                <option selected="selected"> </option>
            </select>
            <!--Weapon Range-->
            <!--Close Range-->
            <select type="text" class="field-weapon-close-range font2-medium" disabled="true">
                <option selected="selected"> </option>
            </select>
            <!--Near Range-->
            <select type="text" class="field-weapon-near-range font2-medium" disabled="true">
                <option selected="selected"> </option>
            </select>
            <!--Far Range-->
            <select type="text" class="field-weapon-far-range font2-medium" disabled="true">
                <option selected="selected"> </option>
            </select>
            <!--Weapon Attack Skill-->
            <input type="number" class="field-weapon-skill-bonus font2-medium" title="@{evasive-rating}" name="attr_evasive-rating" value= "@{rfl} + @{rfl}" disabled="true">
            <!--Attack Button-->
            <button type="roll" class="attack-button" name="roll_evasive" value="&{template:custom} ?{Modifiers|0}  [[ [[1d6]] + [[1d6]] + [[@{evasive-rating}]] + [[?{Modifiers}]] ]]   {{title= Evasive Maneuvers }} {{subtitle= @{character_name} }}  {{ Total Bonus= [[@{evasive-rating}]] **RFL+RFL** }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Evasive_roll= $[[4]]}} "></button>
            <!--Weapon Notes-->
            <textarea type="text" class="field-weapon-note font2-small" autocomplete="off" spellcheck="false" title="@{evasive-note}" name="attr_evasive-note">Evasive Maneuvers rating is RFL + RFL</textarea>

            <!--Unarmed Combat-->
            <!--Weapon Name-->
            <select type="text" class="field-weapon-name font2-medium" title="@{unarmed-name}" name="attr_unarmed-name">
                <option value="Unarmed Combat" selected="selected" >Unarmed Combat</option>
                <option value="Martial Arts">Martial arts</option>
            </select>
            <!--Weapon Damage-->
            <!--Strengh bonus formula for google is =ROUNDUP( MAX(G18-2;0)/2;0)-->
            <input type="number" class="field-personal-weapon-damage font2-medium"  title="@{unarmed-damage}" name="attr_unarmed-damage" value="2+ceil((((@{str}-2)+abs(@{str}-2))/2)/2)" disabled="true">
            <!--Weapon Damage Type-->
            <select type="text" class="field-weapon-damage-type font2-medium" title="@{unarmed-damage-type}" name="attr_unarmed-damage-type">
                <option value="Fatigue" selected="selected">F</option>
                <option value="Physical">P</option>
            </select>
            <!--Weapon Range-->
            <!--Close Range-->
            <select type="text" class="field-weapon-close-range font2-medium" disabled="true">
                <option value="0" selected="selected">OK</option>
            </select>
            <!--Near Range-->
            <select type="text" class="field-weapon-near-range font2-medium" disabled="true">
                <option value="-100" selected="selected">-</option>
            </select>
            <!--Far Range-->
            <select type="text" class="field-weapon-far-range font2-medium" disabled="true">
                <option value="-100" selected="selected">-</option>
            </select>
            <!--Weapon Attack Skill-->
            <input type="number" class="field-weapon-skill-bonus font2-medium" title="@{unarmed-rating}" name="attr_unarmed-rating" required maxlength="1" value="0" min="0" max="12">
            <!--Attack Button-->
            <button type="roll" class="attack-button" name="roll_unarmed" value="&{template:personal-weapon} ?{Modifiers|0}  [[ [[1d6]] + [[1d6]] + [[@{unarmed-rating}]] + [[?{Modifiers}]] ]]   {{title= @{unarmed-name} Attack}} {{subtitle= @{character_name} }}  {{ @{unarmed-name} Bonus= [[@{unarmed-rating}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Weapon_Range= [[0]] **Close Range** }} {{Attack_Roll= $[[4]]}} {{Personal_Weapon_Damage=[[@{unarmed-damage}]] **@{unarmed-damage-type}** }}"></button>
            <!--Weapon Notes-->
            <textarea type="text" class="field-weapon-note font2-small" autocomplete="off" spellcheck="false" title="@{unarmed-note}" name="attr_unarmed-note">Does not count against weapon total.</textarea>
        </div>

        <!--Repeating Personal Weaponry-->
        <div class="container-repeating-personal-weaponry">
            <fieldset class="repeating_personal-weapons">
                <!--Weapon Name-->
                <input type="text" class="field-weapon-name font2-medium" autocomplete="off" spellcheck="false" name="attr_weaponname">
                <!--Weapon Damage-->
                <input type="number" class="field-personal-weapon-damage font2-medium" name="attr_weapondamage" value="0" min="0">
                <!--Weapon Damage Type-->
                <select type="text" class="field-weapon-damage-type font2-medium" name="attr_weapondamagetype">
                    <option value="Fatigue" selected="selected">F</option>
                    <option value="Physical">P</option>
                </select>
                <!--Weapon Range-->
                <!--Close Range-->
                <select type="text" class="field-weapon-close-range font2-medium" name="attr_weaponcloserange">
                    <option value="0">OK</option>
                    <option value="-2">-2</option>
                    <option value="-100" selected="selected">-</option>
                </select>
                <!--Near Range-->
                <select type="text" class="field-weapon-near-range font2-medium" name="attr_weaponnearrange">
                    <option value="0">OK</option>
                    <option value="-2">-2</option>
                    <option value="-100" selected="selected">-</option>
                </select>
                <!--Far Range-->
                <select type="text" class="field-weapon-far-range font2-medium" name="attr_weaponfarrange">
                    <option value="0">OK</option>
                    <option value="-2">-2</option>
                    <option value="-100" selected="selected">-</option>
                </select>
                <!--Weapon Attack Skill-->
                <input type="number" class="field-weapon-skill-bonus font2-medium" name="attr_weaponrating" required maxlength="1" value="0" min="0" max="12">
                <!--Attack Button-->
                <button type="roll" class="attack-button" name="roll_weapon" value="&{template:personal-weapon} ?{Modifiers|0} ?{Range Modifier|Close Range, [[@{weaponcloserange}]] **Close Range**|Near Range, [[@{weaponnearrange}]] **Near Range**|Far Range, [[@{weaponfarrange}]] **Far Range** } [[ [[1d6]] + [[1d6]] + [[@{weaponrating}]] + [[?{Modifiers}]] +[[?{Range Modifier}]] ]]   {{title= @{weaponname} Attack}} {{subtitle= @{character_name} }}  {{ @{weaponname} Bonus= [[@{weaponrating}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Weapon_Range= ?{Range Modifier} }} {{Attack_Roll= $[[11]]}} {{Personal_Weapon_Damage=[[@{weapondamage}]] **@{weapondamagetype}** }}"></button>
                <!--Weapon Notes-->
                <textarea type="text" class="field-weapon-note font2-small" autocomplete="off" spellcheck="false" name="attr_weaponnote"></textarea>
            </fieldset>
        </div>
    </div>

    <!--Personal Armor-->
    <div class="container-personal-armor">
        <label class="label-personal-armor font1-medium">Personal Armor</label>
        <label class="label-personal-armor-name font2-medium">Type:</label>
        <input type="text" class="field-personal-armor-name font2-medium" autocomplete="off" spellcheck="false" title="@{armor-name}" name="attr_armor-name">
        <textarea type="text" class="field-personal-armor-note font2-small" autocomplete="off" spellcheck="false" title="@{armor-note}" name="attr_armor-note"></textarea>
        <label class="label-personal-armor-max font2-medium">Max Armor:</label>
        <input type="number" class="field-personal-armor-max font2-medium" title="@{personal-armor-max}" name="attr_personal-armor-max" min="0">
        <label class="label-personal-armor-current font2-medium">Marked pips:</label>
        <input type="number" class="field-personal-armor-current font2-medium" title="@{personal-armor}" name="attr_personal-armor" value="0" min="0">
    </div>

    <!--Fatigue Condition Monitoring-->
    <div class="container-fatigue-condition container-status-condition">
        <label class="label-status-condition font1-medium">Fatigue Condition Monitoring</label>

        <!--Maximum Marked Pips Hidden-->
        <input type="number" class="field-status-pips-max hidden" title="@{fatigue-pips-max}" name="attr_wil-pips-max"  min=10>

        <!--Marked Pips-->
        <label class="label-status-marked-pips font2-medium">Marked pips:</label>
        <input type="number" class="field-status-pips font2-medium" title="@{fatigue-pips}" name="attr_wil-pips" min=0>

        <!--Status Monitoring 10 pips-->
        <input type="checkbox" name="attr_wil-pips-max" class="hidden tab" value="10">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_wil-pips">
            <option value="0"> </option>
            <option value="1">–1</option>
            <option value="2">–2</option>
            <option value="3">–2</option>
            <option value="4">–2</option>
            <option value="5">–3</option>
            <option value="6">–3</option>
            <option value="7">–3</option>
            <option value="8">–4</option>
            <option value="9">Staggered</option>
            <option value="10">Knocked Out</option>
            <option value="11">Knocked Out</option>
            <option value="12">Knocked Out</option>
            <option value="13">Knocked Out</option>
            <option value="14">Knocked Out</option>
        </select>

        <!--Status Monitoring 11 pips-->
        <input type="checkbox" name="attr_wil-pips-max" class="hidden tab" value="11">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_wil-pips">
            <option value="0"> </option>
            <option value="1">–1</option>
            <option value="2">–1</option>
            <option value="3">–2</option>
            <option value="4">–2</option>
            <option value="5">–2</option>
            <option value="6">–3</option>
            <option value="7">–3</option>
            <option value="8">–3</option>
            <option value="9">–4</option>
            <option value="10">Staggered</option>
            <option value="11">Knocked Out</option>
            <option value="12">Knocked Out</option>
            <option value="13">Knocked Out</option>
            <option value="14">Knocked Out</option>
        </select>

        <!--Status Monitoring 12 pips-->
        <input type="checkbox" name="attr_wil-pips-max" class="hidden tab" value="12">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_wil-pips">
            <option value="0"> </option>
            <option value="1"> </option>
            <option value="2">–1</option>
            <option value="3">–1</option>
            <option value="4">–2</option>
            <option value="5">–2</option>
            <option value="6">–2</option>
            <option value="7">–3</option>
            <option value="8">–3</option>
            <option value="9">–3</option>
            <option value="10">–4</option>
            <option value="11">Staggered</option>
            <option value="12">Knocked Out</option>
            <option value="13">Knocked Out</option>
            <option value="14">Knocked Out</option>
        </select>

        <!--Status Monitoring 13 pips-->
        <input type="checkbox" name="attr_wil-pips-max" class="hidden tab" value="13">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_wil-pips">
            <option value="0"> </option>
            <option value="1"> </option>
            <option value="2">–1</option>
            <option value="3">–1</option>
            <option value="4">–1</option>
            <option value="5">–2</option>
            <option value="6">–2</option>
            <option value="7">–2</option>
            <option value="8">–3</option>
            <option value="9">–3</option>
            <option value="10">–3</option>
            <option value="11">–4</option>
            <option value="12">Staggered</option>
            <option value="13">Knocked Out</option>
            <option value="14">Knocked Out</option>
        </select>

        <!--Status Monitoring 14 pips-->
        <input type="checkbox" name="attr_wil-pips-max" class="hidden tab" value="14">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_wil-pips">
            <option value="0"> </option>
            <option value="1"> </option>
            <option value="2"> </option>
            <option value="3">–1</option>
            <option value="4">–1</option>
            <option value="5">–1</option>
            <option value="6">–2</option>
            <option value="7">–2</option>
            <option value="8">–2</option>
            <option value="9">–3</option>
            <option value="10">–3</option>
            <option value="11">–3</option>
            <option value="12">–4</option>
            <option value="13">Staggered</option>
            <option value="14">Knocked Out</option>
        </select>

    </div>

    <!--Physical Condition Monitoring-->
    <div class="container-physical-condition container-status-condition">
        <label class="label-status-condition font1-medium">Physical Condition Monitoring</label>

        <!--Maximum Marked Pips Hidden-->
        <input type="number" class="field-status-pips-max hidden" title="@{physical-pips-max}" name="attr_str-pips-max"  min=10>

        <!--Marked Pips-->
        <label class="label-status-marked-pips font2-medium">Marked pips:</label>
        <input type="number" class="field-status-pips font2-medium" title="@{physical-pips}" name="attr_str-pips" min=0>

        <!--Status Monitoring 10 pips-->
        <input type="checkbox" name="attr_str-pips-max" class="hidden tab" value="10">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_str-pips">
            <option value="0"> </option>
            <option value="1">–1 (CON Check: 3)</option>
            <option value="2">–2 (CON Check: 5)</option>
            <option value="3">–2 (CON Check: 5)</option>
            <option value="4">–2 (CON Check: 5)</option>
            <option value="5">–3 (CON Check: 7)</option>
            <option value="6">–3 (CON Check: 7)</option>
            <option value="7">–3 (CON Check: 7)</option>
            <option value="8">–4 (CON Check: 10)</option>
            <option value="9">Staggered (CON Check: 11)</option>
            <option value="10">KIA (CON Check: DEAD)</option>
            <option value="11">KIA (CON Check: DEAD)</option>
            <option value="12">KIA (CON Check: DEAD)</option>
            <option value="13">KIA (CON Check: DEAD)</option>
            <option value="14">KIA (CON Check: DEAD)</option>
        </select>

        <!--Status Monitoring 11 pips-->
        <input type="checkbox" name="attr_str-pips-max" class="hidden tab" value="11">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_str-pips">
            <option value="0"> </option>
            <option value="1">–1 (CON Check: 3)</option>
            <option value="2">–1 (CON Check: 3)</option>
            <option value="3">–2 (CON Check: 5)</option>
            <option value="4">–2 (CON Check: 5)</option>
            <option value="5">–2 (CON Check: 5)</option>
            <option value="6">–3 (CON Check: 7)</option>
            <option value="7">–3 (CON Check: 7)</option>
            <option value="8">–3 (CON Check: 7)</option>
            <option value="9">–4 (CON Check: 10)</option>
            <option value="10">Staggered (CON Check: 11)</option>
            <option value="11">KIA (CON Check: DEAD)</option>
            <option value="12">KIA (CON Check: DEAD)</option>
            <option value="13">KIA (CON Check: DEAD)</option>
            <option value="14">KIA (CON Check: DEAD)</option>
        </select>

        <!--Status Monitoring 12 pips-->
        <input type="checkbox" name="attr_str-pips-max" class="hidden tab" value="12">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_str-pips">
            <option value="0"> </option>
            <option value="1"> </option>
            <option value="2">–1 (CON Check: 3)</option>
            <option value="3">–1 (CON Check: 3)</option>
            <option value="4">–2 (CON Check: 5)</option>
            <option value="5">–2 (CON Check: 5)</option>
            <option value="6">–2 (CON Check: 5)</option>
            <option value="7">–3 (CON Check: 7)</option>
            <option value="8">–3 (CON Check: 7)</option>
            <option value="9">–3 (CON Check: 7)</option>
            <option value="10">–4 (CON Check: 10)</option>
            <option value="11">Staggered (CON Check: 11)</option>
            <option value="12">KIA (CON Check: DEAD)</option>
            <option value="13">KIA (CON Check: DEAD)</option>
            <option value="14">KIA (CON Check: DEAD)</option>
        </select>

        <!--Status Monitoring 13 pips-->
        <input type="checkbox" name="attr_str-pips-max" class="hidden tab" value="13">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_str-pips">
            <option value="0"> </option>
            <option value="1"> </option>
            <option value="2">–1 (CON Check: 3)</option>
            <option value="3">–1 (CON Check: 3)</option>
            <option value="4">–1 (CON Check: 3)</option>
            <option value="5">–2 (CON Check: 5)</option>
            <option value="6">–2 (CON Check: 5)</option>
            <option value="7">–2 (CON Check: 5)</option>
            <option value="8">–3 (CON Check: 7)</option>
            <option value="9">–3 (CON Check: 7)</option>
            <option value="10">–3 (CON Check: 7)</option>
            <option value="11">–4 (CON Check: 10)</option>
            <option value="12">Staggered (CON Check: 11)</option>
            <option value="13">KIA (CON Check: DEAD)</option>
            <option value="14">KIA (CON Check: DEAD)</option>
        </select>

        <!--Status Monitoring 14 pips-->
        <input type="checkbox" name="attr_str-pips-max" class="hidden tab" value="14">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_str-pips">
            <option value="0"> </option>
            <option value="1"> </option>
            <option value="2"> </option>
            <option value="3">–1 (CON Check: 3)</option>
            <option value="4">–1 (CON Check: 3)</option>
            <option value="5">–1 (CON Check: 3)</option>
            <option value="6">–2 (CON Check: 5)</option>
            <option value="7">–2 (CON Check: 5)</option>
            <option value="8">–2 (CON Check: 5)</option>
            <option value="9">–3 (CON Check: 7)</option>
            <option value="10">–3 (CON Check: 7)</option>
            <option value="11">–3 (CON Check: 7)</option>
            <option value="12">–4 (CON Check: 10)</option>
            <option value="13">Staggered (CON Check: 11)</option>
            <option value="14">KIA (CON Check: DEAD)</option>
        </select>

    </div>

</div>

<!--Battlemech & Combat Vehicle Tab-->
<input type="checkbox" name="attr_tab" class="hidden tab" value="battlemech" >
<div class="page-mech panel">
    
    <!--Attributes & Skills-->
	<div class="container-vehicle-skills">
        <label class="label-vehicle-skills font1-medium">Mech & Vehicle Skills</label>
        <!--Labels Skills-->
        <label class="label-name-skill font2-small">Name</label>
        <label class="label-vehicle-type-skill font2-small">Type</label>
        <label class="label-bonus-skill font2-small">Bonus</label>
        
        <!--Gunnery skill--> 
        <label class="label-skill font2-medium">Gunnery</label>
        <select class="field-vehicle-type-skill font2-medium" name="attr_vehicle-type-skill">
            <option>Battlemech</option>
            <option>Combat Vehicle</option>
            <option>Aerospace Fighter</option>
        </select>
        <input type="number" class="field-skill-bonus font2-medium" title="@{gunnery-bonus}" name="attr_gunnery-bonus" value="@{gunnery-rating} + @{gunnery-attribute}" disabled="true">
        <button type="roll" class="skill-button" name="roll_gunnery" value="&{template:custom} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{gunnery-bonus}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Gunnery Test}} {{subtitle= @{character_name} }}  {{Gunnery Bonus= [[@{gunnery-bonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Roll= $[[4]] }} {{Opposing_Roll= $[[5]] }}"></button>
        <!--Piloting skill-->
        <label class="label-skill font2-medium">Piloting</label>
        <select class="field-vehicle-type-skill font2-medium" name="attr_vehicle-type-skill">
            <option>Battlemech</option>
            <option>Combat Vehicle</option>
            <option>Aerospace Fighter</option>
        </select>
        <input type="number" class="field-skill-bonus font2-medium" title="@{piloting-bonus}" name="attr_piloting-bonus" value="@{piloting-rating}+@{piloting-attribute}" disabled="true">
        <button type="roll" class="skill-button" name="roll_piloting" value="&{template:custom} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Piloting Test}} {{subtitle= @{character_name} }}  {{Piloting Bonus= [[@{piloting-bonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Roll= $[[4]] }} {{Opposing_Roll= $[[5]] }}"></button>
    </div>

    <!--Plot Points, Edge Points and Initiative-->
    <div class="container-plot-points">
        <div class="container-points">
            <label class="label-plot-points font2-medium">Plot points</label>
            <input type="number" class="field-plot-points font2-medium" name="attr_plot-points" title="@{plot-points}" value="3" min="0" max="5">
        </div>
        <div class="container-points">
            <label class="label-edge-points font2-medium">Edge points</label>
            <input type="number" class="field-edge-points font2-medium" name="attr_edge-points" title="@{edge-points}" value="1" min="0" max="6">
		</div>
		<div class="container-points">
            <label class="label-initiative-base font2-medium">Initiative</label>
            <input type="number" class="field-base-initiative font2-medium" name="attr_base-initiative" title="@{base-initiative}" value="1" min="0" max="10">
            <button type="roll" class="initiative-button" name="roll_initiative" value="&{template:custom} {{title= Initiative Roll}} {{subtitle= @{character_name}}} {{Base Initiative = [[@{base-initiative}]] }} {{Initiative Roll = [[2d6 + @{base-initiative} &{tracker} ]] }}"> </button>
        </div>
    </div>
    
    <!--Mech & Vehicles-->
    <div class= "container-hardware">
        <select class="field-hardware-type font1-medium" name="attr_hardware-type">
            <option value="mech" selected>Battlemech</option>
            <option value="combat-vehicle">Combat Vehicle</option>
            <option value="aerospace-fighter">Aerospace Fighter</option>
            <option value="personal-vehicle">Personal Vehicle</option>
        </select>

        <!--Mech-->
        <input type="checkbox" name="attr_hardware-type" class="hidden tab" value="mech" checked>
        <div class="container-selected-hardware">
            
            <!--Mech Diagram-->
            <div class="selected-hardware-diagram">
                <img src="https://raw.githubusercontent.com/nicolas-sancho/repositorio_MWD/main/Battlemech.png" alt="'Mech" width="270px" height="400px">
                <!--Mech Head-->
                <div class="mech-head container-hardware-part">
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-head-armor font2-small armor transparent" title="@{head-armor}" 
                        name="attr_head-armor" min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-head-structure font1-small structure transparent" title="@{head-structure}" name="attr_head-structure" min="0">
                    </div>
                </div>
                <button type="roll" class="critical-location-button crit-mech-head" name="roll_crit_location" value="&{template:critical-hit} {{title= 'Mech Head Critical Hit}} {{subtitle= @{character_name}'s @{mech-type}}} {{Hardware_select= [[1]]}} {{Mech_crit= [[1]]}}"></button>

                <!--Mech Torso-->
                <div class="mech-torso container-hardware-part">
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-torso-armor font2-small armor transparent" title="@{torso-armor}" name="attr_torso-armor" min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-torso-structure font2-small structure transparent" title="@{torso-structure}" name="attr_torso-structure" min="0">
                    </div>
                </div>
                <button type="roll" class="critical-location-button crit-mech-torso" name="roll_crit_location" value="&{template:critical-hit} {{title= 'Mech Torso Critical Hit}} {{subtitle= @{character_name}'s @{mech-type}}} {{Hardware_select= [[1]]}} {{Mech_crit= [[2]]}} {{Torso_crit= [[1d6]]}}"></button>

                <!--Mech Left Arm-->
                <div class="mech-left-arm container-hardware-part">
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-left-arm-armor font2-small armor transparent" title="@{left-arm-armor}" name="attr_left-arm-armor" min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-left-arm-structure font2-small structure transparent" title="@{left-arm-structure}" name="attr_left-arm-structure" min="0">
                    </div>
                </div>
                <button type="roll" class="critical-location-button crit-mech-left-arm" name="roll_crit_location" value="&{template:critical-hit} {{title= 'Mech Arm Critical Hit}} {{subtitle= @{character_name}'s @{mech-type}}} {{Hardware_select= [[1]]}} {{Mech_crit= [[3]]}} {{Arm_crit= [[1d6]] }}"></button>

                <!--Mech Right Arm-->
                <div class="mech-right-arm container-hardware-part">
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-right-arm-armor font2-small armor transparent" title="@{right-arm-armor}" name="attr_right-arm-armor" min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-right-arm-structure font2-small structure transparent" title="@{right-arm-structure}" name="attr_right-arm-structure" min="0">
                    </div>
                </div>
                <button type="roll" class="critical-location-button crit-mech-right-arm" name="roll_crit_location" value="&{template:critical-hit} {{title= 'Mech Arm Critical Hit}} {{subtitle= @{character_name}'s @{mech-type}}} {{Hardware_select= [[1]]}} {{Mech_crit= [[3]]}} {{Arm_crit= [[1d6]] }}"></button>

                <!--Mech Left Leg-->
                <div class="mech-left-leg container-hardware-part">
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-left-leg-armor font2-small armor transparent" title="@{left-leg-armor}" name="attr_left-leg-armor" min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-left-leg-structure font2-small structure transparent" title="@{left-leg-structure}" name="attr_left-leg-structure" min="0">
                    </div>
                </div>
                <button type="roll" class="critical-location-button crit-mech-left-leg" name="roll_crit_location" value="&{template:critical-hit} {{title= 'Mech Leg Critical Hit}} {{subtitle= @{character_name}'s @{mech-type}}} {{Hardware_select= [[1]]}} {{Mech_crit= [[4]]}} {{Leg_crit= [[1d6]] }}"></button>

                <!--Mech Right Leg-->
                <div class="mech-right-leg container-hardware-part">
                    <div class= "hardware-part">
                    <label class="label-armor font1-smallest">Armor</label>
                    <input type="number" class="field-right-leg-armor font2-small armor transparent" title="@{right-leg-armor}" name="attr_right-leg-armor" min="0">
                </div>
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-right-leg-structure font2-small structure transparent" title="@{right-leg-structure}" name="attr_right-leg-structure" min="0">
                    </div>
                </div>
                <button type="roll" class="critical-location-button crit-mech-right-leg" name="roll_crit_location" value="&{template:critical-hit} {{title= 'Mech Leg Critical Hit}} {{subtitle= @{character_name}'s @{mech-type}}} {{Hardware_select= [[1]]}} {{Mech_crit= [[4]]}} {{Leg_crit= [[1d6]] }}"></button> 
            </div>

            <!--Mech Specifications-->
            <div class="selected-hardware-specs">
                <label class="label-hardware font1-medium">Hardware</label>
                <!--Mech Type-->
                <label class="label-hardware-type font2-medium">Type:</label>
                <input type="text" class="field-hardware-name font2-medium" autocomplete="off" spellcheck="false" title="@{mech-type}"name="attr_mech-type">
                <!--Mech Weight-->
                <label class="label-hardware-weight font2-medium">Weight:</label>
                <select type="text" class="field-hardware-weight font2-medium" title="@{mech-weight}" name="attr_mech-weight">
                    <option value="" selected="selected"></option>
                    <option value="Light">Light</option>
                    <option value="Medium">Medium</option>
                    <option value="Heavy">Heavy</option>
                    <option value="Assault">Assault</option>
                </select>
                <!--Mech Tonnage-->
                <label class="label-hardware-tonnage font2-medium">Tonnage:</label>
                <input type="number" class="field-hardware-tonnage font2-medium" title="@{mech-tonnage}"name="attr_mech-tonnage" value="0" min="0" max="120">
                <!--Mech Hardware point cost-->
                <input type="number" class="field-hardware-points font2-medium" title="@{mech-hardware-points}" name="attr_mech-hardware-points" value="0" min="0" max="6">
                <label class="label-hardware-points font2-medium">Hardware Points</label>
                <!--Mech Movement-->
                <label class="label-hardware-movement font2-medium">Movement:</label>
                <input type="number" class="field-hardware-movement font2-medium" title="@{mech-movement-max}" name="attr_mech-movement-max" value="0" min="0" max="6">
                <select type="text" class="field-hardware-jumpjets font2-medium" title="@{mech-jumpjets}" name="attr_mech-jumpjets">
                    <option value="0" selected="selected">-</option>
                    <option value="1">J</option>
                </select>
                <!--Mech Heat Dissipation-->
                <label class="label-hardware-heat-dissipation font2-medium">Heat Dissipation:</label>
                <input type="number" class="field-hardware-heat-dissipation font2-medium" title="@{mech-heat-dissipation}" name="attr_mech-heat-dissipation" value="0" min="0" max="12">
                <!--Mech Melee Combat-->
                <label class="label-hardware-melee-combat font2-medium">Melee Combat:</label>
                <select type="text" class="field-melee-combat font2-medium" title="@{mech-melee-combat}" name="attr_mech-melee-combat">
                    <option value="0" >No/Minimal Arms</option>
                    <option value="1" selected="selected">Normal</option>
                    <option value="2" >Hatchet</option>
                </select>

            </div>

            <!--Mech Tags-->
            <div class="selected-hardware-tags">
                <label class="label-hardware-tags font1-medium">Tags</label>
                <div class="hardware-flex-tags">
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{mech-tag1}" name="attr_mech-tag1">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font-font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{mech-tag2}" name="attr_mech-tag2">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{mech-tag3}" name="attr_mech-tag3">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{mech-tag4}" name="attr_mech-tag4">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{mech-tag5}" name="attr_mech-tag5">
                    </div>
                </div>
            </div>

            <!--Mech Armor and Structure Points-->
            <div class="selected-hardware-armor-structure">
                <label class="label-hardware-armor-structure font1-medium">Armor / Structure Configuration</label>
                <!--Head Armor/Structure-->
                <label class="label-hardware-as-first font2-medium">Head:</label>
                <input type="number" class="field-hardware-first-armor-max font2-medium"  title="@{head-armor-max}" name="attr_head-armor-max" value="0" min="0" max="4">
                <label class="label-as-slash font2-medium">/</label>
                <input type="number" class="field-hardware-first-structure-max font2-medium"  title="@{head-structure-max}" name="attr_head-structure-max" value="0" min="0" max="2">
                <!--Torso Armor/Structure-->
                <label class="label-hardware-as-second font2-medium">Torso:</label>
                <input type="number" class="field-hardware-second-armor-max font2-medium"  title="@{torso-armor-max}" name="attr_torso-armor-max" value="0" min="0" max="18">
                <label class="label-as-slash font2-medium">/</label>
                <input type="number" class="field-hardware-second-structure-max font2-medium"  title="@{torso-structure-max}" name="attr_torso-structure-max" value="0" min="0" max="12">
                <!--Arms Armor/Structure-->
                <label class="label-hardware-as-third font2-medium">Right/Left Arm:</label>
                <input type="number" class="field-hardware-third-armor-max font2-medium"  title="@{arm-armor-max}" name="attr_arm-armor-max" value="0" min="0" max="13">
                <label class="label-as-slash font2-medium">/</label>
                <input type="number" class="field-hardware-third-structure-max font2-medium"  title="@{arm-structure-max}" name="attr_arm-structure-max" value="0" min="0" max="8">         
                <!--Legs Armor/Structure-->
                <label class="label-hardware-as-fourth font2-medium">Right/Left Leg:</label>
                <input type="number" class="field-hardware-fourth-armor-max font2-medium"  title="@{leg-armor-max}" name="attr_leg-armor-max" value="0" min="0" max="16">
                <label class="label-as-slash font2-medium">/</label>
                <input type="number" class="field-hardware-fourth-structure-max font2-medium"  title="@{leg-structure-max}" name="attr_leg-structure-max" value="0" min="0" max="8">  
            </div>
            
            <!--Mech Equipment-->
            <div class="selected-hardware-equipment">
                <label class="label-equipment font1-medium">Equipment</label>
                <fieldset class="repeating_mech-equipment">
                    <input type="text" class="field-hardware-equipment font2-medium" autocomplete="off" spellcheck="false" name="attr_mechequipment">
                </fieldset>
            </div>

            <!--Mech Condition-->
            <div class="selected-hardware-condition">
                <label class="label-hardware-condition font1-medium">Conditions</label>
                <div class="hardware-condition-grid">
                    <!--Heat Condition-->
                    <label class="label-hardware-heat font2-medium">Heat:</label>
                    <input type="number" class="field-hardware-heat font2-medium" title="@{mech-heat}" name="attr_mech-heat" value="0" min="0">
                    <select type="text" class="field-hardware-heat-cond font2-medium disabled-select" tabindex="-1" name="attr_mech-heat">
                        <option value="0" selected="selected">Blue: No effects</option>
                        <option value="1" >Green: –1 Max Movement</option>
                        <option value="2" >Yellow: –1 Ranged Attack Modifier</option>
                        <option value="3">Orange: Shutdown (avoid on 8+)</option>
                        <option value="4">Red: Ammo explosion (avoid on 8+)</option>
                        <option value="5">Critical: Automatic Shutdown</option>
                        <option value="6">Critical: Automatic Shutdown</option>
                        <option value="7">Critical: Automatic Shutdown</option>
                        <option value="8">Critical: Automatic Shutdown</option>
                        <option value="9">Critical: Automatic Shutdown</option>
                        <option value="10">Critical: Automatic Shutdown</option>
                        <option value="11">Critical: Automatic Shutdown</option>
                        <option value="12">Critical: Automatic Shutdown</option>
                        <option value="13">Critical: Automatic Shutdown</option>
                        <option value="14">Critical: Automatic Shutdown</option>
                        <option value="15">Critical: Automatic Shutdown</option>
                        <option value="16">Critical: Automatic Shutdown</option>
                        <option value="17">Critical: Automatic Shutdown</option>
                        <option value="18">Critical: Automatic Shutdown</option>
                        <option value="19">Critical: Automatic Shutdown</option>
                        <option value="20">Critical: Automatic Shutdown</option>
                    </select>
                    <!--Heat Button-->
                    <button type="roll" class="heat-dissipation-button" name="roll_heatdissipation" value="&{template:hardware-weapon} {{title= Cool Down}} {{subtitle= @{character_name}'s @{mech-type}}} !modbattr --silent --name @{character_name} --mech-heat|-{{Heat Dissipation= [[@{mech-heat-dissipation}]]}}!!! {{Actual_Heat= [[{@{mech-heat} - @{mech-heat-dissipation},0}kh1]]}}"></button>
                    <!--Actual Movement-->
                    <label class="label-hardware-movement-actual font2-medium"> Current Movement:</label>
                    <input type="number" class="field-hardware-movement-actual font2-medium" title="@{mech-movement}" name="attr_mech-movement" min="0">
                    <!--Jump Jets-->
                    <input type="checkbox" name="attr_mech-jumpjets" class="hidden tab" value="0" checked>
                    <button type="roll" class="jumpjet-button" name="roll_jumpjet" value="&{template:hardware-weapon} {{title= Jump}} {{subtitle= @{character_name}'s @{mech-type}}} !modbattr --silent --name @{character_name} --mech-heat|+{{Heat= [[1]]}}!!! {{Jumpjet= **+1 to your attack roll against the target.**
                        **–1 to your attack roll to other targets.**
                        **–1 to attack rolls against your 'Mech.**}}"></button>

                </div>
            </div>

            <!--Mech Weapons-->
            <div class="selected-hardware-weapons">
                <!--Mech Labels-->
                <div class="hardware-weapons-labels">
                    <label class="label-hardware-weapons font1-medium"><br><br>Weapons</label>
                    <label class="label-type font2-small">Type</label>
                    <label class="label-base-damage font2-small">Base<br>Damage</label>
                    <label class="label-missile-damage font2-small"><br>Missile<br>Damage</label>
                    <label class="label-missile-m font2-small">M</label>
                    <label class="label-missile-max font2-small">Max</label>
                    <label class="label-heat font2-small">Heat</label>
                    <label class="label-location font2-small">Location</label>
                    <label class="label-range font2-small"><br>Range</label>
                    <label class="label-range-pointblank font2-small">Point-<br>blank</label>
                    <label class="label-range-short font2-small">Short</label>
                    <label class="label-range-medium font2-small">Medium</label>
                    <label class="label-range-long font2-small">Long</label>
                </div>

                <!--Evasive Maneuver Container-->
                <div class="container-evasive-maneuvers">
                    <!--Evasive Maneuvers-->
                    <!--Evasive Maneuvers label-->
                    <label class="label-hardware-physical-attack font2-medium">Evasive Maneuvers</label>
                    <!--Evasive Maneuvers type-->
                    <select class="field-hardware-weapon-type font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Evasive Maneuvers Base Damage-->
                    <input type="number" class="field-hardware-weapon-damage font2-medium" disabled="true">
                    <!--Evasive Maneuvers Missile Damage-->
                    <input type="number" class="field-hardware-weapon-missile-damage font2-medium" min="0" disabled="true">
                    <!--Evasive Maneuvers Missile Max-->
                    <input type="number" class="field-hardware-weapon-missile-max font2-medium" min="0" disabled="true">
                    <!--Evasive Maneuvers Heat-->
                    <input type="number" class="field-hardware-weapon-heat font2-medium" min="0" disabled="true">
                    <!--Evasive Maneuvers Location-->
                    <select class="field-hardware-weapon-location font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Evasive Maneuvers Range-->
                    <!--Evasive Maneuvers at Pointblank-->
                    <select class="field-hardware-weapon-range-pb font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers at Short-->
                    <select class="field-hardware-weapon-range-s font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers at Medium-->
                    <select class="field-hardware-weapon-range-m font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers at Long-->
                    <select class="field-hardware-weapon-range-l font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers Button-->
                    <button type="roll" class="weapon-button" name="roll_mechweapon" value="&{template:custom} ?{Modifiers|0}  [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]]   {{title= Evasive Maneuvers }} {{subtitle=@{character_name}'s @{mech-type} }}  {{ Piloting Bonus= [[@{piloting-bonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Evasive_roll= $[[4]]}} "></button>
                </div>

                <!--Punch Container-->
                <input type="checkbox" name="attr_mech-melee-combat" class="hidden tab" value="1" checked>
                <div class="container-mech-punch">
                    <!--Punch!-->
                    <!--Punch! label-->
                    <label class="label-hardware-physical-attack font2-medium">Punch</label>
                    <!--Punch type-->
                    <select class="field-hardware-weapon-type font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Punch Base Damage-->
                    <input type="number" class="field-hardware-weapon-damage font2-medium"  title="@{punch-damage}" name="attr_punch-damage" value="round(@{mech-tonnage}/30)" min="0" disabled="true">
                    <!--Punch Missile Damage-->
                    <input type="number" class="field-hardware-weapon-missile-damage font2-medium" min="0" disabled="true">
                    <!--Punch Missile Max-->
                    <input type="number" class="field-hardware-weapon-missile-max font2-medium" min="0" disabled="true">
                    <!--Punch Heat-->
                    <input type="number" class="field-hardware-weapon-heat font2-medium" min="0" disabled="true">
                    <!--Punch Location-->
                    <select class="field-hardware-weapon-location font2-medium">
                        <option value="blank"></option>
                        <option value="Arms" selected="selected" >Arms</option>
                        <option value="RA">RA</option>
                        <option value="LA">LA</option>
                    </select>
                    <!--Punch Weapon Range-->
                    <!--Punch at Pointblank-->
                    <select class="field-hardware-weapon-range-pb font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-">-</option>
                        <option value="ok"  selected="selected">OK</option>
                    </select>
                    <!--Punch at Short-->
                    <select class="field-hardware-weapon-range-s font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Punch at Medium-->
                    <select class="field-hardware-weapon-range-m font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Punch at Long-->
                    <select class="field-hardware-weapon-range-l font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Punch Attack Button-->
                    <button type="roll" class="weapon-button" name="roll_mechweapon" value="&{template:hardware-weapon} ?{Modifiers|0}  [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]] {{title= 'Mech Punch Attack}} {{subtitle= @{character_name}'s @{mech-type}}} {{Piloting Bonus=[[@{piloting-bonus}]]}} {{Modifiers= [[?{Modifiers}]] }} {{Weapon_Range= [[0]] **Pointblank Range** }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Attack_Roll=$[[4]]}} {{Physical_Attack_Damage= [[@{punch-damage}]] **at** [[2d6]]}} {{desc=**Treat any leg hit as a hit to the corresponding arm instead**}}"></button>
                </div>

                <!--Hatchet Container-->
                <input type="checkbox" name="attr_mech-melee-combat" class="hidden tab" value="2">
                <div class="container-mech-hatchet">
                    <!--Punch!-->
                    <!--Punch! label-->
                    <label class="label-hardware-physical-attack font2-medium">Punch</label>
                    <!--Punch type-->
                    <select class="field-hardware-weapon-type font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Punch Base Damage-->
                    <input type="number" class="field-hardware-weapon-damage font2-medium"  title="@{punch-damage}" name="attr_punch-damage" value="round(@{mech-tonnage}/30)" min="0" disabled="true">
                    <!--Punch Missile Damage-->
                    <input type="number" class="field-hardware-weapon-missile-damage font2-medium" min="0" disabled="true">
                    <!--Punch Missile Max-->
                    <input type="number" class="field-hardware-weapon-missile-max font2-medium" min="0" disabled="true">
                    <!--Punch Heat-->
                    <input type="number" class="field-hardware-weapon-heat font2-medium" min="0" disabled="true">
                    <!--Punch Location-->
                    <select class="field-hardware-weapon-location font2-medium">
                        <option value="blank"></option>
                        <option value="Arms">Arms</option>
                        <option value="RA">RA</option>
                        <option value="LA" selected="selected" >LA</option>
                    </select>
                    <!--Punch Weapon Range-->
                    <!--Punch at Pointblank-->
                    <select class="field-hardware-weapon-range-pb font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-">-</option>
                        <option value="ok"  selected="selected">OK</option>
                    </select>
                    <!--Punch at Short-->
                    <select class="field-hardware-weapon-range-s font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Punch at Medium-->
                    <select class="field-hardware-weapon-range-m font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Punch at Long-->
                    <select class="field-hardware-weapon-range-l font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Punch Attack Button-->
                    <button type="roll" class="weapon-button" name="roll_mechweapon" value="&{template:hardware-weapon} ?{Modifiers|0}  [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]] {{title= 'Mech Punch Attack}} {{subtitle= @{character_name}'s @{mech-type}}} {{Piloting Bonus=[[@{piloting-bonus}]]}} {{Modifiers= [[?{Modifiers}]] }} {{Weapon_Range= [[0]] **Pointblank Range** }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Attack_Roll=$[[4]]}} {{Physical_Attack_Damage= [[@{punch-damage}]] **at** [[2d6]]}} {{desc=**Treat any leg hit as a hit to the corresponding arm instead**}}"></button>
                    
                    <!--Hatchet-->
                    <!--Hatchet label-->
                    <label class="label-hardware-physical-attack font2-medium">Hatchet</label>
                    <!--Hatchet type-->
                    <select class="field-hardware-weapon-type font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Hatchet Base Damage-->
                    <input type="number" class="field-hardware-weapon-damage font2-medium"  title="@{hatchet-damage}" name="attr_hatchet-damage" value="round(@{mech-tonnage}/15)" min="0" disabled="true">
                    <!--Hatchet Missile Damage-->
                    <input type="number" class="field-hardware-weapon-missile-damage font2-medium" min="0" disabled="true">
                    <!--Hatchet Missile Max-->
                    <input type="number" class="field-hardware-weapon-missile-max font2-medium" min="0" disabled="true">
                    <!--Hatchet Heat-->
                    <input type="number" class="field-hardware-weapon-heat font2-medium" min="0" disabled="true">
                    <!--Hatchet Location-->
                    <select class="field-hardware-weapon-location font2-medium">
                        <option value="blank"></option>
                        <option value="Arms">Arms</option>
                        <option value="RA" selected="selected" >RA</option>
                        <option value="LA">LA</option>
                    </select>
                    <!--Hatchet Weapon Range-->
                    <!--Hatchet at Pointblank-->
                    <select class="field-hardware-weapon-range-pb font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-">-</option>
                        <option value="ok"  selected="selected">OK</option>
                    </select>
                    <!--Hatchet at Short-->
                    <select class="field-hardware-weapon-range-s font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Hatchet at Medium-->
                    <select class="field-hardware-weapon-range-m font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Hatchet at Long-->
                    <select class="field-hardware-weapon-range-l font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Hatchet Attack Button-->
                    <button type="roll" class="weapon-button" name="roll_mechweapon" value="&{template:hardware-weapon} ?{Modifiers|0}  [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]] {{title= 'Mech Punch Attack}} {{subtitle= @{character_name}'s @{mech-type}}} {{Piloting Bonus=[[@{piloting-bonus}]]}} {{Modifiers= [[?{Modifiers}]] }} {{Weapon_Range= [[0]] **Pointblank Range** }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Attack_Roll=$[[4]]}} {{Physical_Attack_Damage= [[@{hatchet-damage}]] **at** [[2d6]]}} {{desc=**Reroll leg hits**}}"></button>
                </div>

                <!--Fixed Mech Weapons-->
                <div class="hardware-fixed-weapons">
                    <!--Kick label-->
                    <label class="label-hardware-physical-attack font2-medium">Kick</label>
                    <!--Kick!-->
                    <!--Kick Type-->
                    <select class="field-hardware-weapon-type font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Kick Base Damage-->
                    <input type="number" class="field-hardware-weapon-damage font2-medium"  title="@{kick-damage}" name="attr_kick-damage" value="round(@{mech-tonnage}/15)" min="0" disabled="true">
                    <!--Kick Missile Damage-->
                    <input type="number" class="field-hardware-weapon-missile-damage font2-medium" min="0" disabled="true">
                    <!--Kick Missile Max-->
                    <input type="number" class="field-hardware-weapon-missile-max font2-medium" min="0" disabled="true">
                    <!--Kick Heat-->
                    <input type="number" class="field-hardware-weapon-heat font2-medium" min="0" disabled="true">
                    <!--Kick Location-->
                    <select class="field-hardware-weapon-location font2-medium">
                        <option value="blank"></option>
                        <option value="Legs" selected="selected" >Legs</option>
                        <option value="RL">RL</option>
                        <option value="LL">LL</option>
                    </select>
                    <!--Kick Range-->
                    <!--Kick at Pointblank-->
                    <select class="field-hardware-weapon-range-pb font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-">-</option>
                        <option value="ok"  selected="selected">OK</option>
                    </select>
                    <!--Kick at Short-->
                    <select class="field-hardware-weapon-range-s font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Kick at Medium-->
                    <select class="field-hardware-weapon-range-m font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Kick at Long-->
                    <select class="field-hardware-weapon-range-l font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Kick Attack Button-->
                    <button type="roll" class="weapon-button" name="roll_mechweapon" value="&{template:hardware-weapon} ?{Modifiers|0}  [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]] {{title= 'Mech Kick Attack}} {{subtitle= @{character_name}'s @{mech-type}}} {{Piloting Bonus=[[@{piloting-bonus}]]}} {{Modifiers= [[?{Modifiers}]] }} {{Weapon_Range=[[0]] **Pointblank Range** }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Attack_Roll=$[[4]]}} {{Physical_Attack_Damage= [[@{kick-damage}]] **at** [[1d6]] **or** [[2d6]]}} {{desc= **'Mech Units: 1D6 [1–3] Right Leg; [4–6] Left Leg; Also target must make a Piloting Test**
                        **Other ground units: 2d6.**}}"></button>
                    
                    <!--Charge-->
                    <!--Charge label-->
                    <label class="label-hardware-physical-attack font2-medium">Charge</label>
                    <!--Charge type-->
                    <select class="field-hardware-weapon-type font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Charge Base Damage-->
                    <input type="number" class="field-hardware-weapon-damage font2-medium" title="@{charge-damage}" name="attr_charge-damage" value="round(@{mech-tonnage}/30*@{mech-movement})" min="0" disabled="true">
                    <!--Charge Missile Damage-->
                    <input type="number" class="field-hardware-weapon-missile-damage font2-medium" min="0" disabled="true">
                    <!--Charge Missile Max-->
                    <input type="number" class="field-hardware-weapon-missile-max font2-medium" min="0" disabled="true">
                    <!--Charge Heat-->
                    <input type="number" class="field-hardware-weapon-heat font2-medium" min="0" disabled="true">
                    <!--Charge Location-->
                    <select class="field-hardware-weapon-location font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Charge Weapon Range-->
                    <!--Charge at Pointblank-->
                    <select class="field-hardware-weapon-range-pb font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-">-</option>
                        <option value="ok"  selected="selected">OK</option>
                    </select>
                    <!--Charge at Short-->
                    <select class="field-hardware-weapon-range-s font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Charge at Medium-->
                    <select class="field-hardware-weapon-range-m font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Charge at Long-->
                    <select class="field-hardware-weapon-range-l font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Charge Attack Button-->
                    <button type="roll" class="weapon-button" name="roll_mechweapon" value="&{template:hardware-weapon} ?{Modifiers|0} ?{Target's Tonnage|0}  [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]] {{title= 'Mech Charge Attack}} {{subtitle= @{character_name}'s @{mech-type}}} {{Piloting Bonus=[[@{piloting-bonus}]]}} {{Modifiers= [[?{Modifiers}]] }} {{Weapon_Range=[[0]] **Pointblank Range**}}  {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Attack_Roll=$[[4]]}} {{Physical_Attack_Damage= [[floor(@{charge-damage}/2)]] **at** [[2d6]]}} {{Physical_Attack_Damage_b= [[floor(@{charge-damage}/2) + floor(@{charge-damage}%2) ]] **at** [[2d6]]}} {{Self_Damage= [[floor(?{Target's Tonnage}/60)]] **at** [[2d6]] }} {{Self_Damage_b= [[floor(?{Target's Tonnage}/60) + (floor(?{Target's Tonnage}/30)%2)]] **at** [[2d6]] }} {{desc=**Both the attacker and target, if is a 'Mech, must make a Piloting Test.**}}"></button>

                    <!--Push-->
                    <!--Push label-->
                    <label class="label-hardware-physical-attack font2-medium">Push (vs. 'Mech Only)</label>
                    <!--Push type-->
                    <select class="field-hardware-weapon-type font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Push Base Damage-->
                    <input type="number" class="field-hardware-weapon-damage font2-medium" value="0" min="0" disabled="true">
                    <!--Push Missile Damage-->
                    <input type="number" class="field-hardware-weapon-missile-damage font2-medium" min="0" disabled="true">
                    <!--Push Missile Max-->
                    <input type="number" class="field-hardware-weapon-missile-max font2-medium" min="0" disabled="true">
                    <!--Push Heat-->
                    <input type="number" class="field-hardware-weapon-heat font2-medium" min="0" disabled="true">
                    <!--Push Location-->
                    <select class="field-hardware-weapon-location font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Push Weapon Range-->
                    <!--Punch at Pointblank-->
                    <select class="field-hardware-weapon-range-pb font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-">-</option>
                        <option value="ok"  selected="selected">OK</option>
                    </select>
                    <!--Push at Short-->
                    <select class="field-hardware-weapon-range-s font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Push at Medium-->
                    <select class="field-hardware-weapon-range-m font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Push at Long-->
                    <select class="field-hardware-weapon-range-l font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Push Attack Button-->
                    <button type="roll" class="weapon-button" name="roll_mechweapon" value="&{template:hardware-weapon} ?{Modifiers|0}  [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]] {{title= 'Mech Push Attack}} {{subtitle= @{character_name}'s @{mech-type}}} {{Piloting Bonus=[[@{piloting-bonus}]]}} {{Modifiers= [[?{Modifiers}]] }} {{Weapon_Range= [[0]] **Pointblank Range** }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Attack_Roll=$[[4]]}} {{desc=**The attacker narrates an non-damaging narrative effect on the target, and forces the target to make a Piloting Test.**}}"></button>
                </div>

                <!--Death from above-->
                <!--input for hiding it-->
                <input type="checkbox" name="attr_mech-jumpjets" class="hidden tab" value="0" checked>
                <div class="container-death-from-above">
                    <!--Death from above-->
                    <!--Death from above label-->
                    <label class="label-hardware-physical-attack font2-medium">Death from above</label>
                    <!--Death from above type-->
                    <select class="field-hardware-weapon-type font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Death from above Base Damage-->
                    <input type="number" class="field-hardware-weapon-damage font2-medium" title="@{death-from-above-damage}" name="attr_death-from-above-damage" value="round(@{mech-tonnage}/30*@{mech-movement})" min="0" disabled="true">
                    <!--Death from above Missile Damage-->
                    <input type="number" class="field-hardware-weapon-missile-damage font2-medium" min="0" disabled="true">
                    <!--Death from above Missile Max-->
                    <input type="number" class="field-hardware-weapon-missile-max font2-medium" min="0" disabled="true">
                    <!--Death from above Heat-->
                    <input type="number" class="field-hardware-weapon-heat font2-medium" min="0" value="1" disabled="true">
                    <!--Death from above Location-->
                    <select class="field-hardware-weapon-location font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Death from above Weapon Range-->
                    <!--Death from above at Pointblank-->
                    <select class="field-hardware-weapon-range-pb font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-">-</option>
                        <option value="ok"  selected="selected">OK</option>
                    </select>
                    <!--Death from above at Short-->
                    <select class="field-hardware-weapon-range-s font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Death from above at Medium-->
                    <select class="field-hardware-weapon-range-m font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Death from above at Long-->
                    <select class="field-hardware-weapon-range-l font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Death from above Attack Button-->
                    <button type="roll" class="weapon-button" name="roll_mechweapon" value="&{template:hardware-weapon} ?{Modifiers|0} ?{Target's Tonnage|0}  [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]] {{title= 'Mech Death from Above Attack}} {{subtitle= @{character_name}'s @{mech-type}}} {{Piloting Bonus=[[@{piloting-bonus}]]}} {{Modifiers= [[?{Modifiers}]] }} {{Weapon_Range= [[0]] **Pointblank Range** }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Attack_Roll=$[[4]]}} !modbattr --silent --name @{character_name} --mech-heat|+{{Heat = [[1]] }}!!! {{Physical_Attack_Damage= [[floor(@{death-from-above-damage}/2)]] **at** [[2d6]]}} {{Physical_Attack_Damage_b= [[floor(@{death-from-above-damage}/2) + (@{death-from-above-damage}%2)]] **at** [[2d6]]}} {{Self_Damage= **Left Leg: **[[floor(?{Target's Tonnage}/60)]] }} {{Self_Damage_b= **Right Leg:** [[floor(?{Target's Tonnage}/60) + (floor(?{Target's Tonnage}/30))%2]] }} {{desc=**Both the attacker and target, if is a 'Mech, must make a Piloting Test.**}}"></button>
                </div>

                <!--Repeating Mech Weapons-->
                <div class="repeating-hardware-weapons">
                    <fieldset class="repeating_mech-weapons">
                        <!--Weapon Name-->
                        <input type="text" class="field-hardware-weapon-name font2-medium" name="attr_mechweaponname" autocomplete="off" spellcheck="false" name="attr_mechweaponname">
                        <!--Weapon Type-->
                        <select class="field-hardware-weapon-type font2-medium" name="attr_mechweapontype">
                            <option value="blank" selected="selected"></option>
                            <option value="b">B</option>
                            <option value="m">M</option>
                            <option value="e">E</option>
                            <option value="b,e">B,E</option>
                            <option value="b,m">B,M</option>
                            <option value="e,m">E,M</option>
                            <option value="b,m,e">B,M,E</option>
                        </select>
                        <!--Weapon Base Damage-->
                        <input type="number" class="field-hardware-weapon-damage font2-medium" name="attr_mechweapondamage" value="0" min="0">
                        <!--Weapon Missile Damage-->
                        <input type="number" class="field-hardware-weapon-missile-damage font2-medium" name="attr_mechweaponmissile" value="0" min="0">
                        <!--Weapon Missile Max-->
                        <input type="number" class="field-hardware-weapon-missile-max font2-medium" name="attr_mechweaponmissilemax" value="0" min="0">
                        <!--Weapon Heat-->
                        <input type="number" class="field-hardware-weapon-heat font2-medium" name="attr_mechweaponheat" value="0" min="0">
                        <!--Weapon Location-->
                        <select class="field-hardware-weapon-location font2-medium" name="attr_mechweaponloc">
                            <option value="blank" selected="selected"></option>
                            <option value="ra">RA</option>
                            <option value="la">LA</option>
                            <option value="t">T</option>
                            <option value="h">H</option>
                            <option value="t(r)">T(R)</option>
                            <option value="arms">Arms</option>
                            <option value="t,arms">T,Arms</option>
                            <option value="h,t">H,T</option>
                            <option value="ra,t">RA,T</option>
                            <option value="la,t">LA,T</option>
                            <option value="ra,h">RA,H</option>
                            <option value="la,h">LA,H</option>
                            <option value="RL">RL</option>
                            <option value="LL">LL</option>
                            <option value="Legs">Legs</option>
                        </select>
                        <!--Weapon Range-->
                        <!--Range Pointblank-->
                        <select class="field-hardware-weapon-range-pb font2-medium" name="attr_mechweaponrangepb">
                            <option value="-100" selected="selected">-</option>
                            <option value="0">OK</option>
                            <option value="-1">-1</option>
                            <option value="-2">-2</option>
                            <option value="-3">-3</option>
                            <option value="-4">-4</option>
                            <option value="+1">+1</option>
                            <option value="+2">+2</option>
                        </select>
                        <!--Range Short-->
                        <select class="field-hardware-weapon-range-s font2-medium" name="attr_mechweaponranges">
                            <option value="-100" selected="selected">-</option>
                            <option value="0">OK</option>
                            <option value="-1">-1</option>
                            <option value="-2">-2</option>
                            <option value="-3">-3</option>
                            <option value="-4">-4</option>
                            <option value="+1">+1</option>
                            <option value="+2">+2</option>
                        </select>
                        <!--Range Medium-->
                        <select class="field-hardware-weapon-range-m font2-medium" name="attr_mechweaponrangem">
                            <option value="-100" selected="selected">-</option>
                            <option value="0">OK</option>
                            <option value="-1">-1</option>
                            <option value="-2">-2</option>
                            <option value="-3">-3</option>
                            <option value="-4">-4</option>
                            <option value="+1">+1</option>
                            <option value="+2">+2</option>
                        </select>
                        <!--Range Long-->
                        <select class="field-hardware-weapon-range-l font2-medium" name="attr_mechweaponrangel">
                            <option value="-100" selected="selected">-</option>
                            <option value="0">OK</option>
                            <option value="-1">-1</option>
                            <option value="-2">-2</option>
                            <option value="-3">-3</option>
                            <option value="-4">-4</option>
                            <option value="+1">+1</option>
                            <option value="+2">+2</option>
                        </select>
                        <!--Weapon Attack Button-->
                        <button type="roll" class="weapon-button" name="roll_mechweapon" value="&{template:hardware-weapon} ?{Modifiers|0} ?{Range Modifier|Pointblank Range, [[@{mechweaponrangepb}]] **Pointblank Range**|Short Range, [[@{mechweaponranges}]] **Short Range**|Medium Range, [[@{mechweaponrangem}]] **Medium Range**|Long Range, [[@{mechweaponrangel}]] **Long Range** } [[ [[1d6]] + [[1d6]] + [[@{gunnery-bonus}]] + [[?{Modifiers}]] +[[?{Range Modifier}]] ]]  [[ [[ [[ [[@{mechweaponmissilemax}-@{mechweapondamage}]] - [[{1d6,4d1}kl1 % 4]] ]] - [[{1d6,4d1}kl1 % 4]] ]] - [[{1d6,4d1}kl1 % 4]] ]] {{title= @{mechweaponname} Attack}} {{subtitle= @{character_name}'s @{mech-type}}} {{Gunnery Bonus=[[@{gunnery-bonus}]]}} {{Modifiers= [[?{Modifiers}]] }} {{Weapon_Range= ?{Range Modifier} }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Attack_Roll=$[[9]]}} !modbattr --silent --name @{character_name} --mech-heat|+{{Heat = [[@{mechweaponheat}]] }}!!! {{Hardware_Weapon_Damage= [[@{mechweapondamage}]] **at** [[2d6]]}} {{Missile_Damage= [[@{mechweaponmissile}]]}} {{Missile_1d= $[[8]] **at** [[2d6]] }} {{Missile_dif1= $[[6]] **at** [[2d6]] }} {{Missile_2d= $[[10]] **at** [[2d6]]}} {{Missile_dif2= $[[12]] **at** [[2d6]] }} {{Missile_3d= $[[11]] **at** [[2d6]]}} {{Missile_dif3= $[[27]] **at** [[2d6]] }} "></button>
                    </fieldset>

                </div>
            </div>

        </div>

        <!--Combat Vehicle-->
        <input type="checkbox" name="attr_hardware-type" class="hidden tab" value="combat-vehicle">
        <div class="container-selected-hardware">

            <!--Combat Vehicle Diagram-->
            <div class="selected-hardware-diagram">
                <!--Combate Vehicle with turret-->
                <input type="checkbox" name="attr_combat-vehicle-turret" class="hidden tab" value="0" checked>
                <img src="https://raw.githubusercontent.com/nicolas-sancho/repositorio_MWD/main/Combat_Vehicle_turret.png" alt="Combat Vehicle" class="hardware-turret"  width="270px" height="400px">

                <!--Combate Vehicle without turret-->
                <input type="checkbox" name="attr_combat-vehicle-turret" class="hidden tab" value="1">
                <img src="https://raw.githubusercontent.com/nicolas-sancho/repositorio_MWD/main/Combat_Vehicle_no_turret.png" alt="Combat Vehicle" class="hardware-turret hardware-no-turret"  width="270px" height="400px">


                <!--Combat Vehicle Front-->
                <div class="combat-vehicle-front container-hardware-part">
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-cv-front-armor font1-small armor transparent" title="@{cv-front-armor}" name="attr_cv-front-armor"min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-cv-front-structure font1-small structure transparent" title="@{cv-front-structure}" name="attr_cv-front-structure" min="0">
                    </div>
                </div>
                <input type="checkbox" name="attr_combat-vehicle-turret" class="hidden tab" value="1">
                <button type="roll" class="critical-location-button crit-cv-front" name="roll_crit_location" value="&{template:critical-hit} {{title= Combat Vehicle Front Critical Hit}} {{subtitle= @{character_name}'s @{combat-vehicle-type}}} {{Hardware_select= [[2]]}} {{Combat_vehicle_crit= [[1]]}} {{Front_crit= [[1d6]] }}"></button>

                <!--Combat Vehicle Left side-->
                <div class="combat-vehicle-left-side container-hardware-part">
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-cv-left-side-armor font1-small armor transparent" title="@{left-cv-side-armor}" name="attr_left-cv-side-armor" min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-cv-left-side-structure font1-small structure transparent" title="@{left-cv-side-structure}" name="attr_left-cv-side-structure" min="0">
                    </div>
                </div>
                <button type="roll" class="critical-location-button crit-cv-left-side" name="roll_crit_location" value="&{template:critical-hit} {{title= Combat Vehicle Side Critical Hit}} {{subtitle= @{character_name}'s @{combat-vehicle-type}}} {{Hardware_select= [[2]]}} {{Combat_vehicle_crit= [[2]]}} "></button>

                <!--Combat Vehicle Right Side-->
                <div class="combat-vehicle-right-side container-hardware-part">
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-cv-right-side-armor font1-small armor transparent" title="@{right-cv-side-armor}" name="attr_right-cv-side-armor" min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-cv-right-side-structure font1-small structure transparent" title="@{right-cv-side-structure}" name="attr_right-cv-side-structure" min="0">
                    </div>
                </div>
                <input type="checkbox" name="attr_combat-vehicle-turret" class="hidden tab" value="1">
                <button type="roll" class="critical-location-button crit-cv-right-side" name="roll_crit_location" value="&{template:critical-hit} {{title= Combat Vehicle Side Critical Hit}} {{subtitle= @{character_name}'s @{combat-vehicle-type}}} {{Hardware_select= [[2]]}} {{Combat_vehicle_crit= [[2]]}} "></button>

                <!--Combat Vehicle Turret-->
                <input type="checkbox" name="attr_combat-vehicle-turret" class="hidden tab" value="0" checked>
                <div class="combat-vehicle-turret container-hardware-part hardware-turret">
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-cv-turret-armor font1-small armor transparent" title="@{cv-turret-armor}" name="attr_cv-turret-armor" min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-cv-turret-structure font1-small structure transparent" title="@{cv-turret-structure}" name="attr_cv-turret-structure" min="0">
                    </div>
                </div>
                <input type="checkbox" name="attr_combat-vehicle-turret" class="hidden tab" value="0" checked>
                <button type="roll" class="critical-location-button crit-cv-turret hardware-turret" name="roll_crit_location" value="&{template:critical-hit} {{title= Combat Vehicle Turret Critical Hit}} {{subtitle= @{character_name}'s @{combat-vehicle-type}}} {{Hardware_select= [[2]]}} {{Combat_vehicle_crit= [[3]]}} {{Turret_crit= [[1d6]] }}"></button>

                <!--Combat Vehicle Rear-->
                <div class="combat-vehicle-rear container-hardware-part">
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-cv-rear-structure font1-small structure transparent" title="@{cv-rear-structure}" name="attr_cv-rear-structure" min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-cv-rear-armor font1-small armor transparent" title="@{cv-rear-armor}" name="attr_cv-rear-armor" min="0">
                    </div>
                </div>
                <button type="roll" class="critical-location-button crit-cv-rear" name="roll_crit_location" value="&{template:critical-hit} {{title= Combat Vehicle Rear Critical Hit}} {{subtitle= @{character_name}'s @{combat-vehicle-type}}} {{Hardware_select= [[2]]}} {{Combat_vehicle_crit= [[4]]}} {{Rear_crit= [[1d6]] }}"></button>

            </div>

            <!--Combat Vehicle Specification-->
            <div class="selected-hardware-specs">
                <label class="label-hardware font1-medium">Hardware</label>

                <!--Combat Vehicle Type-->
                <label class="label-hardware-type font2-medium">Type:</label>
                <input type="text" class="field-hardware-name font2-medium" autocomplete="off" spellcheck="false" title="@{combat-vehicle-type}"name="attr_combat-vehicle-type">
                <!--Combat Vehicle Weight-->
                <label class="label-hardware-weight font2-medium">Weight:</label>
                <select type="text" class="field-hardware-weight font2-medium" title="@{combat-vehicle-weight}" name="attr_combat-vehicle-weight">
                    <option value="" selected="selected"></option>
                    <option value="Light">Light</option>
                    <option value="Medium">Medium</option>
                    <option value="Heavy">Heavy</option>
                    <option value="Assault">Assault</option>
                </select>
                <!--Combat Vehicle Tonnage-->
                <label class="label-hardware-tonnage font2-medium">Tonnage:</label>
                <input type="number" class="field-hardware-tonnage font2-medium" title="@{combat-vehicle-tonnage}" name="attr_combat-vehicle-tonnage" value="0" min="0" max="120">
                <!--Combat Vehicle Hardware point cost-->
                <input type="number" class="field-hardware-points font2-medium" title="@{combat-vehicle-hardware-points}" name="attr_combat-vehicle-hardware-points" value="0" min="0" max="6">
                <label class="label-hardware-points font2-medium">Hardware Points</label>
                <!--Combat Vehicle Movement-->
                <label class="label-hardware-movement font2-medium">Movement:</label>
                <input type="number" class="field-hardware-movement font2-medium" title="@{combat-vehicle-movement-max}" name="attr_combat-vehicle-movement-max" value="0" min="0" max="6">
                <!--Combat Vehicle Turret-->
                <label class="label-hardware-turret font2-medium">Turret:</label>
                <select type="number" class="field-hardware-turret font2-medium" title="@{combat-vehicle-turret}" name="attr_combat-vehicle-turret">
                    <option value="1">Yes</option>
                    <option value="0" selected="selected">No</option>
                </select>

            </div>

            <!--Combat Vehicle Tags-->
            <div class="selected-hardware-tags">
                <label class="label-hardware-tags font1-medium">Tags</label>
                <div class="hardware-flex-tags">
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{combat-vehicle-tag1}" name="attr_combat-vehicle-tag1">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{combat-vehicle-tag2}" name="attr_combat-vehicle-tag2">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{combat-vehicle-tag3}" name="attr_combat-vehicle-tag3">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{combat-vehicle-tag4}" name="attr_combat-vehicle-tag4">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{combat-vehicle-tag5}" name="attr_combat-vehicle-tag5">
                    </div>
                </div>
            </div>

            <!--Combat vehicle Armor and Structure Points-->
            <div class="selected-hardware-armor-structure">
                <label class="label-hardware-armor-structure font1-medium">Armor / Structure Configuration</label>
                <!--Front Armor/Structure-->
                <label class="label-hardware-as-first font2-medium">Front:</label>
                <input type="number" class="field-hardware-first-armor-max font2-medium"  title="@{cv-front-armor-max}" name="attr_cv-front-armor-max" value="0" min="0" max="30">
                <label class="label-as-slash font2-medium">/</label>
                <input type="number" class="field-hardware-first-structure-max font2-medium"  title="@{cv-front-structure-max}" name="attr_cv-front-structure-max" value="0" min="0" max="5">
                <!--Turret Armor/Structure-->
                <input type="checkbox" name="attr_combat-vehicle-turret" class="hidden tab" value="0" checked>
                <label class="label-hardware-as-second font2-medium hardware-turret">Turret:</label>
                <input type="checkbox" name="attr_combat-vehicle-turret" class="hidden tab" value="0" checked>
                <input type="number" class="field-hardware-second-armor-max font2-medium hardware-turret"  title="@{cv-turret-armor-max}" name="attr_cv-turret-armor-max" value="0" min="0" max="22">
                <input type="checkbox" name="attr_combat-vehicle-turret" class="hidden tab" value="0" checked>
                <label class="label-as-slash font2-medium hardware-turret">/</label>
                <input type="checkbox" name="attr_combat-vehicle-turret" class="hidden tab" value="0" checked>
                <input type="number" class="field-hardware-second-structure-max font2-medium hardware-turret"  title="@{cv-turret-structure-max}" name="attr_cv-turret-structure-max" value="0" min="0" max="5">
                <!--Sides Armor/Structure-->
                <label class="label-hardware-as-third font2-medium">Right/Left Side:</label>
                <input type="number" class="field-hardware-third-armor-max font2-medium"  title="@{cv-side-armor-max}" name="attr_cv-side-armor-max" value="0" min="0" max="25">
                <label class="label-as-slash font2-medium">/</label>
                <input type="number" class="field-hardware-third-structure-max font2-medium"  title="@{cv-side-structure-max}" name="attr_cv-side-structure-max" value="0" min="0" max="5">
                <!--Rear Armor/Structure-->
                <label class="label-hardware-as-fourth font2-medium">Rear:</label>
                <input type="number" class="field-hardware-fourth-armor-max font2-medium"  title="@{cv-rear-armor-max}" name="attr_cv-rear-armor-max" value="0" min="0" max="19">
                <label class="label-as-slash font2-medium">/</label>
                <input type="number" class="field-hardware-fourth-structure-max font2-medium"  title="@{cv-rear-structure-max}" name="attr_cv-rear-structure-max" value="0" min="0" max="5">                 
            </div>

            <!--Combat Vehicle Equipment-->
            <div class="selected-hardware-equipment">
                <label class="label-equipment font1-medium">Equipment</label>
                <fieldset class="repeating_combat-vehicle-equipment">
                    <input type="text" class="field-hardware-equipment font2-medium" autocomplete="off" spellcheck="false" name="attr_cvequipment">
                </fieldset>
            </div>

            <!--Combat Vehicle Condition-->
            <div class="selected-hardware-condition">
                <label class="label-hardware-condition font1-medium">Conditions</label>
                <div class="hardware-condition-grid">
                    <label class="label-hardware-movement-actual font2-medium"> Current Movement:</label>
                    <input type="number" class="field-hardware-movement-actual font2-medium" title="@{combat-vehicle-movement}" name="attr_combat-vehicle-movement" min="0">
                </div>
            </div>

            <!--Combat Vehicle Weapons-->
            <div class="selected-hardware-weapons">
                <!--Combat Vehicle Weapon Label-->
                <div class="hardware-weapons-labels">
                    <!--Labels-->
                    <label class="label-hardware-weapons font1-medium"><br><br>Weapons</label>
                    <label class="label-type font2-small">Type</label>
                    <label class="label-base-damage font2-small">Base<br>Damage</label>
                    <label class="label-missile-damage font2-small"><br>Missile<br>Damage</label>
                    <label class="label-missile-m font2-small">M</label>
                    <label class="label-missile-max font2-small">Max</label>
                    <label class="label-heat font2-small">Heat</label>
                    <label class="label-location font2-small">Location</label>
                    <label class="label-range font2-small"><br>Range</label>
                    <label class="label-range-pointblank font2-small">Point-<br>blank</label>
                    <label class="label-range-short font2-small">Short</label>
                    <label class="label-range-medium font2-small">Medium</label>
                    <label class="label-range-long font2-small">Long</label>
                </div>
  
                <!--Fixed Combat Vehicle Weapons-->
                <div class="hardware-fixed-weapons">
                    <!--Evasive Maneuvers-->
                    <!--Evasive Maneuvers label-->
                    <label class="label-hardware-physical-attack font2-medium">Evasive Maneuvers</label>
                    <!--Evasive Maneuvers type-->
                    <select class="field-hardware-weapon-type font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Evasive Maneuvers Base Damage-->
                    <input type="number" class="field-hardware-weapon-damage font2-medium" disabled="true">
                    <!--Evasive Maneuvers Missile Damage-->
                    <input type="number" class="field-hardware-weapon-missile-damage font2-medium" min="0" disabled="true">
                    <!--Evasive Maneuvers Missile Max-->
                    <input type="number" class="field-hardware-weapon-missile-max font2-medium" min="0" disabled="true">
                    <!--Evasive Maneuvers Heat-->
                    <input type="number" class="field-hardware-weapon-heat font2-medium" min="0" disabled="true">
                    <!--Evasive Maneuvers Location-->
                    <select class="field-hardware-weapon-location font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Evasive Maneuvers Range-->
                    <!--Evasive Maneuvers at Pointblank-->
                    <select class="field-hardware-weapon-range-pb font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers at Short-->
                    <select class="field-hardware-weapon-range-s font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers at Medium-->
                    <select class="field-hardware-weapon-range-m font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers at Long-->
                    <select class="field-hardware-weapon-range-l font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers Button-->
                    <button type="roll" class="weapon-button" name="roll_mechweapon" value="&{template:custom} ?{Modifiers|0}  [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]]   {{title= Evasive Maneuvers }} {{subtitle=@{character_name}'s @{combat-vehicle-type} }}  {{ Piloting Bonus= [[@{piloting-bonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Evasive_roll= $[[4]]}} "></button>

                    <!--Ram!-->
                    <!--Ram! label-->
                    <label class="label-hardware-physical-attack font2-medium">Ram</label>
                    <!--Ram type-->
                    <select class="field-hardware-weapon-type font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Ram Base Damage-->
                    <input type="number" class="field-hardware-weapon-damage font2-medium"  title="@{cv-ram-damage}" name="attr_cv-ram-damage" value="round(@{combat-vehicle-tonnage}/30)*@{combat-vehicle-movement}"  min="0" disabled="true">
                    <!--Ram Missile Damage-->
                    <input type="number" class="field-hardware-weapon-missile-damage font2-medium" min="0" disabled="true">
                    <!--Ram Missile Max-->
                    <input type="number" class="field-hardware-weapon-missile-max font2-medium" min="0" disabled="true">
                    <!--Ram Heat-->
                    <input type="number" class="field-hardware-weapon-heat font2-medium" min="0" disabled="true">
                    <!--Ram Location-->
                    <select class="field-hardware-weapon-location font2-medium">
                        <option value="blank"></option>
                        <option value="front" selected="selected" >Front</option>
                        <option value="rear" >Rear</option>
                    </select>
                    <!--Ram Weapon Range-->
                    <!--Ram at Pointblank-->
                    <select class="field-hardware-weapon-range-pb font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-">-</option>
                        <option value="ok"  selected="selected">OK</option>
                    </select>
                    <!--Ram at Short-->
                    <select class="field-hardware-weapon-range-s font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Ram at Medium-->
                    <select class="field-hardware-weapon-range-m font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Ram at Long-->
                    <select class="field-hardware-weapon-range-l font2-medium" disabled="true">
                        <option value="blank"> </option>
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Ram Attack Button-->
                    <button type="roll" class="weapon-button" name="roll_cvweapon" value="&{template:hardware-weapon} ?{Modifiers|0} ?{Target's Tonnage|0}  [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]] {{title= Combat Vehicle Ram Attack}} {{subtitle= @{character_name}'s @{combat-vehicle-type}}} {{Piloting Bonus=[[@{piloting-bonus}]]}} {{Modifiers= [[?{Modifiers}]] }} {{Weapon_Range=[[0]] **Pointblank Range** }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Attack_Roll=$[[4]]}} {{Physical_Attack_Damage= [[@{cv-ram-damage}]] **at** [[1d6]] **or** [[2d6]]}} {{Self_Damage= [[floor(?{Target's Tonnage}/60)]] **at** [[2d6]] }} {{Self_Damage_b= [[floor(?{Target's Tonnage}/60) + (floor(?{Target's Tonnage}/30))%2]] **at** [[2d6]] }}  {{desc= **Mech Units: 1D6 [1–3] Right Leg; [4–6] Left Leg.**
                        **Other ground units: 2d6.**}}"></button>
                </div>

                <!--Repeating Combat Vehicle Weapons-->
                <div class="repeating-hardware-weapons">
                    <fieldset class="repeating_combat-vehicle-weapons">
                        <!--Weapon Name-->
                        <input type="text" class="field-hardware-weapon-name font2-medium" autocomplete="off" spellcheck="false" name="attr_cvweaponname">
                        <!--Weapon Type-->
                        <select class="field-hardware-weapon-type font2-medium" name="attr_cvweapontype">
                            <option value="blank" selected="selected"></option>
                            <option value="b">B</option>
                            <option value="m">M</option>
                            <option value="e">E</option>
                            <option value="b,e">B,E</option>
                            <option value="b,m">B,M</option>
                            <option value="e,m">E,M</option>
                            <option value="b,m,e">B,M,E</option>
                        </select>
                        <!--Weapon Base Damage-->
                        <input type="number" class="field-hardware-weapon-damage font2-medium" name="attr_cvweapondamage" value="0" min="0">
                        <!--Weapon Missile Damage-->
                        <input type="number" class="field-hardware-weapon-missile-damage font2-medium" name="attr_cvweaponmissile" value="0" min="0">
                        <!--Weapon Missile Max-->
                        <input type="number" class="field-hardware-weapon-missile-max font2-medium" name="attr_cvweaponmissilemax" value="0" min="0">
                        <!--Weapon Heat-->
                        <input type="number" class="field-hardware-weapon-heat font2-medium" name="attr_cvweaponheat" value="0" min="0">
                        <!--Weapon Location-->
                        <select class="field-hardware-weapon-location font2-medium" name="attr_cvweaponloc">
                            <option value="blank" selected="selected"></option>
                            <option value="turret">Turret</option>
                            <option value="front">Front</option>
                            <option value="left side">Left Side</option>
                            <option value="right side">Right Side</option>
                            <option value="rear">Rear</option>
                        </select>
                        <!--Weapon Range-->
                        <!--Range Pointblank-->
                        <select class="field-hardware-weapon-range-pb font2-medium" name="attr_cvweaponrangepb">
                            <option value="-100" selected="selected">-</option>
                            <option value="0">OK</option>
                            <option value="-1">-1</option>
                            <option value="-2">-2</option>
                            <option value="-3">-3</option>
                            <option value="-4">-4</option>
                            <option value="+1">+1</option>
                            <option value="+2">+2</option>
                        </select>
                        <!--Range Short-->
                        <select class="field-hardware-weapon-range-s font2-medium" name="attr_cvweaponranges">
                            <option value="-100" selected="selected">-</option>
                            <option value="0">OK</option>
                            <option value="-1">-1</option>
                            <option value="-2">-2</option>
                            <option value="-3">-3</option>
                            <option value="-4">-4</option>
                            <option value="+1">+1</option>
                            <option value="+2">+2</option>
                        </select>
                        <!--Range Medium-->
                        <select class="field-hardware-weapon-range-m font2-medium" name="attr_cvweaponrangem">
                            <option value="-100" selected="selected">-</option>
                            <option value="0">OK</option>
                            <option value="-1">-1</option>
                            <option value="-2">-2</option>
                            <option value="-3">-3</option>
                            <option value="-4">-4</option>
                            <option value="+1">+1</option>
                            <option value="+2">+2</option>
                        </select>
                        <!--Range Long-->
                        <select class="field-hardware-weapon-range-l font2-medium" name="attr_cvweaponrangel">
                            <option value="-100" selected="selected">-</option>
                            <option value="0">OK</option>
                            <option value="-1">-1</option>
                            <option value="-2">-2</option>
                            <option value="-3">-3</option>
                            <option value="-4">-4</option>
                            <option value="+1">+1</option>
                            <option value="+2">+2</option>
                        </select>
                        <!--Weapon Attack Button-->
                        <button type="roll" class="weapon-button" name="roll_cvweapon" value="&{template:hardware-weapon} ?{Modifiers|0} ?{Range Modifier|Pointblank Range, [[@{cvweaponrangepb}]] **Pointblank Range**|Short Range, [[@{cvweaponranges}]] **Short Range**|Medium Range, [[@{cvweaponrangem}]] **Medium Range**|Long Range, [[@{cvweaponrangel}]] **Long Range** } [[ [[1d6]] + [[1d6]] + [[@{gunnery-bonus}]] + [[?{Modifiers}]] +[[?{Range Modifier}]] ]]  [[ [[ [[ [[@{cvweaponmissilemax}-@{cvweapondamage}]] - [[{1d6,4d1}kl1 % 4]] ]] - [[{1d6,4d1}kl1 % 4]] ]] - [[{1d6,4d1}kl1 % 4]] ]] {{title= @{cvweaponname} Attack}} {{subtitle= @{character_name}'s @{combat-vehicle-type}}} {{Gunnery Bonus=[[@{gunnery-bonus}]]}} {{Modifiers= [[?{Modifiers}]] }} {{Weapon_Range=?{Range Modifier} }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Attack_Roll=$[[9]]}} {{Heat = [[@{cvweaponheat}]] }} {{Hardware_Weapon_Damage= [[@{cvweapondamage}]] **at** [[2d6]]}} {{Missile_Damage= [[@{cvweaponmissile}]]}} {{Missile_1d= $[[8]] **at** [[2d6]] }} {{Missile_dif1= $[[6]] **at** [[2d6]] }} {{Missile_2d= $[[10]] **at** [[2d6]]}} {{Missile_dif2= $[[12]] **at** [[2d6]] }} {{Missile_3d= $[[11]] **at** [[2d6]]}} {{Missile_dif3= $[[27]] **at** [[2d6]] }} "></button>
                    </fieldset>
                </div>  

            </div>
            
        </div>

        <!--Aerospace Fighter-->
        <input type="checkbox" name="attr_hardware-type" class="hidden tab" value="aerospace-fighter">
        <div class="container-selected-hardware">

            <!--Aerospace Fighter Diagram-->
            <div class="selected-hardware-diagram">
                <img src="https://raw.githubusercontent.com/nicolas-sancho/repositorio_MWD/main/Aerospace_Fighter.png" alt="Aerospace Fighter"  width="270px" height="400px">
                <!--Aerospace Fighter Nose-->
                <div class="aerospace-fighter-nose container-hardware-part">
                    <label class="label-armor font1-smallest">Armor</label>
                    <input type="number" class="field-af-nose-armor font1-small armor transparent" title="@{af-nose-armor}" name="attr_af-nose-armor"min="0">
                </div>
                <!--Aerospace Fighter Left Wing-->
                <div class="aerospace-fighter-left-wing container-hardware-part">
                    <label class="label-armor font1-smallest">Armor</label>
                    <input type="number" class="field-af-left-wing-armor font1-small armor  transparent" title="@{left-af-wing-armor}" name="attr_left-af-wing-armor" min="0">
                </div>
                <!--Aerospace Fighter Right Wing-->
                <div class="aerospace-fighter-right-wing container-hardware-part">
                    <label class="label-armor font1-smallest">Armor</label>
                    <input type="number" class="field-af-right-wing-armor font1-small armor transparent" title="@{right-af-wing-armor}" name="attr_right-af-wing-armor" min="0">
                </div>
                <!--Aerospace Fighter Aft-->
                <div class="aerospace-fighter-aft container-hardware-part">
                    <label class="label-armor font1-smallest">Armor</label>
                    <input type="number" class="field-af-aft-armor font1-small armor transparent" title="@{af-aft-armor}" name="attr_af-aft-armor" min="0">
                </div>
                <!--Aerospace Fighter Structure-->
                <div class="aerospace-fighter-structure container-hardware-part">
                    <label class="label-structure font1-smallest">Structure</label>
                    <input type="number" class="field-af-structure font1-small structure transparent" title="@{af-structure}" name="attr_af-structure" min="0">
                </div>
                <button type="roll" class="critical-location-button crit-af" name="roll_crit_location" value="&{template:critical-hit} {{title= Aerospace Fighter Critical Hit}} {{subtitle= @{character_name}'s @{aerospace-fighter-type}}} {{Hardware_select= [[3]]}} {{Aerospace_figther_crit= [[2d6]]}}"></button>

            </div>

            <!--Aerospace Fighter Specification-->
            <div class="selected-hardware-specs">
                <label class="label-hardware font1-medium">Hardware</label>

                <!--Aerospace Fighter Type-->
                <label class="label-hardware-type font2-medium">Type:</label>
                <input type="text" class="field-hardware-name font2-medium" autocomplete="off" spellcheck="false" title="@{aerospace-fighter-type}"name="attr_aerospace-fighter-type">
                <!--Aerospace Fighter Weight-->
                <label class="label-hardware-weight font2-medium">Weight:</label>
                <select type="text" class="field-hardware-weight font2-medium" title="@{aerospace-fighter-weight}" name="attr_aerospace-fighter-weight">
                    <option value="" selected="selected"></option>
                    <option value="Light">Light</option>
                    <option value="Medium">Medium</option>
                    <option value="Heavy">Heavy</option>
                    <option value="Assault">Assault</option>
                </select>
                <!--Aerospace Fighter Tonnage-->
                <label class="label-hardware-tonnage font2-medium">Tonnage:</label>
                <input type="number" class="field-hardware-tonnage font2-medium" title="@{aerospace-fighter-tonnage}"name="attr_aerospace-fighter-tonnage" value="0" min="0" max="120">
                <!--Aerospace Fighter Hardware point cost-->
                <input type="number" class="field-hardware-points font2-medium" title="@{aerospace-fighter-hardware-points}" name="attr_aerospace-fighter-hardware-points" value="0" min="0" max="6">
                <label class="label-hardware-points font2-medium">Hardware Points</label>
                <!--Aerospace Fighter Movement-->
                <label class="label-hardware-movement font2-medium">Movement:</label>
                <input type="number" class="field-hardware-movement font2-medium" title="@{aerospace-fighter-movement-max}" name="attr_aerospace-fighter-movement-max" value="0" min="0" max="6">
                <!--Aerospace Fighter Dissipation-->
                <label class="label-hardware-heat-dissipation font2-medium">Heat Dissipation:</label>
                <input type="number" class="field-hardware-heat-dissipation font2-medium" title="@{aerospace-fighter-heat-dissipation}" name="attr_aerospace-fighter-heat-dissipation" value="0" min="0" max="12">
            </div>

            <!--Aerospace Fighter Tags-->
            <div class="selected-hardware-tags">
                <label class="label-hardware-tags font1-medium">Tags</label>
                <div class="hardware-flex-tags">
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{aerospace-fighter-tag1}" name="attr_aerospace-fighter-tag1">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{aerospace-fighter-tag2}" name="attr_aerospace-fighter-tag2">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{aerospace-fighter-tag3}" name="attr_aerospace-fighter-tag3">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{aerospace-fighter-tag4}" name="attr_aerospace-fighter-tag4">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{aerospace-fighter-tag5}" name="attr_aerospace-fighter-tag5">
                    </div>
                </div>
            </div>

            <!--Aerospace Fighter Armor and Structure Points-->
            <div class="selected-hardware-armor-structure">
                <label class="label-hardware-armor-structure font1-medium">Armor / Structure Configuration</label>
                <!--Nose Armor-->
                <label class="label-hardware-as-first font2-medium">Nose:</label>
                <input type="number" class="field-hardware-first-armor-max font2-medium"  title="@{af-nose-armor-max}" name="attr_af-nose-armor-max" value="0" min="0" max="60">
                <!--Wings Armor-->
                <label class="label-hardware-as-second font2-medium">Right/Left Wing:</label>
                <input type="number" class="field-hardware-second-armor-max font2-medium"  title="@{af-wing-armor-max}" name="attr_af-wing-armor-max" value="0" min="0" max="46">
                <!--Aft Armor-->
                <label class="label-hardware-as-third font2-medium">Aft:</label>
                <input type="number" class="field-hardware-third-armor-max font2-medium"  title="@{af-aft-armor-max}" name="attr_af-aft-armor-max" value="0" min="0" max="44">
                <!--Structure-->
                <label class="label-hardware-as-fourth font2-medium">Structure:</label>
                <input type="number" class="field-hardware-fourth-armor-max font2-medium"  title="@{af-structure-max}" name="attr_af-structure-max" value="0" min="0" max="12">                
            </div>

            <!--Aerospace Fighter Equipment-->
            <div class="selected-hardware-equipment">
                <label class="label-equipment font1-medium">Equipment</label>
                <fieldset class="repeating_aerospace-fighter-equipment">
                    <input type="text" class="field-hardware-equipment font2-medium" autocomplete="off" spellcheck="false" name="attr_afequipment">
                </fieldset>
            </div>

            <!--Aerospace Condition-->
            <div class="selected-hardware-condition">
                <label class="label-hardware-condition font1-medium">Conditions</label>
                <div class="hardware-condition-grid">
                    <label class="label-hardware-heat font2-medium">Heat:</label>
                    <input type="number" class="field-hardware-heat font2-medium" title="@{aerospace-fighter-heat}" name="attr_aerospace-fighter-heat" value="0" min="0">
                    <select type="text" class="field-hardware-heat-cond font2-medium disabled-select" title="@{aerospace-fighter-heat}" name="attr_aerospace-fighter-heat">
                        <option value="0" selected="selected" >Blue: No effects</option>
                        <option value="1" >Green: –1 Max Movement</option>
                        <option value="2" >Yellow: –1 Ranged Attack Modifier</option>
                        <option value="3">Orange: Shutdown (avoid on 8+)</option>
                        <option value="4">Red: Ammo explosion (avoid on 8+)</option>
                        <option value="5">Critical: Automatic Shutdown</option>
                        <option value="6">Critical: Automatic Shutdown</option>
                        <option value="7">Critical: Automatic Shutdown</option>
                        <option value="8">Critical: Automatic Shutdown</option>
                        <option value="9">Critical: Automatic Shutdown</option>
                        <option value="10">Critical: Automatic Shutdown</option>
                        <option value="11">Critical: Automatic Shutdown</option>
                        <option value="12">Critical: Automatic Shutdown</option>
                        <option value="13">Critical: Automatic Shutdown</option>
                        <option value="14">Critical: Automatic Shutdown</option>
                        <option value="15">Critical: Automatic Shutdown</option>
                        <option value="16">Critical: Automatic Shutdown</option>
                        <option value="17">Critical: Automatic Shutdown</option>
                        <option value="18">Critical: Automatic Shutdown</option>
                        <option value="19">Critical: Automatic Shutdown</option>
                        <option value="20">Critical: Automatic Shutdown</option>
                    </select>
                    <button type="roll" class="heat-dissipation-button" name="roll_heatdissipation" value="&{template:hardware-weapon} {{title= Cool Down}} {{subtitle= @{character_name}'s @{aerospace-fighter-type}}} !modbattr --silent --name @{character_name} --aerospace-fighter-heat|-{{Heat Dissipation= [[@{aerospace-fighter-heat-dissipation}]]}}!!! {{Actual_Heat= [[{@{aerospace-fighter-heat} - @{aerospace-fighter-heat-dissipation},0}kh1]]}}"></button>
                    <label class="label-hardware-movement-actual font2-medium"> Current Movement:</label>
                    <input type="number" class="field-hardware-movement-actual font2-medium" title="@{aerospace-fighter-movement}" name="attr_aerospace-fighter-movement" min="0">                    
                </div>
            </div>

            <!--Aerospace Fighter Weapons-->
            <div class="selected-hardware-weapons">
                <!--Aerospace Fighter Labels-->
                <div class="hardware-weapons-labels">
                    <label class="label-hardware-weapons font1-medium"><br><br>Weapons</label>
                    <label class="label-type font2-small">Type</label>
                    <label class="label-base-damage font2-small">Base<br>Damage</label>
                    <label class="label-missile-damage font2-small"><br>Missile<br>Damage</label>
                    <label class="label-missile-m font2-small">M</label>
                    <label class="label-missile-max font2-small">Max</label>
                    <label class="label-heat font2-small">Heat</label>
                    <label class="label-location font2-small">Location</label>
                    <label class="label-range font2-small"><br>Range</label>
                    <label class="label-range-pointblank font2-small">Point-<br>blank</label>
                    <label class="label-range-short font2-small">Short</label>
                    <label class="label-range-medium font2-small">Medium</label>
                    <label class="label-range-long font2-small">Long</label>
                </div>

                <!--Fixed Aerospace Fighter Weapons-->
                <div class="hardware-fixed-weapons">
                    <!--Evasive Maneuvers-->
                    <!--Evasive Maneuvers label-->
                    <label class="label-hardware-physical-attack font2-medium">Evasive Maneuvers</label>
                    <!--Evasive Maneuvers type-->
                    <select class="field-hardware-weapon-type font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Evasive Maneuvers Base Damage-->
                    <input type="number" class="field-hardware-weapon-damage font2-medium" disabled="true">
                    <!--Evasive Maneuvers Missile Damage-->
                    <input type="number" class="field-hardware-weapon-missile-damage font2-medium" min="0" disabled="true">
                    <!--Evasive Maneuvers Missile Max-->
                    <input type="number" class="field-hardware-weapon-missile-max font2-medium" min="0" disabled="true">
                    <!--Evasive Maneuvers Heat-->
                    <input type="number" class="field-hardware-weapon-heat font2-medium" min="0" disabled="true">
                    <!--Evasive Maneuvers Location-->
                    <select class="field-hardware-weapon-location font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Evasive Maneuvers Range-->
                    <!--Evasive Maneuvers at Pointblank-->
                    <select class="field-hardware-weapon-range-pb font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers at Short-->
                    <select class="field-hardware-weapon-range-s font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers at Medium-->
                    <select class="field-hardware-weapon-range-m font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers at Long-->
                    <select class="field-hardware-weapon-range-l font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers Button-->
                    <button type="roll" class="weapon-button" name="roll_mechweapon" value="&{template:custom} ?{Modifiers|0}  [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]]   {{title= Evasive Maneuvers }} {{subtitle=@{character_name}'s @{aerospace-fighter-type} }}  {{ Piloting Bonus= [[@{piloting-bonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Evasive_roll= $[[4]]}} "></button>
                </div>

                <!--Repeating Aerospace Fighter Weapons-->
                <div class="repeating-hardware-weapons">
                    <fieldset class="repeating_aerospace-fighter-weapons">
                        <!--Weapon Name-->
                        <input type="text" class="field-hardware-weapon-name font2-medium" autocomplete="off" spellcheck="false" name="attr_afweaponname">
                        <!--Weapon Type-->
                        <select class="field-hardware-weapon-type font2-medium" name="attr_afweapontype">
                            <option value="blank" selected="selected"></option>
                            <option value="b">B</option>
                            <option value="m">M</option>
                            <option value="e">E</option>
                            <option value="b,e">B,E</option>
                            <option value="b,m">B,M</option>
                            <option value="e,m">E,M</option>
                            <option value="b,m,e">B,M,E</option>
                        </select>
                        <!--Weapon Base Damage-->
                        <input type="number" class="field-hardware-weapon-damage font2-medium" name="attr_afweapondamage" value="0" min="0">
                        <!--Weapon Missile Damage-->
                        <input type="number" class="field-hardware-weapon-missile-damage font2-medium" name="attr_afweaponmissile" value="0" min="0">
                        <!--Weapon Missile Max-->
                        <input type="number" class="field-hardware-weapon-missile-max font2-medium" name="attr_afweaponmissilemax" value="0" min="0">
                        <!--Weapon Heat-->
                        <input type="number" class="field-hardware-weapon-heat font2-medium" name="attr_afweaponheat" value="0" min="0">
                        <!--Weapon Location-->
                        <select class="field-hardware-weapon-location font2-medium" name="attr_afweaponloc">
                            <option value="blank" selected="selected"></option>
                            <option value="nose">Nose</option>
                            <option value="left wing">Left Wing</option>
                            <option value="right wing">Right Wing</option>
                            <option value="aft">Aft</option>
                        </select>
                        <!--Weapon Range-->
                        <!--Range Pointblank-->
                        <select class="field-hardware-weapon-range-pb font2-medium" name="attr_afweaponrangepb">
                            <option value="-100" selected="selected">-</option>
                            <option value="0">OK</option>
                            <option value="-1">-1</option>
                            <option value="-2">-2</option>
                            <option value="-3">-3</option>
                            <option value="-4">-4</option>
                            <option value="+1">+1</option>
                            <option value="+2">+2</option>
                        </select>
                        <!--Range Short-->
                        <select class="field-hardware-weapon-range-s font2-medium" name="attr_afweaponranges">
                            <option value="-100" selected="selected">-</option>
                            <option value="0">OK</option>
                            <option value="-1">-1</option>
                            <option value="-2">-2</option>
                            <option value="-3">-3</option>
                            <option value="-4">-4</option>
                            <option value="+1">+1</option>
                            <option value="+2">+2</option>
                        </select>
                        <!--Range Medium-->
                        <select class="field-hardware-weapon-range-m font2-medium" name="attr_afweaponrangem">
                            <option value="-100" selected="selected">-</option>
                            <option value="0">OK</option>
                            <option value="-1">-1</option>
                            <option value="-2">-2</option>
                            <option value="-3">-3</option>
                            <option value="-4">-4</option>
                            <option value="+1">+1</option>
                            <option value="+2">+2</option>
                        </select>
                        <!--Range Long-->
                        <select class="field-hardware-weapon-range-l font2-medium" name="attr_afweaponrangel">
                            <option value="-100" selected="selected">-</option>
                            <option value="0">OK</option>
                            <option value="-1">-1</option>
                            <option value="-2">-2</option>
                            <option value="-3">-3</option>
                            <option value="-4">-4</option>
                            <option value="+1">+1</option>
                            <option value="+2">+2</option>
                        </select>
                        <!--Weapon Attack Button-->
                        <button type="roll" class="weapon-button" name="roll_afweapon" value="&{template:hardware-weapon} ?{Modifiers|0} ?{Range Modifier|Pointblank Range, [[@{afweaponrangepb}]] **Pointblank Range**|Short Range, [[@{afweaponranges}]] **Short Range**|Medium Range, [[@{afweaponrangem}]] **Medium Range**|Long Range, [[@{afweaponrangel}]] **Long Range** } [[ [[1d6]] + [[1d6]] + [[@{gunnery-bonus}]] + [[?{Modifiers}]] +[[?{Range Modifier}]] ]]  [[ [[ [[ [[@{afweaponmissilemax}-@{afweapondamage}]] - [[{1d6,4d1}kl1 % 4]] ]] - [[{1d6,4d1}kl1 % 4]] ]] - [[{1d6,4d1}kl1 % 4]] ]] {{title= @{afweaponname} Attack}} {{subtitle= @{character_name}'s @{aerospace-fighter-type}}} {{Gunnery Bonus=[[@{gunnery-bonus}]]}} {{Modifiers= [[?{Modifiers}]] }} {{Weapon_Range=?{Range Modifier} }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Attack_Roll=$[[9]]}} !modbattr --silent --name @{character_name} --aerospace-fighter-heat|+{{Heat = [[@{afweaponheat}]] }}!!! {{Hardware_Weapon_Damage= [[@{afweapondamage}]] **at** [[2d6]]}} {{Missile_Damage= [[@{afweaponmissile}]]}} {{Missile_1d= $[[8]] **at** [[2d6]] }} {{Missile_dif1= $[[6]] **at** [[2d6]] }} {{Missile_2d= $[[10]] **at** [[2d6]]}} {{Missile_dif2= $[[12]] **at** [[2d6]] }} {{Missile_3d= $[[11]] **at** [[2d6]]}} {{Missile_dif3= $[[27]] **at** [[2d6]] }} "></button>
                    </fieldset>
                </div>
            </div>

        </div>

        <!--Personal Vehicle-->
        <input type="checkbox" name="attr_hardware-type" class="hidden tab" value="personal-vehicle">
        <div class="container-selected-hardware">

            <!--Personal Vehicle Diagram-->
            <div class="selected-hardware-diagram">
                <img src="https://raw.githubusercontent.com/nicolas-sancho/repositorio_MWD/main/Personal_Vehicle.png" alt="Personal Vehicle"  width="270px" height="400px">
                <!--Personal Vehicle Front-->
                <div class="personal-vehicle-front container-hardware-part">
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-pv-front-armor font1-small armor transparent" title="@{pv-front-armor}" name="attr_pv-front-armor"min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-pv-front-structure font1-small structure transparent" title="@{pv-front-structure}" name="attr_pv-front-structure" min="0">
                    </div>
                </div>
                <!--Personal Vehicle Left side-->
                <div class="personal-vehicle-left-side container-hardware-part">
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-pv-left-side-armor font1-small armor transparent" title="@{left-pv-side-armor}" name="attr_left-pv-side-armor" min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-pv-left-side-structure font1-small structure transparent" title="@{left-pv-side-structure}" name="attr_left-pv-side-structure" min="0">
                    </div>
                </div>
                <!--Personal Vehicle Right Side-->
                <div class="personal-vehicle-right-side container-hardware-part">
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-pv-right-side-armor font1-small armor transparent" title="@{right-pv-side-armor}" name="attr_right-pv-side-armor" min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-pv-right-side-structure font1-small structure transparent" title="@{right-pv-side-structure}" name="attr_right-pv-side-structure" min="0">
                    </div>
                </div>
                <!--Personal Vehicle Rear-->
                <div class="personal-vehicle-rear container-hardware-part">
                    <div class= "hardware-part">
                        <label class="label-structure font1-smallest">Structure</label>
                        <input type="number" class="field-pv-rear-structure font1-small structure transparent" title="@{pv-rear-structure}" name="attr_pv-rear-structure" min="0">
                    </div>
                    <div class= "hardware-part">
                        <label class="label-armor font1-smallest">Armor</label>
                        <input type="number" class="field-pv-rear-armor font1-small armor transparent" title="@{pv-rear-armor}" name="attr_pv-rear-armor" min="0">
                    </div>
                </div>  
            </div>

            <!--Personal Vehicle Specification-->
            <div class="selected-hardware-specs">
                <label class="label-hardware font-big-labels">Hardware</label>
                <!--Personal Vehicle Type-->
                <label class="label-hardware-type font2-medium">Type:</label>
                <input type="text" class="field-hardware-name font2-medium" autocomplete="off" spellcheck="false" title="@{personal-vehicle-type}" name="attr_personal-vehicle-type">
                <!--Personal Vehicle Weight-->
                <label class="label-hardware-weight font2-medium">Weight:</label>
                <select type="text" class="field-hardware-weight font2-medium" title="@{personal-vehicle-weight}" name="attr_personal-vehicle-weight">
                    <option value="" selected="selected"></option>
                    <option value="Light">Light</option>
                    <option value="Medium">Medium</option>
                    <option value="Heavy">Heavy</option>
                </select>
                <!--Personal Vehicle Tonnage-->
                <label class="label-hardware-tonnage font2-medium">Tonnage:</label>
                <input type="number" class="field-hardware-tonnage font2-medium" title="@{personal-vehicle-tonnage}"name="attr_personal-vehicle-tonnage" value="0" min="0" max="120">
                <!--Personal Vehicle Hardware point cost-->
                <input type="number" class="field-hardware-points font2-medium" title="@{personal-vehicle-hardware-points}" name="attr_personal-vehicle-hardware-points" value="0" min="0" max="6">
                <label class="label-hardware-points font2-medium">Hardware Points</label>
                <!--Personal Vehicle Movement-->
                <label class="label-hardware-movement font2-medium">Movement:</label>
                <input type="number" class="field-hardware-movement font2-medium" title="@{personal-vehicle-movement-max}" name="attr_personal-vehicle-movement-max" value="0" min="0" max="6">
                <label class="label-hardware-durability-max font2-medium">Max Durability:</label>
                <input type="number" class="field-hardware-durability-max font2-medium" title="@{personal-vehicle-durability-max}" name="attr_personal-vehicle-durability-max" min="0" value="0">             
            </div>

            <!--Personal Vehicle Tags-->
            <div class="selected-hardware-tags">
                <label class="label-hardware-tags font1-medium">Tags</label>
                <div class="hardware-flex-tags"> 
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{personal-vehicle-tag1}" name="attr_personal-vehicle-tag1">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{personal-vehicle-tag2}" name="attr_personal-vehicle-tag2">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{personal-vehicle-tag3}" name="attr_personal-vehicle-tag3">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{personal-vehicle-tag4}" name="attr_personal-vehicle-tag4">
                    </div>
                    <div class="hardware-dot-tag">
                        <label class="label-hardware-tag font2-medium">&bull;</label>
                        <input type="text" class="field-hardware-tag font2-medium" autocomplete="off" spellcheck="false" title="@{personal-vehicle-tag5}" name="attr_personal-vehicle-tag5">
                    </div>
                </div>
            </div>

            <!--Personal vehicle Armor and Structure Points-->
            <div class="selected-hardware-armor-structure">
                <label class="label-hardware-armor-structure font1-medium">Armor / Structure Configuration</label>
                <!--Front Armor/Structure-->
                <label class="label-hardware-as-first font2-medium">Front:</label>
                <input type="number" class="field-hardware-first-armor-max font2-medium"  title="@{pv-front-armor-max}" name="attr_pv-front-armor-max" value="0" min="0" max="28">
                <label class="label-as-slash font2-medium">/</label>
                <input type="number" class="field-hardware-first-structure-max font2-medium"  title="@{pv-front-structure-max}" name="attr_pv-front-structure-max" value="0" min="0" max="5">
                <!--Sides Armor/Structure-->
                <label class="label-hardware-as-second font2-medium">Right/Left Side:</label>
                <input type="number" class="field-hardware-second-armor-max font2-medium"  title="@{pv-side-armor-max}" name="attr_pv-side-armor-max" value="0" min="0" max="25">
                <label class="label-as-slash font2-medium">/</label>
                <input type="number" class="field-hardware-second-structure-max font2-medium"  title="@{pv-side-structure-max}" name="attr_pv-side-structure-max" value="0" min="0" max="5">
                <!--Rear Armor/Structure-->
                <label class="label-hardware-as-third font2-medium">Rear:</label>
                <input type="number" class="field-hardware-third-armor-max font2-medium"  title="@{pv-rear-armor-max}" name="attr_pv-rear-armor-max" value="0" min="0" max="19">
                <label class="label-as-slash font2-medium">/</label>
                <input type="number" class="field-hardware-third-structure-max font2-medium"  title="@{pv-rear-structure-max}" name="attr_pv-rear-structure-max" value="0" min="0" max="5">                 
            </div>

            <!--Personal Vehicle Equipment-->
            <div class="selected-hardware-equipment">
                <label class="label-equipment font1-medium">Equipment</label>
                <fieldset class="repeating_personal-vehicle-equipment">
                    <input type="text" class="field-hardware-equipment font2-medium" autocomplete="off" spellcheck="false" name="attr_pvequipment">
                </fieldset>
            </div>

            <!--Personal Vehicle Condition-->
            <div class="selected-hardware-condition">
                <label class="label-hardware-condition font1-medium">Conditions</label>
                <div class="hardware-condition-grid">
                    <label class="label-hardware-durability font2-medium">Current Durability:</label>
                    <input type="number" class="field-hardware-durability font2-medium" title="@{personal-vehicle-durability}" name="attr_personal-vehicle-durability" min="0">
                    <label class="label-hardware-movement-actual font2-medium"> Current Movement:</label>
                    <input type="number" class="field-hardware-movement-actual font2-medium" title="@{personal-vehicle-movement}" name="attr_personal-vehicle-movement" min="0">
                </div>
            </div>

            <!--Personal Vehicle Weapons-->
            <div class="selected-hardware-weapons">
                <!--Personal Vehicle Weapon Labels-->
                <div class="hardware-weapons-labels">
                    <label class="label-hardware-weapons font1-medium"><br><br>Weapons</label>
                    <label class="label-type font2-small">Type</label>
                    <label class="label-base-damage font2-small">Base<br>Damage</label>
                    <label class="label-missile-damage font2-small"><br>Missile<br>Damage</label>
                    <label class="label-missile-m font2-small">M</label>
                    <label class="label-missile-max font2-small">Max</label>
                    <label class="label-heat font2-small">Heat</label>
                    <label class="label-location font2-small">Location</label>
                    <label class="label-range font2-small"><br>Range</label>
                    <label class="label-range-pointblank font2-small">Point-<br>blank</label>
                    <label class="label-range-short font2-small">Short</label>
                    <label class="label-range-medium font2-small">Medium</label>
                    <label class="label-range-long font2-small">Long</label>
                </div>

                <!--Fixed Personal Vehicle Weapons-->
                <div class="hardware-fixed-weapons">
                    <!--Evasive Maneuvers-->
                    <!--Evasive Maneuvers label-->
                    <label class="label-hardware-physical-attack font2-medium">Evasive Maneuvers</label>
                    <!--Evasive Maneuvers type-->
                    <select class="field-hardware-weapon-type font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Evasive Maneuvers Base Damage-->
                    <input type="number" class="field-hardware-weapon-damage font2-medium" disabled="true">
                    <!--Evasive Maneuvers Missile Damage-->
                    <input type="number" class="field-hardware-weapon-missile-damage font2-medium" min="0" disabled="true">
                    <!--Evasive Maneuvers Missile Max-->
                    <input type="number" class="field-hardware-weapon-missile-max font2-medium" min="0" disabled="true">
                    <!--Evasive Maneuvers Heat-->
                    <input type="number" class="field-hardware-weapon-heat font2-medium" min="0" disabled="true">
                    <!--Evasive Maneuvers Location-->
                    <select class="field-hardware-weapon-location font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Evasive Maneuvers Range-->
                    <!--Evasive Maneuvers at Pointblank-->
                    <select class="field-hardware-weapon-range-pb font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers at Short-->
                    <select class="field-hardware-weapon-range-s font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers at Medium-->
                    <select class="field-hardware-weapon-range-m font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers at Long-->
                    <select class="field-hardware-weapon-range-l font2-medium" disabled="true">
                        <option value="blank" selected="selected"> </option>
                    </select>
                    <!--Evasive Maneuvers Button-->
                    <button type="roll" class="weapon-button" name="roll_mechweapon" value="&{template:custom} ?{Modifiers|0}  [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]]   {{title= Evasive Maneuvers }} {{subtitle=@{character_name}'s @{personal-vehicle-type} }}  {{ Piloting Bonus= [[@{piloting-bonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Evasive_roll= $[[4]]}} "></button>
                    
                    <!--Ram!-->
                    <!--Ram! label-->
                    <label class="label-hardware-physical-attack font2-medium">Ram</label>
                    <!--Ram type-->
                    <select class="field-hardware-weapon-type font2-medium" disabled="true">
                        <option value="blank" selected="selected"></option>
                    </select>
                    <!--Ram Base Damage-->
                    <input type="number" class="field-hardware-weapon-damage font2-medium"  title="@{pv-ram-damage}" name="attr_pv-ram-damage" value="round(@{personal-vehicle-tonnage}/30)*@{personal-vehicle-movement}" min="0" disabled="true">
                    <!--Ram Missile Damage-->
                    <input type="number" class="field-hardware-weapon-missile-damage font2-medium" disabled="true">
                    <!--Ram Missile Max-->
                    <input type="number" class="field-hardware-weapon-missile-max font2-medium" disabled="true">
                    <!--Ram Heat-->
                    <input type="number" class="field-hardware-weapon-heat font2-medium" disabled="true">
                    <!--Ram Location-->
                    <select class="field-hardware-weapon-location font2-medium">
                        <option value="blank"></option>
                        <option value="front" selected="selected" >Front</option>
                    </select>
                    <!--Ram Weapon Range-->
                    <!--Ram at Pointblank-->
                    <select class="field-hardware-weapon-range-pb font2-medium" disabled="true">
                        <option value="ok"  selected="selected">OK</option>
                    </select>
                    <!--Ram at Short-->
                    <select class="field-hardware-weapon-range-s font2-medium" disabled="true">
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Ram at Medium-->
                    <select class="field-hardware-weapon-range-m font2-medium" disabled="true">
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Ram at Long-->
                    <select class="field-hardware-weapon-range-l font2-medium" disabled="true">
                        <option value="-" selected="selected">-</option>
                    </select>
                    <!--Ram Attack Button-->
                    <button type="roll" class="weapon-button" name="roll_pvweapon" value="&{template:hardware-weapon} ?{Modifiers|0} ?{Target's Tonnage|0}  [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]] {{title= Personal Vehicle Ram Attack}} {{subtitle= @{character_name}'s @{personal-vehicle-type}}} {{Piloting Bonus=[[@{piloting-bonus}]]}} {{Modifiers= [[?{Modifiers}]] }} {{Weapon_Range=[[0]] **Pointblank Range** }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Attack_Roll=$[[4]]}} {{Physical_Attack_Damage= [[@{pv-ram-damage}]] **at** [[1d6]] **or** [[2d6]]}} {{Self_Damage= [[floor(?{Target's Tonnage}/60)]] **at** [[2d6]] }} {{Self_Damage_b= [[floor(?{Target's Tonnage}/60) + (floor(?{Target's Tonnage}/30))%2]] **at** [[2d6]] }}  {{desc= **Mech Units: 1D6 [1–3] Right Leg; [4–6] Left Leg.**
                        **Other ground units: 2d6.**}}"></button>
                </div>
                
            </div>

        </div>
    </div>

</div>

<!--NPC Tab-->
<input type="checkbox" name="attr_tab" class="hidden tab" value="NPC" >
<div class="page-npc panel">
    
    <!--NPC's Tags-->
    <div class="container-character-tags white-container">
        <label class="label-character-tags font1-medium">Tags</label>
        <div class="container-tags"> 
            <label class="label-tag font2-medium">&bull;</label>
            <input type="text" class="field-tag font2-medium" autocomplete="off" spellcheck="false" title="@{tag1}" name="attr_tag1">
            <label class="label-tag font2-medium">&bull;</label>
            <input type="text" class="field-tag font2-medium" autocomplete="off" spellcheck="false" title="@{tag2}" name="attr_tag2">
            <label class="label-tag font2-medium">&bull;</label>
            <input type="text" class="field-tag font2-medium" autocomplete="off" spellcheck="false" title="@{tag3}" name="attr_tag3">
            <label class="label-tag font2-medium">&bull;</label>
            <input type="text" class="field-tag font2-medium" autocomplete="off" spellcheck="false" title="@{tag4}" name="attr_tag4">
            <label class="label-tag font2-medium">&bull;</label>
            <input type="text" class="field-tag font2-medium" autocomplete="off" spellcheck="false" title="@{tag5}" name="attr_tag5">
        </div>
	</div>

    <!-- NPC Attributes-->
    <div class="container-attributes withOverflowingBackground">
        <label class="label-attributes font1-medium">Attributes</label>
        <div class="container-attributes-values">
            <div class="container-attribute">
                <label class="label-attribute font1-medium" >STR</label>
                <button type="roll" class="attribute-button" name="roll_attribute" value="&{template:custom} ?{Secondary Attribute|STR, [[@{str}]] **STR**|RFL, [[@{RFL}]] **RFL**|INT, [[@{int}]] **INT**|WIL, [[@{wil}]] **WIL**|CHA, [[@{cha}]] **CHA**} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0}[[ [[ [[1d6]] + [[1d6]] + [[@{str}]] + [[?{Secondary Attribute}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]]  {{title= Pure Attribute Test}} {{subtitle= @{character_name}}} {{Base Attribute= [[@{str}]] **STR**}}  {{Secondary Attributte= ?{Secondary Attribute} }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Roll=$[[8]] }} {{Opposing_Roll= $[[7]] }} "></button>
                <input type="number" class="field-attribute font1-medium" name="attr_str" title="@{str}" value="1" min="1" max="6">
            </div>
        
            <div class="container-attribute">
                <label class="label-attribute font1-medium" >RFL</label>
                <button type="roll" class="attribute-button" name="roll_attribute" value="&{template:custom} ?{Secondary Attribute|STR, [[@{str}]] **STR**|RFL, [[@{RFL}]] **RFL**|INT, [[@{int}]] **INT**|WIL, [[@{wil}]] **WIL**|CHA, [[@{cha}]] **CHA**} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{rfl}]] + [[?{Secondary Attribute}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Pure Attribute Test}} {{subtitle= @{character_name}}} {{Base Attribute= [[@{rfl}]] **RFL**}}   {{Secondary Attributte= ?{Secondary Attribute} }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Roll= $[[8]] }} {{Opposing_Roll= $[[7]] }}"></button>
                <input type="number" class="field-attribute font1-medium" name="attr_rfl" title="@{rfl}" value="1" min="1" max="6">
            </div>

            <div class="container-attribute">
                <label class="label-attribute font1-medium" >INT</label>
                <button type="roll" class="attribute-button" name="roll_attribute" value="&{template:custom} ?{Secondary Attribute|STR, [[@{str}]] **STR**|RFL, [[@{RFL}]] **RFL**|INT, [[@{int}]] **INT**|WIL, [[@{wil}]] **WIL**|CHA, [[@{cha}]] **CHA**} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{int}]] + [[?{Secondary Attribute}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Pure Attribute Test}} {{subtitle= @{character_name}}} {{Base Attribute= [[@{int}]] **INT**}} {{Secondary Attributte= ?{Secondary Attribute} }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Roll= $[[8]] }} {{Opposing_Roll= $[[7]] }}"></button>
                <input type="number" class="field-attribute font1-medium" name="attr_int" title="@{int}" value="1" min="1" max="6">
            </div>

            <div class="container-attribute">
                <label class="label-attribute font1-medium" >WIL</label>
                <button type="roll" class="attribute-button" name="roll_attribute" value="&{template:custom} ?{Secondary Attribute|STR, [[@{str}]] **STR**|RFL, [[@{RFL}]] **RFL**|INT, [[@{int}]] **INT**|WIL, [[@{wil}]] **WIL**|CHA, [[@{cha}]] **CHA**} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{wil}]] + [[?{Secondary Attribute}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Pure Attribute Test}} {{subtitle= @{character_name}}} {{Base Attribute= [[@{wil}]] **WIL**}} {{Secondary Attributte= ?{Secondary Attribute} }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Roll= $[[8]] }} {{Opposing_Roll= $[[7]] }}"></button>
                <input type="number" class="field-attribute font1-medium" name="attr_wil" title="@{wil}" value="1" min="1" max="6">
            </div>

            <div class="container-attribute">
                <label class="label-attribute font1-medium" >CHA</label>
                <button type="roll" class="attribute-button" name="roll_attribute" value="&{template:custom} ?{Secondary Attribute|STR, [[@{str}]] **STR**|RFL, [[@{RFL}]] **RFL**|INT, [[@{int}]] **INT**|WIL, [[@{wil}]] **WIL**|CHA, [[@{cha}]] **CHA**} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{cha}]] + [[?{Secondary Attribute}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Pure Attribute Test}} {{subtitle= @{character_name}}} {{Base Attribute= [[@{cha}]] **CHA**}} {{Secondary Attributte= ?{Secondary Attribute} }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Roll= $[[8]] }} {{Opposing_Roll= $[[7]] }}"></button>
                <input type="number" class="field-attribute font1-medium" name="attr_cha" title="@{cha}" value="1" min="1" max="6">
            </div>

            <div class="container-attribute">
                <label class="label-attribute font1-medium" >INIT</label>
                <button type="roll" class="initiative-button" name="roll_initiative" value="&{template:custom} {{title= Initiative Roll}} {{subtitle= @{character_name}}} {{Base Initiative = [[@{base-initiative}]] }} {{Initiative Roll = [[2d6 + @{base-initiative} &{tracker} ]] }}"> </button>
                <input type="number" class="field-attribute font1-medium" name="attr_base-initiative" title="@{base-initiative}" value="1" min="0" max="10">
            </div>
        </div>
	</div>

	<!--NPC Skills-->
    <div class="container-skills">
		<label class="label-skills font1-medium">Skills</label>
		<!--Fixed Skills-->
        <div class="container-fixed-skills">
            <!--Labels Skills-->
            <label class="label-name-skill font2-small">Name</label>
            <label class="label-rating-skill font2-small">Rating</label>
            <label class="label-attribute-skill font2-small">+ Attribute</label>
            <label class="label-bonus-skill font2-small"> = Bonus</label>

            <!--Untrained Skill-->
            <label class="label-skill font2-medium">Untrained</label>
            <input type="number" class="field-skill-rating font2-medium" value="0" disabled="true">
            <select type="text" class="field-skill-attribute font2-medium" title="@{untrained-attribute}" name="attr_untrained-attribute">
                <option value="@{str}" selected="selected">STR</option>
                <option value="@{rfl}" >RFL</option>
                <option value="@{int}">INT</option>
                <option value="@{wil}">WIL</option>
                <option value="@{cha}">CHA</option>
            </select>
            <input type="number" class="field-skill-bonus font2-medium" title="@{untrained-bonus}" name="attr_untrained-bonus" value="@{untrained-attribute}" disabled="true">
            <button type="roll" class="skill-button" name="roll_untrained" value="&{template:custom} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{untrained-bonus}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Untrained Skill Test}} {{subtitle= @{character_name} }}  {{Attribute Bonus= [[@{untrained-bonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Roll= $[[4]] }} {{Opposing_Roll= $[[5]] }}"></button>

            <!--Gunnery skill-->
            <label class="label-skill font2-medium">Gunnery</label>
            <input type="number" class="field-skill-rating font2-medium" title="@{gunnery-rating}" name="attr_gunnery-rating" required maxlength="1" value="0" min="0" max="6">
            <select type="text" class="field-skill-attribute font2-medium" title="@{gunnery-attribute}" name="attr_gunnery-attribute">
                <option value="@{str}">STR</option>
                <option value="@{rfl}" selected="selected">RFL</option>
                <option value="@{int}">INT</option>
                <option value="@{wil}">WIL</option>
                <option value="@{cha}">CHA</option>
            </select>
            <input type="number" class="field-skill-bonus font2-medium" title="@{gunnery-bonus}" name="attr_gunnery-bonus" value="@{gunnery-rating} + @{gunnery-attribute}" disabled="true">
            <button type="roll" class="skill-button" name="roll_gunnery" value="&{template:custom} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{gunnery-bonus}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Gunnery Test}} {{subtitle= @{character_name} }}  {{Gunnery Bonus= [[@{gunnery-bonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Roll= $[[4]] }} {{Opposing_Roll= $[[5]] }}"></button>

            <!--Piloting skill-->
            <label class="label-skill font2-medium">Piloting</label>
            <input type="number" class="field-skill-rating font2-medium" title="@{piloting-rating}" name="attr_piloting-rating" required maxlength="1" value="0" min="0" max="6">
            <select type="text" class="field-skill-attribute font2-medium" title="@{piloting-attribute}" name="attr_piloting-attribute">
                <option value="@{str}">STR</option>
                <option value="@{rfl}" selected="selected">RFL</option>
                <option value="@{int}">INT</option>
                <option value="@{wil}">WIL</option>
                <option value="@{cha}">CHA</option>
            </select>
            <input type="number" class="field-skill-bonus font2-medium" title="@{piloting-bonus}" name="attr_piloting-bonus" value="@{piloting-rating} + @{piloting-attribute}" disabled="true">
            <button type="roll" class="skill-button" name="roll_piloting" value="&{template:custom} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{piloting-bonus}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= Piloting Test}} {{subtitle= @{character_name} }}  {{Piloting Bonus= [[@{piloting-bonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Roll= $[[4]] }} {{Opposing_Roll= $[[5]] }}"></button>
        </div>
        <!--Repeating Skills-->
        <div class="container-repeating-skills">
            <fieldset class="repeating_skills">
                <input type="text" class="field-skill font2-medium" autocomplete="off" spellcheck="false" name="attr_skillname">
                <input type="number" class="field-skill-rating font2-medium" name="attr_skillrating" required maxlength="1" value="1" min="0" max="6">
                <select type="text" class="field-skill-attribute font2-medium" name="attr_skillattribute">
                    <option value="blank" selected="selected"> </option>
                    <option value="@{str}">STR</option>
                    <option value="@{rfl}">RFL</option>
                    <option value="@{int}">INT</option>
                    <option value="@{wil}">WIL</option>
                    <option value="@{cha}">CHA</option>
                </select>
                <input type="number" class="field-skill-bonus font2-medium" name="attr_skillbonus" value="@{skillrating}+@{skillattribute}" disabled="true">
                <button type="roll" class="skill-button" name="roll_repskill" value="&{template:custom} ?{Difficulty|Easy, 1|Medium, 2|Hard, 3}  ?{Modifiers|0} [[ [[ [[1d6]] + [[1d6]] + [[@{skillbonus}]] + [[?{Modifiers}]] ]]  [[?{Difficulty}d6]] ]] {{title= @{skillname} Test}} {{subtitle= @{character_name} }}  {{ @{skillname} Bonus= [[@{skillbonus}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Roll= $[[4]] }} {{Opposing_Roll= $[[5]] }}"></button>
            </fieldset>
        </div>
    </div>

    <!--NPC Inventory-->
    <div class="container-inventory">
        <label class="label-inventory font1-medium">Inventory</label>
        <fieldset class="repeating_inventory">
            <input type="text" class="field-inventory font2-medium" autocomplete="off" spellcheck="false" name="attr_fielditem">
        </fieldset>
    </div>

    <!--NPC Personal Weaponry-->
    <div class="container-personal-weaponry">
        
        <!--NPC Fixed Personal Weaponry-->
        <div class="container-fixed-personal-weaponry">

            <label class="label-personal-weaponry font1-medium"><br>Personal Weaponry</label>
            <label class="label-personal-weapon-range font2-small"><br>Range</label>
            <label class="label-personal-weapon-skill font2-small">&nbsp;&nbsp;&nbsp;Attack<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Skill<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+</label>
            <label class="label-personal-weapon-name font2-small">Name</label>
            <label class="label-personal-weapon-damage font2-small">Damage</label>
            <label class="label-personal-weapon-damage-type font2-small">F/P</label>
            <label class="label-personal-weapon-close font2-small">Close</label>
            <label class="label-personal-weapon-near font2-small">Near</label>
            <label class="label-personal-weapon-far font2-small">Far</label>
            <label class="label-personal-weapon-attribute font2-small">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Linked<br>&nbsp;&nbsp;&nbsp;Attribute</label>
            
            <!--Evasive Maneuvers-->
            <select type="text" class="field-weapon-name font2-medium disabled-select">
                <option value="Evasive Maneuvers" selected="selected" >Evasive Maneuvers</option>
            </select>
            <!--Weapon Damage-->
            <input type="number" class="field-personal-weapon-damage font2-medium" disabled="true">
            <!--Weapon Damage Type-->
            <select type="text" class="field-weapon-damage-type font2-medium" disabled="true">
                <option selected="selected"> </option>
            </select>
            <!--Weapon Range-->
            <!--Close Range-->
            <select type="text" class="field-weapon-close-range font2-medium" disabled="true">
                <option selected="selected"> </option>
            </select>
            <!--Near Range-->
            <select type="text" class="field-weapon-near-range font2-medium" disabled="true">
                <option selected="selected"> </option>
            </select>
            <!--Far Range-->
            <select type="text" class="field-weapon-far-range font2-medium" disabled="true">
                <option selected="selected"> </option>
            </select>
            <!--Weapon Attack Skill-->
            <input type="number" class="field-weapon-skill-bonus font2-medium" title="@{evasive-rating}" name="attr_evasive-rating" value= "@{rfl} + @{rfl}" disabled="true">
            <!--Attack Button-->
            <button type="roll" class="attack-button" name="roll_evasive" value="&{template:custom} ?{Modifiers|0}  [[ [[1d6]] + [[1d6]] + [[@{evasive-rating}]] + [[?{Modifiers}]] ]]   {{title= Evasive Maneuvers }} {{subtitle= @{character_name} }}  {{ Total Bonus= [[@{evasive-rating}]] **RFL+RFL** }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[0]]}} {{roll2=$[[1]]}} {{Evasive_roll= $[[4]]}} "></button>
            <!--Weapon Notes-->
            <textarea type="text" class="field-weapon-note font2-small" autocomplete="off" spellcheck="false" title="@{evasive-note}" name="attr_evasive-note">Evasive Maneuvers rating is RFL + RFL</textarea>

            <!--Unarmed Combat-->
            <!--Weapon Name-->
            <select type="text" class="field-weapon-name font2-medium" title="@{unarmed-name}" name="attr_unarmed-name">
                <option value="Unarmed Combat" selected="selected" >Unarmed Combat</option>
                <option value="Martial Arts">Martial arts</option>
            </select>
            <!--Weapon Damage-->
            <!--Strengh bonus formula for google is =ROUNDUP( MAX(G18-2;0)/2;0)-->
            <input type="number" class="field-personal-weapon-damage font2-medium"  title="@{unarmed-damage}" name="attr_unarmed-damage" value="2+ceil((((@{str}-2)+abs(@{str}-2))/2)/2)" disabled="true">
            <!--Weapon Damage Type-->
            <select type="text" class="field-weapon-damage-type font2-medium" title="@{unarmed-damage-type}" name="attr_unarmed-damage-type">
                <option value="Fatigue" selected="selected">F</option>
                <option value="Physical">P</option>
            </select>
            <!--Weapon Range-->
            <!--Close Range-->
            <select type="text" class="field-weapon-close-range font2-medium" disabled="true">
                <option value="0" selected="selected">OK</option>
            </select>
            <!--Near Range-->
            <select type="text" class="field-weapon-near-range font2-medium" disabled="true">
                <option value="-100" selected="selected">-</option>
            </select>
            <!--Far Range-->
            <select type="text" class="field-weapon-far-range font2-medium" disabled="true">
                <option value="-100" selected="selected">-</option>
            </select>
            <!--Weapon Attack Skill-->
            <input type="number" class="field-weapon-skill-bonus font2-medium" title="@{unarmed-rating}" name="attr_unarmed-rating" required maxlength="1" value="0" min="0" max="12">
            <!--Attack Button-->
            <button type="roll" class="attack-button" name="roll_unarmed" value="&{template:personal-weapon} ?{Modifiers|0}  [[ [[1d6]] + [[1d6]] + [[@{unarmed-rating}]] + [[?{Modifiers}]] ]]   {{title= @{unarmed-name} Attack}} {{subtitle= @{character_name} }}  {{ @{unarmed-name} Bonus= [[@{unarmed-rating}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Weapon_Range= [[0]] **Close Range** }} {{Attack_Roll= $[[4]]}} {{Personal_Weapon_Damage=[[@{unarmed-damage}]] **@{unarmed-damage-type}** }}"></button>
            <!--Weapon Notes-->
            <textarea type="text" class="field-weapon-note font2-small" autocomplete="off" spellcheck="false" title="@{unarmed-note}" name="attr_unarmed-note">Does not count against weapon total.</textarea>
        </div>

        <!-- NPC Repeating Personal Weaponry-->
        <div class="container-repeating-personal-weaponry">
            <fieldset class="repeating_personal-weapons">
                <!--Weapon Name-->
                <input type="text" class="field-weapon-name font2-medium" autocomplete="off" spellcheck="false" name="attr_weaponname">
                <!--Weapon Damage-->
                <input type="number" class="field-personal-weapon-damage font2-medium" name="attr_weapondamage" value="0" min="0">
                <!--Weapon Damage Type-->
                <select type="text" class="field-weapon-damage-type font2-medium" name="attr_weapondamagetype">
                    <option value="Fatigue" selected="selected">F</option>
                    <option value="Physical">P</option>
                </select>
                <!--Weapon Range-->
                <!--Close Range-->
                <select type="text" class="field-weapon-close-range font2-medium" name="attr_weaponcloserange">
                    <option value="0">OK</option>
                    <option value="-2">-2</option>
                    <option value="-100" selected="selected">-</option>
                </select>
                <!--Near Range-->
                <select type="text" class="field-weapon-near-range font2-medium" name="attr_weaponnearrange">
                    <option value="0">OK</option>
                    <option value="-2">-2</option>
                    <option value="-100" selected="selected">-</option>
                </select>
                <!--Far Range-->
                <select type="text" class="field-weapon-far-range font2-medium" name="attr_weaponfarrange">
                    <option value="0">OK</option>
                    <option value="-2">-2</option>
                    <option value="-100" selected="selected">-</option>
                </select>
                <!--Weapon Attack Skill-->
                <input type="number" class="field-weapon-skill-bonus font2-medium" name="attr_weaponrating" required maxlength="1" value="0" min="0" max="12">
                <!--Attack Button-->
                <button type="roll" class="attack-button" name="roll_weapon" value="&{template:personal-weapon} ?{Modifiers|0} ?{Range Modifier|Close Range, [[@{weaponcloserange}]] **Close Range**|Near Range, [[@{weaponnearrange}]] **Near Range**|Far Range, [[@{weaponfarrange}]] **Far Range** } [[ [[1d6]] + [[1d6]] + [[@{weaponrating}]] + [[?{Modifiers}]] +[[?{Range Modifier}]] ]]   {{title= @{weaponname} Attack}} {{subtitle= @{character_name} }}  {{ @{weaponname} Bonus= [[@{weaponrating}]] }} {{Modifiers=[[?{Modifiers}]] }} {{roll1=$[[1]]}} {{roll2=$[[2]]}} {{Weapon_Range= ?{Range Modifier} }} {{Attack_Roll= $[[11]]}} {{Personal_Weapon_Damage=[[@{weapondamage}]] **@{weapondamagetype}** }}"></button>
                <!--Weapon Notes-->
                <textarea type="text" class="field-weapon-note font2-small" autocomplete="off" spellcheck="false" name="attr_weaponnote"></textarea>
            </fieldset>
        </div>
    </div>

    <!--NPC Personal Armor-->
    <div class="container-personal-armor">
        <label class="label-personal-armor font1-medium">Personal Armor</label>
        <label class="label-personal-armor-name font2-medium">Type:</label>
        <input type="text" class="field-personal-armor-name font2-medium" autocomplete="off" spellcheck="false" title="@{armor-name}" name="attr_armor-name">
        <textarea type="text" class="field-personal-armor-note font2-small" autocomplete="off" spellcheck="false" title="@{armor-note}" name="attr_armor-note"></textarea>
        <label class="label-personal-armor-max font2-medium">Max<br>Armor:</label>
        <input type="number" class="field-personal-armor-max font2-medium" title="@{personal-armor-max}" name="attr_personal-armor-max" min="0">
        <label class="label-personal-armor-current font2-medium">Marked<br>pips:</label>
        <input type="number" class="field-personal-armor-current font2-medium" title="@{personal-armor}" name="attr_personal-armor" value="0" min="0">
    </div>

    <!--NPC Fatigue Condition Monitoring-->
    <div class="container-fatigue-condition container-status-condition">
        <label class="label-status-condition font1-medium">Fatigue Condition Monitoring</label>

        <!--Maximum Marked Pips Hidden-->
        <input type="number" class="field-status-pips-max hidden" title="@{fatigue-pips-max}" name="attr_wil-pips-max"  min=10>

        <!--Marked Pips-->
        <label class="label-status-marked-pips font2-medium">Marked pips:</label>
        <input type="number" class="field-status-pips font2-medium" title="@{fatigue-pips}" name="attr_wil-pips" min=0>

        <!--Status Monitoring 10 pips-->
        <input type="checkbox" name="attr_wil-pips-max" class="hidden tab" value="10">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_wil-pips">
            <option value="0"> </option>
            <option value="1">–1</option>
            <option value="2">–2</option>
            <option value="3">–2</option>
            <option value="4">–2</option>
            <option value="5">–3</option>
            <option value="6">–3</option>
            <option value="7">–3</option>
            <option value="8">–4</option>
            <option value="9">Staggered</option>
            <option value="10">Knocked Out</option>
            <option value="11">Knocked Out</option>
            <option value="12">Knocked Out</option>
            <option value="13">Knocked Out</option>
            <option value="14">Knocked Out</option>
        </select>

        <!--Status Monitoring 11 pips-->
        <input type="checkbox" name="attr_wil-pips-max" class="hidden tab" value="11">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_wil-pips">
            <option value="0"> </option>
            <option value="1">–1</option>
            <option value="2">–1</option>
            <option value="3">–2</option>
            <option value="4">–2</option>
            <option value="5">–2</option>
            <option value="6">–3</option>
            <option value="7">–3</option>
            <option value="8">–3</option>
            <option value="9">–4</option>
            <option value="10">Staggered</option>
            <option value="11">Knocked Out</option>
            <option value="12">Knocked Out</option>
            <option value="13">Knocked Out</option>
            <option value="14">Knocked Out</option>
        </select>

        <!--Status Monitoring 12 pips-->
        <input type="checkbox" name="attr_wil-pips-max" class="hidden tab" value="12">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_wil-pips">
            <option value="0"> </option>
            <option value="1"> </option>
            <option value="2">–1</option>
            <option value="3">–1</option>
            <option value="4">–2</option>
            <option value="5">–2</option>
            <option value="6">–2</option>
            <option value="7">–3</option>
            <option value="8">–3</option>
            <option value="9">–3</option>
            <option value="10">–4</option>
            <option value="11">Staggered</option>
            <option value="12">Knocked Out</option>
            <option value="13">Knocked Out</option>
            <option value="14">Knocked Out</option>
        </select>

        <!--Status Monitoring 13 pips-->
        <input type="checkbox" name="attr_wil-pips-max" class="hidden tab" value="13">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_wil-pips">
            <option value="0"> </option>
            <option value="1"> </option>
            <option value="2">–1</option>
            <option value="3">–1</option>
            <option value="4">–1</option>
            <option value="5">–2</option>
            <option value="6">–2</option>
            <option value="7">–2</option>
            <option value="8">–3</option>
            <option value="9">–3</option>
            <option value="10">–3</option>
            <option value="11">–4</option>
            <option value="12">Staggered</option>
            <option value="13">Knocked Out</option>
            <option value="14">Knocked Out</option>
        </select>

        <!--Status Monitoring 14 pips-->
        <input type="checkbox" name="attr_wil-pips-max" class="hidden tab" value="14">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_wil-pips">
            <option value="0"> </option>
            <option value="1"> </option>
            <option value="2"> </option>
            <option value="3">–1</option>
            <option value="4">–1</option>
            <option value="5">–1</option>
            <option value="6">–2</option>
            <option value="7">–2</option>
            <option value="8">–2</option>
            <option value="9">–3</option>
            <option value="10">–3</option>
            <option value="11">–3</option>
            <option value="12">–4</option>
            <option value="13">Staggered</option>
            <option value="14">Knocked Out</option>
        </select>

    </div>

    <!--NPC Physical Condition Monitoring-->
    <div class="container-physical-condition container-status-condition">
        <label class="label-status-condition font1-medium">Physical Condition Monitoring</label>

        <!--Maximum Marked Pips Hidden-->
        <input type="number" class="field-status-pips-max hidden" title="@{physical-pips-max}" name="attr_str-pips-max"  min=10>

        <!--Marked Pips-->
        <label class="label-status-marked-pips font2-medium">Marked pips:</label>
        <input type="number" class="field-status-pips font2-medium" title="@{physical-pips}" name="attr_str-pips" min=0>

        <!--Status Monitoring 10 pips-->
        <input type="checkbox" name="attr_str-pips-max" class="hidden tab" value="10">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_str-pips">
            <option value="0"> </option>
            <option value="1">–1 (CON Check: 3)</option>
            <option value="2">–2 (CON Check: 5)</option>
            <option value="3">–2 (CON Check: 5)</option>
            <option value="4">–2 (CON Check: 5)</option>
            <option value="5">–3 (CON Check: 7)</option>
            <option value="6">–3 (CON Check: 7)</option>
            <option value="7">–3 (CON Check: 7)</option>
            <option value="8">–4 (CON Check: 10)</option>
            <option value="9">Staggered (CON Check: 11)</option>
            <option value="10">KIA (CON Check: DEAD)</option>
            <option value="11">KIA (CON Check: DEAD)</option>
            <option value="12">KIA (CON Check: DEAD)</option>
            <option value="13">KIA (CON Check: DEAD)</option>
            <option value="14">KIA (CON Check: DEAD)</option>
        </select>

        <!--Status Monitoring 11 pips-->
        <input type="checkbox" name="attr_str-pips-max" class="hidden tab" value="11">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_str-pips">
            <option value="0"> </option>
            <option value="1">–1 (CON Check: 3)</option>
            <option value="2">–1 (CON Check: 3)</option>
            <option value="3">–2 (CON Check: 5)</option>
            <option value="4">–2 (CON Check: 5)</option>
            <option value="5">–2 (CON Check: 5)</option>
            <option value="6">–3 (CON Check: 7)</option>
            <option value="7">–3 (CON Check: 7)</option>
            <option value="8">–3 (CON Check: 7)</option>
            <option value="9">–4 (CON Check: 10)</option>
            <option value="10">Staggered (CON Check: 11)</option>
            <option value="11">KIA (CON Check: DEAD)</option>
            <option value="12">KIA (CON Check: DEAD)</option>
            <option value="13">KIA (CON Check: DEAD)</option>
            <option value="14">KIA (CON Check: DEAD)</option>
        </select>

        <!--Status Monitoring 12 pips-->
        <input type="checkbox" name="attr_str-pips-max" class="hidden tab" value="12">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_str-pips">
            <option value="0"> </option>
            <option value="1"> </option>
            <option value="2">–1 (CON Check: 3)</option>
            <option value="3">–1 (CON Check: 3)</option>
            <option value="4">–2 (CON Check: 5)</option>
            <option value="5">–2 (CON Check: 5)</option>
            <option value="6">–2 (CON Check: 5)</option>
            <option value="7">–3 (CON Check: 7)</option>
            <option value="8">–3 (CON Check: 7)</option>
            <option value="9">–3 (CON Check: 7)</option>
            <option value="10">–4 (CON Check: 10)</option>
            <option value="11">Staggered (CON Check: 11)</option>
            <option value="12">KIA (CON Check: DEAD)</option>
            <option value="13">KIA (CON Check: DEAD)</option>
            <option value="14">KIA (CON Check: DEAD)</option>
        </select>

        <!--Status Monitoring 13 pips-->
        <input type="checkbox" name="attr_str-pips-max" class="hidden tab" value="13">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_str-pips">
            <option value="0"> </option>
            <option value="1"> </option>
            <option value="2">–1 (CON Check: 3)</option>
            <option value="3">–1 (CON Check: 3)</option>
            <option value="4">–1 (CON Check: 3)</option>
            <option value="5">–2 (CON Check: 5)</option>
            <option value="6">–2 (CON Check: 5)</option>
            <option value="7">–2 (CON Check: 5)</option>
            <option value="8">–3 (CON Check: 7)</option>
            <option value="9">–3 (CON Check: 7)</option>
            <option value="10">–3 (CON Check: 7)</option>
            <option value="11">–4 (CON Check: 10)</option>
            <option value="12">Staggered (CON Check: 11)</option>
            <option value="13">KIA (CON Check: DEAD)</option>
            <option value="14">KIA (CON Check: DEAD)</option>
        </select>

        <!--Status Monitoring 14 pips-->
        <input type="checkbox" name="attr_str-pips-max" class="hidden tab" value="14">
        <select type="text" class="field-monitor-status-pips font2-medium disabled-select" name="attr_str-pips">
            <option value="0"> </option>
            <option value="1"> </option>
            <option value="2"> </option>
            <option value="3">–1 (CON Check: 3)</option>
            <option value="4">–1 (CON Check: 3)</option>
            <option value="5">–1 (CON Check: 3)</option>
            <option value="6">–2 (CON Check: 5)</option>
            <option value="7">–2 (CON Check: 5)</option>
            <option value="8">–2 (CON Check: 5)</option>
            <option value="9">–3 (CON Check: 7)</option>
            <option value="10">–3 (CON Check: 7)</option>
            <option value="11">–3 (CON Check: 7)</option>
            <option value="12">–4 (CON Check: 10)</option>
            <option value="13">Staggered (CON Check: 11)</option>
            <option value="14">KIA (CON Check: DEAD)</option>
        </select>

    </div>

</div>

<!--Custom Roll Template-->
<rolltemplate class="sheet-rolltemplate-custom">
    <div class="sheet-container sheet-color-{{color}}">
      <div class="sheet-header">
        {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
        {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
      </div>
      <div class="sheet-content">
            {{#allprops() title subtitle desc color Opposing_Roll roll1 roll2 Evasive_roll}}
                <div class="sheet-key">{{key}}</div>
                <div class="sheet-value">{{value}}</div>
            {{/allprops() title subtitle desc color Opposing_Roll roll1 roll2 Evasive_roll}}

            {{#desc}}
                <div class="sheet-desc">{{desc}}</div>
            {{/desc}}

            {{#rollTotal() roll1 roll2}}
                <div class="sheet-key"><span>**Failure by two equals!**</span></div>
                <div class="sheet-value">{{roll1}} {{roll2}}</div>
            {{/rollTotal() roll1 roll2}}

            {{#^rollTotal() roll1 roll2}}
                {{#Opposing_Roll}}
                    <div class="sheet-key"><span>Opposing Roll</span></div>
                    <div class="sheet-value">{{Opposing_Roll}}</div>
                {{/Opposing_Roll}}
        
                {{#^rollLess() Roll Opposing_Roll}}
                    <div class="sheet-desc"><span>**Succes!**</span></div>
                {{/^rollLess() Roll Opposing_Roll}}
        
                {{#rollLess() Roll Opposing_Roll}}
                    <div class="sheet-desc"><span>**Failure!**</span></div>
                {{/rollLess() Roll Opposing_Roll}}

                {{#Evasive_roll}}
                    <div class="sheet-key"><span>Evasive Roll</span></div>
                    <div class="sheet-value">{{Evasive_roll}}</div>
                {{/Evasive_roll}}

            {{/^rollTotal() roll1 roll2}}

        </div>
    </div>
</rolltemplate>

<!--Roll Template Personal Weapon-->
<rolltemplate class="sheet-rolltemplate-personal-weapon">
    <div class="sheet-container sheet-color-{{color}}">
      <div class="sheet-header">
        {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
        {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
      </div>
      <div class="sheet-content">
            {{#allprops() title subtitle desc color roll1 roll2 Weapon_Range Attack_Roll Personal_Weapon_Damage}}
                <div class="sheet-key">{{key}}</div>
                <div class="sheet-value">{{value}}</div>
            {{/allprops() title subtitle desc color roll1 roll2 Weapon_Range Attack_Roll Personal_Weapon_Damage}}

            {{#desc}}
                <div class="sheet-desc">{{desc}}</div>
            {{/desc}}

            {{#^rollGreater() Weapon_Range -90}}
                <div class="sheet-desc"><span>**Weapon out of Range!**</span></div>
            {{/^rollGreater() Weapon_Range -90}}

            {{#rollGreater() Weapon_Range -90}}
                {{#rollTotal() roll1 roll2}}
                    <div class="sheet-key"><span>**Failure by two equals!**</span></div>
                    <div class="sheet-value">{{roll1}} {{roll2}}</div>
                {{/rollTotal() roll1 roll2}}

                {{#^rollTotal() roll1 roll2}}
                    {{#Weapon_Range}}
                        <div class="sheet-key"><span>Weapon Range</span></div>
                        <div class="sheet-value">{{Weapon_Range}}</div>
                    {{/Weapon_Range}}

                    {{#Attack_Roll}}
                        <div class="sheet-key"><span>Attack Roll</span></div>
                        <div class="sheet-value">{{Attack_Roll}}</div>
                    {{/Attack_Roll}}

                    {{#Personal_Weapon_Damage}}
                        <div class="sheet-key"><span>Weapon Damage</span></div>
                        <div class="sheet-value">{{Personal_Weapon_Damage}}</div>
                    {{/Personal_Weapon_Damage}}


                {{/^rollTotal() roll1 roll2}}
            {{/rollGreater() Weapon_Range -90}}

        </div>
    </div>
</rolltemplate>

<!--Roll Template Hardware Weapon-->
<rolltemplate class="sheet-rolltemplate-hardware-weapon">
    <div class="sheet-container sheet-color-{{color}}">
      <div class="sheet-header">
        {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
        {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
      </div>
      <div class="sheet-content">
            {{#allprops() title subtitle desc color roll1 roll2 Weapon_Range Attack_Roll Hardware_Weapon_Damage Physical_Attack_Damage Physical_Attack_Damage_b Missile_Damage Missile_1d Missile_dif1 Missile_2d Missile_dif2 Missile_3d Missile_dif3 Self_Damage Self_Damage_b Actual_Heat Jumpjet}}
                <div class="sheet-key">{{key}}</div>
                <div class="sheet-value">{{value}}</div>
            {{/allprops() title subtitle desc color roll1 roll2 Weapon_Range Attack_Roll Hardware_Weapon_Damage Physical_Attack_Damage Physical_Attack_Damage_b Missile_Damage Missile_1d Missile_dif1 Missile_2d Missile_dif2 Missile_3d Missile_dif3 Self_Damage Self_Damage_b Actual_Heat Jumpjet}}

            {{#Actual_Heat}}
                <div class="sheet-key">Actual Heat</div>
                <div class="sheet-value">{{Actual_Heat}}</div>
            {{/Actual_Heat}}

            {{#rollTotal() Actual_Heat 0}}
                <div class="sheet-desc" style="color: blue">**Blue: No effects**</div>
            {{/rollTotal() Actual_Heat 0}}

            {{#rollTotal() Actual_Heat 1}}
                <div class="sheet-desc" style="color: green">**Green: –1 Max Movement**</div>
            {{/rollTotal() Actual_Heat 1}}

            {{#rollTotal() Actual_Heat 2}}
                <div class="sheet-desc" style="color: goldenrod">**Yellow: –1 Ranged Attack Modifier**</div>
            {{/rollTotal() Actual_Heat 2}}

            {{#rollTotal() Actual_Heat 3}}
            <div class="sheet-desc"  style="color: orange">**Orange: Shutdown (avoid on 8+)**</div>
            {{/rollTotal() Actual_Heat 3}}

            {{#rollTotal() Actual_Heat 4}}
                <div class="sheet-desc" style="color: red">**Red: Ammo explosion (avoid on 8+)**</div>
            {{/rollTotal() Actual_Heat 4}}

            {{#rollGreater() Actual_Heat 4}}
                <div class="sheet-desc" style="color: darkred">**Critical: Automatic Shutdown**</div>
            {{/rollGreater() Actual_Heat 4}}

            {{#Jumpjet}}
                <div class="sheet-desc">{{Jumpjet}}</div>
            {{/Jumpjet}}


            {{#^rollGreater() Weapon_Range -90}}
                <div class="sheet-desc"><span>**Weapon out of Range!**</span></div>
            {{/^rollGreater() Weapon_Range -90}}

            {{#rollGreater() Weapon_Range -90}}
                {{#rollTotal() roll1 roll2}}
                    <div class="sheet-key"><span>**Failure by two equals!**</span></div>
                    <div class="sheet-value">{{roll1}} {{roll2}}</div>
                {{/rollTotal() roll1 roll2}}

                {{#^rollTotal() roll1 roll2}}
                    {{#Weapon_Range}}
                        <div class="sheet-key"><span>Weapon Range</span></div>
                        <div class="sheet-value">{{Weapon_Range}}</div>
                    {{/Weapon_Range}}

                    {{#Attack_Roll}}
                        <div class="sheet-key"><span>Attack Roll</span></div>
                        <div class="sheet-value">{{Attack_Roll}}</div>
                    {{/Attack_Roll}}

                    {{#Hardware_Weapon_Damage}}
                        <div class="sheet-key"><span>Base Weapon Damage</span></div>
                        <div class="sheet-value">{{Hardware_Weapon_Damage}}</div>
                    {{/Hardware_Weapon_Damage}}

                    {{#Physical_Attack_Damage}}
                        <div class="sheet-key"><span>Attack Damage</span></div>
                        <div class="sheet-value">{{Physical_Attack_Damage}}</div>
                    {{/Physical_Attack_Damage}}

                    {{#Physical_Attack_Damage_b}}
                        <div class="sheet-key"><span>Attack Damage</span></div>
                        <div class="sheet-value">{{Physical_Attack_Damage_b}}</div>
                    {{/Physical_Attack_Damage_b}}

                    {{#Self_Damage}}
                        <div class="sheet-key"><span>Self Damage</span></div>
                        <div class="sheet-value">{{Self_Damage}}</div>
                    {{/Self_Damage}}

                    {{#Self_Damage_b}}
                        <div class="sheet-key"><span>Self Damage</span></div>
                        <div class="sheet-value">{{Self_Damage_b}}</div>
                    {{/Self_Damage_b}}
                    
                    {{#rollGreater() Missile_Damage 0}}
                        {{#^rollGreater() Missile_1d 0}}
                            <div class="sheet-key"><span>Missile Damage</span></div>
                            <div class="sheet-value">**Miss!**</div>
                        {{/^rollGreater() Missile_1d 0}}

                        {{#rollGreater() Missile_1d 0}}
                            {{#rollGreater() Missile_1d Missile_dif1}}
                                <div class="sheet-key"><span>Missile Damage</span></div>
                                <div class="sheet-value">{{Missile_dif1}}</div>
                            {{/rollGreater() Missile_1d Missile_dif1}}

                            {{#^rollGreater() Missile_1d Missile_dif1}}
                                <div class="sheet-key"><span>Missile Damage</span></div>
                                <div class="sheet-value">{{Missile_1d}}</div>
                            {{/^rollGreater() Missile_1d Missile_dif1}}
                        {{/rollGreater() Missile_1d 0}}
                    {{/rollGreater() Missile_Damage 0}}

                    {{#rollGreater() Missile_Damage 1}}
                        {{#rollGreater() Missile_dif2 0}}
                            {{#^rollGreater() Missile_2d 0}}
                                <div class="sheet-key"><span>Missile Damage</span></div>
                                <div class="sheet-value">**Miss!**</div>
                            {{/^rollGreater() Missile_2d 0}}
                            
                            {{#rollGreater() Missile_2d 0}}
                                {{#rollGreater() Missile_2d Missile_dif2}}
                                    <div class="sheet-key"><span>Missile Damage</span></div>
                                    <div class="sheet-value">{{Missile_dif2}}</div>
                                {{/rollGreater() Missile_2d Missile_dif2}}

                                {{#^rollGreater() Missile_2d Missile_dif2}}
                                    <div class="sheet-key"><span>Missile Damage</span></div>
                                    <div class="sheet-value">{{Missile_2d}}</div>
                                {{/^rollGreater() Missile_2d Missile_dif2}}
                            {{/rollGreater() Missile_2d 0}}
                        {{/rollGreater() Missile_dif2 0}}
                    {{/rollGreater() Missile_Damage 1}}

                    {{#rollGreater() Missile_Damage 2}}
                        {{#rollGreater() Missile_dif3 0}}
                            {{#^rollGreater() Missile_3d 0}}
                                <div class="sheet-key"><span>Missile Damage</span></div>
                                <div class="sheet-value">**Miss!**</div>
                            {{/^rollGreater() Missile_3d 0}}
                            
                            {{#rollGreater() Missile_3d 0}}
                                {{#rollGreater() Missile_3d Missile_dif3}}
                                    <div class="sheet-key"><span>Missile Damage</span></div>
                                    <div class="sheet-value">{{Missile_dif3}}</div>
                                {{/rollGreater() Missile_3d Missile_dif3}}

                                {{#^rollGreater() Missile_3d Missile_dif3}}
                                    <div class="sheet-key"><span>Missile Damage</span></div>
                                    <div class="sheet-value">{{Missile_3d}}</div>
                                {{/^rollGreater() Missile_3d Missile_dif3}}
                            {{/rollGreater() Missile_3d 0}}
                        {{/rollGreater() Missile_dif3 0}}
                    {{/rollGreater() Missile_Damage 2}}


                    {{#desc}}
                        <div class="sheet-desc">{{desc}}</div>
                    {{/desc}}

                {{/^rollTotal() roll1 roll2}}
            {{/rollGreater() Weapon_Range -90}}

        </div>
    </div>
</rolltemplate>

<!--Roll Template Critical Hit-->
<rolltemplate class="sheet-rolltemplate-critical-hit">
    <div class="sheet-container sheet-color-{{color}}">
        <div class="sheet-header">
            {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
            {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
        </div>

        <div class="sheet-content">
            {{#allprops() title subtitle desc color Hardware_select Mech_crit Torso_crit Arm_crit Leg_crit Combat_vehicle_crit Front_crit Turret_crit Rear_crit Aerospace_figther_crit}}
                <div class="sheet-key">{{key}}</div>
                <div class="sheet-value">{{value}}</div>
            {{/allprops() title subtitle desc color Hardware_select Mech_crit Torso_crit Arm_crit Leg_crit Combat_vehicle_crit Front_crit Turret_crit Rear_crit Aerospace_figther_crit}}

            <!-- Hardware select: 1 'Mech-->
            {{#rollTotal() Hardware_select 1}}

                <!--Mech_Crit: 1 'Mech Head-->
                {{#rollTotal() Mech_crit 1}}
                    <div class="sheet-desc">*’Mech destroyed: spend all of their available Plot Points —a minimum of 1— to eject avoiding certain death.*</div>
                {{/rollTotal() Mech_crit 1}}

                <!--Mech_Crit: 2 'Mech Torso-->
                {{#rollTotal() Mech_crit 2}}

                    {{#rollTotal() Torso_crit 1}}
                        <div class="sheet-desc">*Ammo explosion: (’Mech destroyed) OR Primary Weapon / Torso Weapon Group is destroyed.*</div>
                    {{/rollTotal() Torso_crit 1}}

                    {{#rollTotal() Torso_crit 2}}
                        <div class="sheet-desc">*Primary Weapon / Torso Weapon Group is destroyed.*</div>
                    {{/rollTotal() Torso_crit 2}}

                    {{#rollBetween() Torso_crit 3 4}}
                        <div class="sheet-desc">*Gyro is damaged. –2 penalty to Piloting Tests. A second hit renders the ’Mech unable to spend Movement.*</div>
                    {{/rollBetween() Torso_crit 3 4}}

                    {{#rollBetween() Torso_crit 5 6}}
                        <div class="sheet-desc">*Engine shielding is damaged. Gain 1 Heat token at the end of each of this ’Mech’s Narrations. A second engine critical hit destroys the engine, which destroys the ’Mech*</div>
                    {{/rollBetween() Torso_crit 5 6}}

                {{/rollTotal() Mech_crit 2}}

                <!--Mech_Crit: 3 'Mech Arms-->
                {{#rollTotal() Mech_crit 3}}

                    {{#rollTotal() Arm_crit 1}}
                        <div class="sheet-desc">*Ammo explosion (Arm destroyed) OR Primary Weapon / Weapon Group is destroyed.*</div>
                    {{/rollTotal() Arm_crit 1}}


                    {{#rollBetween() Arm_crit 2 6}}
                        <div class="sheet-desc">*Primary Weapon / Weapon Group is destroyed.*</div>
                    {{/rollBetween() Arm_crit 2 6}}

                {{/rollTotal() Mech_crit 3}}

                <!--Mech_Crit: 4 'Mech Legs-->
                {{#rollTotal() Mech_crit 4}}

                    {{#rollTotal() Leg_crit 1}}
                        <div class="sheet-desc">*Ammo explosion (Leg destroyed) OR Leg Weapon Group is destroyed.*</div>
                    {{/rollTotal() Leg_crit 1}}


                    {{#rollBetween() Leg_crit 2 6}}
                        <div class="sheet-desc">*–1 maximum Movement.*</div>
                    {{/rollBetween() Leg_crit 2 6}}

                {{/rollTotal() Mech_crit 4}}

            {{/rollTotal() Hardware_select 1}}

            <!-- Hardware select: 2 Combat Vehicle-->
            {{#rollTotal() Hardware_select 2}}

                <!--Combat_vehicle_Crit: 1 Combat Vehicle Front-->
                {{#rollTotal() Combat_vehicle_crit 1}}

                    {{#rollTotal() Front_crit 1}}
                        <div class="sheet-desc">*Crew Compartment hit. 3 Physical Damage to all crew.*</div>
                    {{/rollTotal() Front_crit 1}}

                    {{#rollTotal() Front_crit 2}}
                        <div class="sheet-desc">*Crew stunned. –2 to all Tests during all affected characters’ next Narration.*</div>
                    {{/rollTotal() Front_crit 2}}

                    {{#rollBetween() Front_crit 3 6}}
                        <div class="sheet-desc">*Front Weapon Group is destroyed.*</div>
                    {{/rollBetween() Front_crit 3 6}}

                {{/rollTotal() Combat_vehicle_crit 1}}

                <!--Combat_vehicle_Crit: 2 Combat Vehicle Side-->
                {{#rollTotal() Combat_vehicle_crit 2}}
                    <div class="sheet-desc">*Motive system damaged. –2 maximum Movement.*</div>
                {{/rollTotal() Combat_vehicle_crit 2}}

                <!--Combat_vehicle_Crit: 3 Combat Vehicle Turret-->
                {{#rollTotal() Combat_vehicle_crit 3}}

                    {{#rollTotal() Turret_crit 1}}
                        <div class="sheet-desc">*Crew Compartment hit. 3 Physical Damage to all crew.*</div>
                    {{/rollTotal() Turret_crit 1}}

                    {{#rollTotal() Turret_crit 2}}
                        <div class="sheet-desc">*Crew stunned. –2 to all Tests during all affected characters’ next Narration.*</div>
                    {{/rollTotal() Turret_crit 2}}

                    {{#rollBetween() Turret_crit 3 6}}
                        <div class="sheet-desc">*Turret Weapon Group is destroyed.*</div>
                    {{/rollBetween() Turret_crit 3 6}}

                {{/rollTotal() Combat_vehicle_crit 3}}

                <!--Combat_vehicle_Crit: 4 Combat Vehicle Rear-->
                {{#rollTotal() Combat_vehicle_crit 4}}

                    {{#rollBetween() Rear_crit 1 2}}
                        <div class="sheet-desc">*Ammo explosion (vehicle destroyed) OR –1 maximum Movement.*</div>
                    {{/rollBetween() Rear_crit 1 2}}

                    {{#rollBetween() Rear_crit 3 6}}
                        <div class="sheet-desc">*–1 maximum Movement.*</div>
                    {{/rollBetween() Rear_crit 3 6}}

                {{/rollTotal() Combat_vehicle_crit 4}}

            {{/rollTotal() Hardware_select 2}}


            <!-- Hardware select: 1 Aerospace Fighter-->
            {{#rollTotal() Hardware_select 3}}

                <!--Aerospace_fighter_crit Structure-->
                {{#rollTotal() Aerospace_figther_crit 2}}
                    <div class="sheet-desc">*Nose Weapon Group is destroyed.*</div>
                {{/rollTotal() Aerospace_figther_crit 2}}

                {{#rollTotal() Aerospace_figther_crit 3}}
                    <div class="sheet-desc">*Avionics are damaged: –2 to Piloting Tests.*</div>
                {{/rollTotal() Aerospace_figther_crit 3}}

                {{#rollTotal() Aerospace_figther_crit 4}}
                    <div class="sheet-desc">*Fuel tank is hit: Roll 2D6: on 10+, the fuel tank explodes; unit is destroyed.*</div>
                {{/rollTotal() Aerospace_figther_crit 4}}

                {{#rollBetween() Aerospace_figther_crit 5 6}}
                    <div class="sheet-desc">*Right Wing Weapon Group is destroyed.*</div>
                {{/rollBetween() Aerospace_figther_crit 5 6}}

                {{#rollTotal() Aerospace_figther_crit 7}}
                    <div class="sheet-desc">*Engine: Engine shielding is damaged. –1 maximum Movement. Add +2 Heat tokens at the end of the unit’s next Narration. A second hit destroys the engine, which destroys the aerospace fighter.*</div>
                {{/rollTotal() Aerospace_figther_crit 7}}

                {{#rollBetween() Aerospace_figther_crit 8 9}}
                    <div class="sheet-desc">*Left Wing Weapon Group is destroyed.*</div>
                {{/rollBetween() Aerospace_figther_crit 8 9}}

                {{#rollTotal() Aerospace_figther_crit 10}}
                    <div class="sheet-desc">*Ammo explosion: unit is destroyed.*</div>
                {{/rollTotal() Aerospace_figther_crit 10}}

                {{#rollTotal() Aerospace_figther_crit 11}}
                    <div class="sheet-desc">*Bomb: Carried bomb is rendered useless; bomb does not explode.*</div>
                {{/rollTotal() Aerospace_figther_crit 11}}

                {{#rollTotal() Aerospace_figther_crit 12}}
                    <div class="sheet-desc">*Cockpit: Pilot takes 3 Physical damage.*</div>
                {{/rollTotal() Aerospace_figther_crit 12}}

            {{/rollTotal() Hardware_select 3}}

            {{#desc}}
                <div class="sheet-desc">{{desc}}</div>
            {{/desc}}
        </div>

    </div>
</rolltemplate>


<script type="text/worker">

    //Script to asign the value of Physical/Fatigue Condition Monitoring
    const stats = ['str','wil'];
    stats.forEach(stat => {
        on(`change:${stat} sheet:opened`, () => {
            getAttrs([stat], values => {
                let stat_value = parseInt(values[stat],0)||1;
                if (stat_value == 1) {
                    cpmax = 10;
                } else if (stat_value == 2) {
                    cpmax = 11;
                } else if (stat_value == 3) {
                    cpmax = 12;
                } else if (stat_value == 4) {
                    cpmax = 13;
                } else {
                    cpmax = 14;
                }
                setAttrs({
                    [`${stat}-pips-max`]: cpmax
                });
            });
        });
    });

    //Health-Armor-Structure-Condition-Movement Max Value Script
    const bodyparts = ['personal-armor', 'str-pips', 'wil-pips',
    'mech-movement', 'combat-vehicle-movement','aerospace-fighter-movement','personal-vehicle-movement','personal-vehicle-durability',
    'head-armor', 'head-structure', 'torso-armor', 'torso-structure', 'right-arm-armor', 'right-arm-structure', 'right-leg-armor', 'right-leg-structure', 'left-arm-armor', 'left-arm-structure', 'left-leg-armor', 'left-leg-structure',
    'cv-front-armor', 'cv-front-structure','cv-turret-armor', 'cv-turret-structure', 'left-cv-side-armor' , 'left-cv-side-structure', 'right-cv-side-armor' , 'right-cv-side-structure', 'cv-rear-armor', 'cv-rear-structure',
    'af-nose-armor', 'right-af-wing-armor', 'left-af-wing-armor','af-aft-armor', 'af-structure',
    'pv-front-armor', 'pv-front-structure', 'left-pv-side-armor' , 'left-pv-side-structure', 'right-pv-side-armor' , 'right-pv-side-structure', 'pv-rear-armor', 'pv-rear-structure',];
    bodyparts.forEach(part => {
            let partmax = part.replace('right-', '');
            partmax = partmax.replace('left-', '');
            partmax = partmax + "-max";
        on(`change:${part} change:${partmax}`, () => {
            getAttrs([part,partmax], values => {
                let max = +values[partmax] || 0;
                let current = +values[part] || 0;
                let newcurrent = current;
                if(newcurrent > max) newcurrent = max;
                else if (newcurrent < 0) newcurrent = 0;
                if (newcurrent !== current) 
                    setAttrs({
                        [part]: newcurrent
                    });
            });
        });
    });

    // Armor-Structure-Condition-Movement Default Value Script
    const bodypartsmax = [ 'mech-movement', 'combat-vehicle-movement', 'aerospace-fighter-movement', 'personal-vehicle-movement',
    'head-armor', 'head-structure', 'torso-armor', 'torso-structure', 'arm-armor', 'arm-structure', 'leg-armor', 'leg-structure',
    'cv-front-armor', 'cv-front-structure','cv-turret-armor', 'cv-turret-structure', 'cv-side-armor' , 'cv-side-structure', 'cv-rear-armor', 'cv-rear-structure',
    'af-nose-armor','af-wing-armor', 'af-aft-armor', 'af-structure',
    'pv-front-armor', 'pv-front-structure', 'pv-side-armor' , 'pv-side-structure', 'pv-rear-armor', 'pv-rear-structure',];
    bodypartsmax.forEach(max => {
        on(`change:${max}-max`, () => {
            getAttrs([`${max}-max`], values => {
               let score = +values[`${max}-max`] || 0;
               let output = {};
               if(max.startsWith('arm') || max.startsWith('leg')|| max.startsWith('side',3)|| max.startsWith('wing',3) ) {
                    output[`left-${max}`] = score;
                    output[`right-${max}`] = score;
                } else {
                   output[max] = score;
                }
                setAttrs(output, {silent:true});
            });
        });
    });


</script>