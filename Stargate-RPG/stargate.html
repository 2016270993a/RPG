
<!-- 
<div>
    <button type="action" name="act_character" >Character</button>
    <button type="action" name="act_journal" >Journal</button>
    <button type="action" name="act_configuration" >Configuration</button>
</div>
<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab"  value="character"  />
 -->
<!--  --------------------------------------------------------------------------------- -->
<!--  --------------------------- PAGE 1 ---------------------------------------------- -->
<!--  --------------------------------------------------------------------------------- -->
<div class="sheet-character">

<!-- NAME SECTION -->
  <div class="name section">

  </div>


<!-- ATTRIBUTES SECTION -->

  <div class="attr section columnflex nowrap spaced center">
    <div class="stat"><input name="attr_str" type="number" value=""></div>
    <div class="stat"><input name="attr_dex" type="number" value=""></div>
    <div class="stat"><input name="attr_con" type="number" value=""></div>
    <div class="stat"><input name="attr_wis" type="number" value=""></div>
    <div class="stat"><input name="attr_int" type="number" value=""></div>
    <div class="stat"><input name="attr_cha" type="number" value=""></div>
    
  </div>

<!-- Skills (20)-->
  <div class="skills section">
    
  </div>

<!-- hp -->
  <div class="hp">
    <div class="section"></div>
    <div class="section"></div>
  </div>

<!-- condition -->
  <div class="condition section">
    
  </div>

<!-- prof -->
  <div class="prof">
    <div class="section"></div>
    <div class="section"></div>
    <div class="section"></div>
  </div>

<!-- ac -->
  <div class="ac">
    <div class="section"></div>
    <div class="section"></div>
  </div>

<!-- speed -->
  <div class="speed">
    <div class="section"></div>
    <div class="section"></div>
  </div>

<!-- saves -->
  <div class="saves section">
    
  </div>

<!-- ammo -->
  <div class="ammo">
    <div class="section"></div>
    <div class="section"></div>
    <div class="section"></div>
    <div class="section"></div>
  </div>

<!-- attacks -->
  <div class="attacks section">
    
  </div>

</div>

<!--  --------------------------------------------------------------------------------- -->
<!--  --------------------------- PAGE 2 ---------------------------------------------- -->
<!--  --------------------------------------------------------------------------------- -->
<div class="sheet-journal">

</div>

<!--  --------------------------------------------------------------------------------- -->
<!--  --------------------------- PAGE 3 ---------------------------------------------- -->
<!--  --------------------------------------------------------------------------------- -->
<div class="sheet-config">
    <h2>Config/Settings</h2>
    <span>Sheet Config/Settings goes here</span> 
</div>

<!--  --------------------------------------------------------------------------------- -->
<!--  --------------------------- Sheet workers --------------------------------------- -->
<!--  --------------------------------------------------------------------------------- -->

<input name="attr_str_mod" type="hidden" value="0">
<input name="attr_dex_mod" type="hidden" value="0">
<input name="attr_con_mod" type="hidden" value="0">
<input name="attr_wis_mod" type="hidden" value="0">
<input name="attr_int_mod" type="hidden" value="0">
<input name="attr_cha_mod" type="hidden" value="0">

<script type="text/worker">

// Tab management
/*
const buttonlist = ["character","journal","configuration"];
buttonlist.forEach(button => {
    on(`clicked:${button}`, function() {
        setAttrs({
            sheetTab: button
        });
    });
});*/


// Calculate Stat modifier
const int = score => parseInt(score, 10) || 0;
const stats = ["str", "dex", "con", "wis", "int", "cha"];
stats.forEach(stat => {
    on(`change:${stat}`, () => {
        getAttrs([stat], values => {
            const stat_base = int(values[stat]);
            //console.log(stat_base);
            let stat_mod = 0;
            if (stat_base >= 30) stat_mod = "+10";
            else if (stat_base >= 28) stat_mod = "+9";
            else if (stat_base >= 26) stat_mod = "+8";
            else if (stat_base >= 24) stat_mod = "+7";
            else if (stat_base >= 22) stat_mod = "+6";
            else if (stat_base >= 20) stat_mod = "+5";
            else if (stat_base >= 18) stat_mod = "+4";
            else if (stat_base >= 16) stat_mod = "+3";
            else if (stat_base >= 14) stat_mod = "+2";
            else if (stat_base >= 12) stat_mod = "+1";
            else if (stat_base >= 10) stat_mod = "0";
            else if (stat_base >= 8) stat_mod = "-1";
            else if (stat_base >= 6) stat_mod = "-2";
            else if (stat_base >= 4) stat_mod = "-3";
            else if (stat_base >= 2) stat_mod = "-4";
            else if (stat_base <= 1) stat_mod = "-5";
            else stat_mod = "0";
            
            setAttrs({
                [`${stat}_mod`]: stat_mod
            });
        });
    });
});

</script>