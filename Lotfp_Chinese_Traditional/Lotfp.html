<div class='sheet-2colrow'>
    <div class='sheet-col sheet-col-1 sheet-noborder'>
         <!-- LOGO -->
         <img src="http://i.imgur.com/uwl3LKE.jpg" class="sheet-logo" />
    </div>
    <div class='sheet-col sheet-col-2 sheet-noborder'>
         <!-- Header Content -->
         <div class="sheet-row">
             姓名：<input type="text" class="attr_info attr_bottom_line" name="attr_name">
         </div>
         <div class="sheet-row">
             <input type="text" class="attr_info3" name="attr_class">
             <input type="text" class="attr_info3" name="attr_level">
             <input type="text" class="attr_info3" name="attr_alignment">
             <span class="attr_info3">職業</span>
             <span class="attr_info3">等級</span>
             <span class="attr_info3">陣營</span>
         </div>
         <div class="sheet-row">
             <input type="text" class="attr_info2" name="attr_age">
             <input type="text" class="attr_info1" name="attr_sex">
             <input type="text" class="attr_info3" name="attr_xp">
             <input type="text" class="attr_info3" name="attr_nextxp">
             <span class="attr_info2">年齡</span>
             <span class="attr_info1">性別</span>
             <span class="attr_info3">目前經驗值</span>
             <span class="attr_info3">升級經驗值</span>
        </div>
    </div>
</div>
<div class='sheet-2colrow'>
    <div class='sheet-col sheet-col-1 sheet-col-border'>
        <!-- ABILITIES -->
        <h3>屬性</h3>
        <div class='attr_block'>
            <div class='sheet-ability-column-value'>
                魅力
                <input type="text" class="attr_ability_value" name="attr_cha" value="10">
            </div>
            <div class='sheet-ability-column-modifier'>
                <input type="number" class="attr_ability_modifier" name="attr_ChaMod" value="(round(@{cha}*@{cha}*@{cha}*0.002831-@{cha}*@{cha}*0.08918+1.164*@{cha}-5.667))" disabled="true" /> 
                <span class="attr_subtext">召募追隨者、忠誠度</span>   
            </div>
            <div class='sheet-ability-column-roll'>
               <button class="sheet-ability-button" type='roll' value='&{template:lotfp_check} {{name=魅力}} {{abilityroll=[[1d20+[[@{ChaMod}]]]]}}' name="roll_ChaCheck"></button>
            </div>
        </div>
        <div class='attr_block'>
            <div class='sheet-ability-column-value'>
                體質
                <input type="text" class="attr_ability_value" name="attr_con" value="10">
            </div>
            <div class='sheet-ability-column-modifier'>
                <input type="number" class="attr_ability_modifier" name="attr_ConMod" value="(round(@{con}*@{con}*@{con}*0.002831-@{con}*@{con}*0.08918+1.164*@{con}-5.667))" disabled="true" /> 
                <span class="attr_subtext">生命值、每日旅行距離</span>   
            </div>
            <div class='sheet-ability-column-roll'>
               <button class="sheet-ability-button" type='roll' value='&{template:lotfp_check} {{name=體質}} {{abilityroll=[[1d20+[[@{ConMod}]]]]}}' name="roll_ConCheck"></button>
            </div>
        </div>
        
        <div class='attr_block'>
            <div class='sheet-ability-column-value'>
                敏捷
                <input type="text" class="attr_ability_value" name="attr_dex" value="10">
            </div>
            <div class='sheet-ability-column-modifier'>
                <input type="number" class="attr_ability_modifier" name="attr_DexMod" value="(round(@{dex}*@{dex}*@{dex}*0.002831-@{dex}*@{dex}*0.08918+1.164*@{dex}-5.667))" disabled="true" />
                <span class="attr_subtext">AC、遠程攻擊、先攻</span>
            </div>
            <div class='sheet-ability-column-roll'> 
                <button class="sheet-ability-button" type='roll' value='&{template:lotfp_check} {{name=敏捷}} {{abilityroll=[[1d20+[[@{DexMod}]]]]}}' name="roll_DexCheck"></button>
            </div>
        </div>
        <div class='attr_block'>
            <div class='sheet-ability-column-value'>
                智力
                <input type="text" class="attr_ability_value" name="attr_int" value="10">
            </div>
            <div class='sheet-ability-column-modifier'>
                <input type="number" class="attr_ability_modifier" name="attr_IntMod" value="(round(@{int}*@{int}*@{int}*0.002831-@{int}*@{int}*0.08918+1.164*@{int}-5.667))" disabled="true" />
                <span class="attr_subtext">魔法師法術豁免、語言</span>   
            </div>
            <div class='sheet-ability-column-roll'>
                <button class="sheet-ability-button" type='roll' value='&{template:lotfp_check} {{name=智力}} {{abilityroll=[[1d20+[[@{IntMod}]]]]}}' name="roll_IntCheck"></button>
            </div>
        </div>
        <div class='attr_block'>
            <div class='sheet-ability-column-value'>
                力量
                <input type="text" class="attr_ability_value" name="attr_str" value="10">
            </div>
            <div class='sheet-ability-column-modifier'>
                <input type="number" class="attr_ability_modifier" name="attr_StrMod" value="(round(@{str}*@{str}*@{str}*0.002831-@{str}*@{str}*0.08918+1.164*@{str}-5.667))" disabled="true" />
                <span class="attr_subtext">近戰攻擊、破門</span>
            </div>
            <div class='sheet-ability-column-roll'>
                <button class="sheet-ability-button" type='roll' value='&{template:lotfp_check} {{name=力量}} {{abilityroll=[[1d20+[[@{StrMod}]]]]}}' name="roll_StrCheck"></button>
            </div>
        </div>
        <div class='attr_block'>
            <div class='sheet-ability-column-value'>
                睿智
                <input type="text" class="attr_ability_value" name="attr_wis" value="10">
            </div>
            <div class='sheet-ability-column-modifier'>
                <input type="number" class="attr_ability_modifier" name="attr_WisMod" value="(round(@{wis}*@{wis}*@{wis}*0.002831-@{wis}*@{wis}*0.08918+1.164*@{wis}-5.667))" disabled="true" />
                <span class="attr_subtext">牧師法術豁免</span>   
            </div>
            <div class='sheet-ability-column-roll'>
                <button class="sheet-ability-button" type='roll' value='&{template:lotfp_check} {{name=睿智}} {{abilityroll=[[1d20+[[@{WisMod}]]]]}}' name="roll_WisCheck"></button>
            </div>
        </div>
    </div>
    <div class='sheet-col sheet-col-2'>
        <div class='sheet-col-border'>
            <!-- Saving Throws -->
            <h3>豁免檢定</h3>
            <div class='attr_svblock'>
                <span class="attr_svbtitle">麻痺</span>
                <input type="number" class="savingthrow" name="attr_Paralyze" />
                <span class="attr_svnsubtext">機動性危害（石化、擒拿等）</span>
                <button class="sheet-ability-button" type='roll' value='&{template:lotfp_check} {{name=麻痺}} {{saveroll=[[1d20]]}} {{target=[[@{Paralyze}]]}}' name="roll_ParalyzeCheck"></button>
            </div>
            <div class='attr_svblock'>
                <span class="attr_svbtitle">毒素</span>
                <input type="number" class="savingthrow" name="attr_Poison" /> 
                <span class="attr_svnsubtext">即死、昏迷危害</span>
                <button class="sheet-ability-button" type='roll' value='&{template:lotfp_check} {{name=毒素}} {{saveroll=[[1d20]]}} {{target=[[@{Poison}]]}}' name="roll_PoisonCheck"></button>
            </div>
            <div class='attr_svblock'>
                <span class="attr_svbtitle">噴吐</span>
                <input type="number" class="savingthrow" name="attr_Breath" />
                <span class="attr_svnsubtext">範圍效果</span>
                <button class="sheet-ability-button" type='roll' value='&{template:lotfp_check} {{name=噴吐}} {{saveroll=[[1d20]]}} {{target=[[@{Breath}]]}}' name="roll_BreathCheck"></button>
            </div>
            <div class='attr_svblock'>
                <span class="attr_svbtitle">魔法裝置</span>
                <input type="number" class="savingthrow" name="attr_Device" /> 
                <span class="attr_svnsubtext">物品的法術能力</span>
                <button class="sheet-ability-button" type='roll' value='&{template:lotfp_check} {{name=魔法裝置}} {{saveroll=[[1d20]]}} {{target=[[@{Device}]]}}' name="roll_DeviceCheck"></button>
            </div>
             <div class='attr_svblock'>
                <span class="attr_svbtitle">魔法</span>
                <input type="number" class="savingthrow" name="attr_Magic" /> 
                <span class="attr_svnsubtext">法術能力</span>
                <button class="sheet-ability-button" type='roll' value='&{template:lotfp_check} {{name=魔法}} {{saveroll=[[1d20]]}} {{target=[[@{Magic}]]}}' name="roll_MagicCheck"></button>
            </div>
        </div>
        <div class='sheet-col-border'>
            <div class='attr_svblock'>
                <span class="attr_svbtitle">基礎<br/>攻擊加值</span>
                <input type="text" class="savingthrow" name="attr_BaseAB"  value="1"/>
            </div>
            <div class='attr_svblock'>
                <span class="attr_svbtitle">近戰<br/>攻擊加值</span>
                <input type="text" class="savingthrow" name="attr_MeleeAB" value="(@{BaseAB}+@{StrMod})" disabled="true" />
            </div>
            <div class='attr_svblock'>
                <span class="attr_svbtitle">遠程<br/>攻擊加值</span>
                <input type="text" class="savingthrow" name="attr_RangedAB" value="(@{BaseAB}+@{DexMod})" disabled="true" />
            </div>
            <div class='attr_svblock'>
                <span class="attr_svbtitle">目前<br/>生命值</span>
                <input type="text" class="savingthrow hp" name="attr_HP"/>
            </div>
             <div class='attr_svblock'>
                <span class="attr_svbtitle">最大<br/>生命值</span>
                <input type="text" class="savingthrow hp" name="attr_MaxHP"/>
            </div>
        </div>
        <div class='sheet-col-border'>
            <div class='attr_svblock'>
                <span class="attr_svbtitle">近戰<br/>AC</span>
                <input type="text" class="savingthrow" name="attr_MeleeAC" />
            </div>
            <div class='attr_svblock'>
                <span class="attr_svbtitle">遠程<br/>AC</span>
                <input type="text" class="savingthrow" name="attr_RangedAC" />
            </div>
            <div class='attr_svblock'>
                <span class="attr_svbtitle">持盾<br/>AC</span>
                <input type="text" class="savingthrow" name="attr_WShieldAC" />
            </div>
            <div class='attr_svblock'>
                <span class="attr_svbtitle">遇襲<br/>AC</span>
                <input type="text" class="savingthrow" name="attr_SurprisedAC" />
            </div>
             <div class='attr_svblock'>
                <span class="attr_svbtitle">負重</span>
                <input type="text" class="savingthrow" name="attr_Encumbrance" />
            </div>
        </div>
    </div>
</div>

<!-- WEAPONS -->
<div class='sheet-row sheet-weapons'>
    <div class='sheet-col sheet-col-border'>
        <div class='sheet-col-skills'>
            <h3>武器</h3>
            <span class="attr_weaponname attr_weapon_title">名稱</span>
            <span class="attr_weapontype attr_weapon_title">種類</span>
            <span class="attr_attackBonus attr_weapon_title">攻擊加值</span>
            <span class="attr_damage attr_weapon_title">傷害</span>
            <span class="attr_damage attr_weapon_title">短距</span>
            <span class="attr_damage attr_weapon_title">中距</span>
            <span class="attr_damage attr_weapon_title">長距</span>
            <fieldset class="repeating_wepons">
                <input type="text" name="attr_weaponname" class="attr_bottom_line attr_weaponname"/>
                <select name="attr_weapontype" class="attr_weapontype">
                    <option value="@{MeleeAB}" selected>近戰</option>
                    <option value="@{RangedAB}">遠程</option>
                </select>
                <input type="text" name="attr_attackBonus" value="@{weapontype}" class="attr_bottom_line attr_attackBonus" disabled="true"/>
                <input type="text" name="attr_weapondamage" class="attr_bottom_line attr_damage"/>
                <input type="text" name="attr_shortrange" class="attr_bottom_line attr_damage"/>
                <input type="text" name="attr_mediumrange" class="attr_bottom_line attr_damage"/>
                <input type="text" name="attr_longrange" class="attr_bottom_line attr_damage"/>
                <button class='sheet-attack-button' type='roll' value='&{template:lotfp_check} {{name=@{weaponname}}} {{charactername=@{name}}} {{attackroll=[[1d20+[[@{attackBonus}]]]]}} {{damageroll=[[@{weapondamage}]]}}' name="Rollb_@{weaponname}"></button>
            </fieldset>
        </div>
    </div>
</div>

<!-- SKILLS AND EQUIPMENT -->
<div class='sheet-2colrow'>
    <div class='sheet-col sheet-col-1 sheet-col-border'>
        <div class='sheet-col-skills'>
            <h3>技能</h3>
            <fieldset class="repeating_skills">
                <input type="text" name="attr_skillname" class="attr_bottom_line attr_skillname"/>
                <select name="attr_skillvalue" class="skillvalue">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                </select>
                <button class='sheet-skill-button' type='roll' value='&{template:lotfp_check} {{name=@{skillname}}} {{skillroll=[[1d6]]}} {{target=[[@{skillvalue}]]}}' name="Rollb_@{skillname}"></button>
            </fieldset>
        </div>
    </div>
    <div class='sheet-col sheet-col-2'>
        <div class='sheet-col-border'>
            <h3>裝備</h3>
            <fieldset class="repeating_equipment">
                 <input type="text" name="attr_itemname" class="attr_bottom_line attr_equipment" />
                 <select name="attr_encumbrance" class="encumbrance">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="0">0</option>
                  </select>
            </fieldset>
        </div>
    </div>
</div>


<!-- Templates -->
<rolltemplate class="sheet-rolltemplate-lotfp_check">
    <table>
        {{#abilityroll}}
            <tr><th>{{name}} 檢定</th></tr>
            <tr class="rowcolor"><td><span class="tcat">擲骰： </span>{{abilityroll}}</td></tr>
        {{/abilityroll}}
        {{#attackroll}}
            <tr><th>{{charactername}} 以 {{name}} 攻擊</th></tr>
            <tr class="rowcolor"><td><span class="tcat">攻擊擲骰： </span>{{attackroll}}</td></tr>
            <tr class="rowcolor"><td><span class="tcat">傷害： </span>{{damageroll}}</td></tr>
        {{/attackroll}}
        {{#skillroll}}
            <tr><th>{{name}} 檢定</th></tr>
            <tr class="rowcolor"><td><span class="tcat">擲骰： </span>{{skillroll}} &lt;= {{target}} </td></tr>
            {{#rollLess() skillroll target}}
                    <tr><td class="subheader" style="color:green;"><b>成功！</b></td></tr>
            {{/rollLess() skillroll target}}
            {{#rollTotal() skillroll target}}
                    <tr><td class="subheader" style="color:green;"><b>成功！</b></td></tr>
            {{/rollTotal() skillroll target}}
            {{#rollGreater() skillroll target}}
                    <tr><td class="subheader" style="color:red;"><b>失敗。</b></td></tr>
            {{/rollGreater() skillroll target}}
        {{/skillroll}}
        {{#saveroll}}
            <tr><th>{{name}} 豁免</th></tr>
            <tr class="rowcolor"><td><span class="tcat">Roll: </span>{{saveroll}} &gt; {{target}}</td></tr>
            {{#rollLess() saveroll target}}
                    <tr><td class="subheader" style="color:red;"><b>失敗。</b></td></tr>
            {{/rollLess() saveroll target}}
            {{#rollGreater() saveroll target}}
                    <tr><td class="subheader" style="color:green;"><b>成功！</b></td></tr>
            {{/rollGreater() saveroll target}}
        {{/saveroll}}
    </table>
</rolltemplate>
