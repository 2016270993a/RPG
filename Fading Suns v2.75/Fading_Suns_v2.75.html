<div class="fadingsuns">
    
    <input class="fs-showarrow fs-h2arrow" type="checkbox" name="attr_background_show" value="1" checked />
    <h2 class="fs-clickheader fs-showsect"><label data-i18n="background">Background</label></h2>
    <div class="fs-h2-section fs-nontable fs-core-details fs-wide-readonly">
        <div class="fs-space-evenly">
            <label class="fs-small-label2 fs-autoexpand"><input title="@{character_name}" type="text" name="attr_character_name" /><span data-i18n="name">Name</span><span name="attr_character_name" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{alliance}" type="text" name="attr_alliance"/><span data-i18n="alliance">Alliance</span><span name="attr_alliance" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{title}" type="text" name="attr_title"/><span data-i18n="title">Title</span><span name="attr_title" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{genre}" type="text" name="attr_genre"/><span data-i18n="genre">Genre</span><span name="attr_genre" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{race}" type="text" name="attr_race"/><span data-i18n="race">Race</span><span name="attr_race" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{homeworld}" type="text" name="attr_homeworld"/><span data-i18n="homeworld">Homeworld</span><span name="attr_homeworld" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{age}" type="text" name="attr_age"/><span data-i18n="age">Age</span><span name="attr_age" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{height}" type="text" name="attr_height"/><span data-i18n="char_height">Height</span><span name="attr_height" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{weight}" type="text" name="attr_weight"/><span data-i18n="char_weight">Weight</span><span name="attr_weight" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{hair}" type="text" name="attr_hair"/><span data-i18n="hair">Hair</span><span name="attr_hair" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{eyes}" type="text" name="attr_eyes"/><span data-i18n="eyes">Eyes</span><span name="attr_eyes" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{skintone}" type="text" name="attr_skin"/><span data-i18n="skin">Skin</span><span name="attr_skin" class="fs-autoexpand"></span></label>
        </div>
        <div class="fs-grid-1x2-equal fs-w100">
            <label class="fs-small-label2 fs-wide-textareaparent fs-description"><textarea class="fs-inline-textarea fs-tall-textarea fs-w100" title="@{description}" type="text" name="attr_description" spellcheck="false"></textarea><span data-i18n="description">Description</span></label>
             <div class="fs-col fs-beneficesafflictions fs-h100">
                <div class="fs-row fs-w100">
                    <span class="fs-secondary-table-name" data-i18n="benefices_and_afflictions">Benefices &amp; Afflictions</span>
                </div>
                <div class="fs-col fs-w100">
                    <fieldset class="repeating_beneficesandafflications">
                        <div>
                            <input class="fs-beneficeaffliction" name="attr_benefice_or_affliction" type="text" />
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </div>
    
    <input class="fs-showarrow fs-h2arrow" type="checkbox" name="attr_characteristics_show" value="1" checked />
    <h2 class="fs-clickheader fs-showsect">
        <label data-i18n="characteristics">Characteristics</label>
    </h2>
    <div class="fs-h2-section fs-nontable fs-core-details">
        <div class="fs-grid-characteristics">
            <div class="fs-col fs-grid-characteristics-body">
                <div class="fs-row">
                    <span class="fs-secondary-table-name" data-i18n="body">Body</span>
                </div>
                <div class="fs-characteristic">
                    <button type="roll" class="fs-d20" name="roll_characteristic" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=strength}} {{characteristicName-i18n=^{strength}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{strength}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{strength}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-characteristic-label"><input type="radio" name="attr_selected_characteristic" value="strength" /><span data-i18n="strength">Strength</span></label>
                    <input name="attr_strength" type="number" min=0 value=3 />
                </div>
                <div class="fs-characteristic">
                    <button type="roll" class="fs-d20" name="roll_characteristic" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=dexterity}} {{characteristicName-i18n=^{dexterity}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{dexterity}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{dexterity}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-characteristic-label"><input type="radio" name="attr_selected_characteristic" value="dexterity" /><span data-i18n="dexterity">Dexterity</span></label>
                    <input name="attr_dexterity" type="number" min=0 value=3 />
                </div>
                <div class="fs-characteristic">
                    <button type="roll" class="fs-d20" name="roll_characteristic" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=endurance}} {{characteristicName-i18n=^{endurance}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{endurance}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{endurance}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-characteristic-label"><input type="radio" name="attr_selected_characteristic" value="endurance" /><span data-i18n="endurance">Endurance</span></label>
                    <input name="attr_endurance" type="number" min=0 value=3 />
                </div>
            </div>
            <div class="fs-col fs-grid-characteristics-mind">
                <div class="fs-row">
                    <span class="fs-secondary-table-name" data-i18n="mind">Mind</span>
                </div>
                <div class="fs-characteristic">
                    <button type="roll" class="fs-d20" name="roll_characteristic" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=wits}} {{characteristicName-i18n=^{wits}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{wits}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{wits}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-characteristic-label"><input type="radio" name="attr_selected_characteristic" value="wits" /><span data-i18n="wits">Wits</span></label>
                    <input name="attr_wits" type="number" min=0 value=3 />
                </div>
                <div class="fs-characteristic">
                    <button type="roll" class="fs-d20" name="roll_characteristic" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=perception}} {{characteristicName-i18n=^{perception}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{perception}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{perception}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-characteristic-label"><input type="radio" name="attr_selected_characteristic" value="perception" /><span data-i18n="perception">Perception</span></label>
                    <input name="attr_perception" type="number" min=0 value=3 />
                </div>
                <div class="fs-characteristic">
                    <button type="roll" class="fs-d20" name="roll_characteristic" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=tech}} {{characteristicName-i18n=^{tech}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{tech}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{tech}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-characteristic-label"><input type="radio" name="attr_selected_characteristic" value="tech" /><span data-i18n="tech">Tech</span></label>
                    <input name="attr_tech" type="number" min=0 value=3 />
                </div>
            </div>
            <div class="fs-col fs-grid-characteristics-spirit">
                <div class="fs-row">
                    <span class="fs-secondary-table-name" data-i18n="spirit">Spirit</span>
                </div>
                <div class="fs-characteristic">
                    <button type="roll" class="fs-d20" name="roll_characteristic" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=presence}} {{characteristicName-i18n=^{presence}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{presence}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{presence}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-characteristic-label"><input type="radio" name="attr_selected_characteristic" value="presence" /><span data-i18n="presence">Presence</span></label>
                    <input name="attr_presence" type="number" min=0 value=3 />
                </div>
                <div class="fs-characteristic">
                    <button type="roll" class="fs-d20" name="roll_characteristic" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=will}} {{characteristicName-i18n=^{will}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{will}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{will}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-characteristic-label"><input type="radio" name="attr_selected_characteristic" value="will" /><span data-i18n="will">Will</span></label>
                    <input name="attr_will" type="number" min=0 value=3 />
                </div>
                <div class="fs-characteristic">
                    <button type="roll" class="fs-d20" name="roll_characteristic" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=faith}} {{characteristicName-i18n=^{faith}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{faith}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{faith}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-characteristic-label"><input type="radio" name="attr_selected_characteristic" value="faith" /><span data-i18n="faith">Faith</span></label>
                    <input name="attr_faith" type="number" min=0 value=3 />
                </div>
            </div>
            <div class="fs-grid-characteristics-wyrdvita fs-grid-3x4">
                <label data-i18n="wyrd">Wyrd</label>
                <input type="number" name="attr_wyrd_max" min=0 value=3 />
                <div class="fs-dots">
                    <input type="hidden" name="attr_wyrd" class="fs-dot" value="3" />
                    <button type="action" name="act_wyrd_1" class="fs-dot">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_2" class="fs-dot fs-gt-1">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_3" class="fs-dot fs-gt-1 fs-gt-2">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_4" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_5" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_6" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_7" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_8" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_9" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_10" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_11" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_12" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_13" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_14" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_15" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_16" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_17" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15 fs-gt-1">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_18" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15 fs-gt-16 fs-gt-17">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_19" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15 fs-gt-16 fs-gt-17 fs-gt-18">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_wyrd_20" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15 fs-gt-16 fs-gt-17 fs-gt-18 fs-gt-19">
                        <span class="fs-checked"></span>
                    </button>
                </div>
                <span class="fs-after-wyrd-vita"></span>
                
                <label data-i18n="vitality">Vitality</label>
                <input type="number" name="attr_vitality_max" min=0 value=8 />
                <div class="fs-dots">
                    <input type="hidden" name="attr_vitality" class="fs-dot" value="5" />
                    <button type="action" name="act_vitality_1" class="fs-dot">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_2" class="fs-dot fs-gt-1">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_3" class="fs-dot fs-gt-1 fs-gt-2">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_4" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_5" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_6" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_7" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_8" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_9" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_10" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_11" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_12" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_13" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_14" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_15" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_16" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_17" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15 fs-gt-1">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_18" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15 fs-gt-16 fs-gt-17">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_19" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15 fs-gt-16 fs-gt-17 fs-gt-18">
                        <span class="fs-checked"></span>
                    </button>
                    <button type="action" name="act_vitality_20" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15 fs-gt-16 fs-gt-17 fs-gt-18 fs-gt-19">
                        <span class="fs-checked"></span>
                    </button>
                </div>
                <span class="fs-after-wyrd-vita"></span>
                
                <div>
                </div>
                <div>
                </div>
                <div class="fs-vitality-malus">
                    <span>&nbsp;</span>
                    <span>-10</span>
                    <span>-8</span>
                    <span>-6</span>
                    <span>-4</span>
                    <span>-2</span>
                </div>
            </div>
            <div class="fs-characteristic fs-grid-characteristics-init">
                <button type="roll" class="fs-d20" name="initiative" value="&{template:fs-InitRoll} {{stance=?{Stance|Neutral (default)|Aggressive: +4 to attack goal numbers; -2 to Def|Aggressive: +2d of damage; -2 to Def|Defensive: -4 to all goal numbers; +2 to Def|Full Defense: only move actions; +4 to Def}}} {{roll=[[@{initiative}+1d6 &{tracker}]]}}"></button>
                <label class="fs-characteristic-label fs-20" data-i18n="initiative">Initiative</label>
                <input type="number" name="attr_initiative" min=0 value="6" />
            </div>
            <div class="fs-col fs-grid-characteristics-blessingscurses">
                <div class="fs-row fs-w100">
                    <span class="fs-secondary-table-name" data-i18n="blessings_and_curses">Blessings & Curses</span>
                </div>
                <div class="fs-col fs-w100">
                    <fieldset class="repeating_blessingandcurses">
                        <div>
                            <input class="fs-blessingcurse" name="attr_blessing_or_curse" type="text" />
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </div>

    <input class="fs-showarrow fs-h2arrow" type="checkbox" name="attr_skills_show" value="1" checked />
    <h2 class="fs-clickheader fs-showsect"><label data-i18n="skills">Skills</label></h2>
    <div class="fs-h2-section fs-nontable fs-core-details">
        <div class="fs-grid-skills">
            <div class="fs-skill-col">
                <div class="fs-row fs-skill-family">
                    <span class="fs-secondary-table-name" data-i18n="analytical">Analytical</span>
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=bureaucracy}} {{skillName-i18n=^{bureaucracy}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{bureaucracy}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{bureaucracy}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="bureaucracy">Bureaucracy</span></label>
                    <input type="number" name="attr_bureaucracy" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=investigation}} {{skillName-i18n=^{investigation}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{investigation}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{investigation}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="investigation">Investigation</span></label>
                    <input type="number" name="attr_investigation" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=observe}} {{skillName-i18n=^{observe}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{observe}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{observe}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="observe">Observe</span></label>
                    <input type="number" name="attr_observe" min=0 value=3 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=physick}} {{skillName-i18n=^{physick}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{physick}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{physick}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="physick">Physick</span></label>
                    <input type="number" name="attr_physick" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=warfare}} {{skillName-i18n=^{warfare}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{warfare}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{warfare}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="warfare">Warfare</span></label>
                    <input type="number" name="attr_warfare" min=0 value=0 />
                </div>

                <div class="fs-row fs-skill-family">
                    <span class="fs-secondary-table-name" data-i18n="combat">Combat</span>
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=artifact_melee}} {{skillName-i18n=^{artifact_melee}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{artifact_melee}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{artifact_melee}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="artifact_melee">Artifact Melee</span></label>
                    <input type="number" name="attr_artifact_melee" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=archery}} {{skillName-i18n=^{archery}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{archery}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{archery}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="archery">Archery</span></label>
                    <input type="number" name="attr_archery" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=throwing}} {{skillName-i18n=^{throwing}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{throwing}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{throwing}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="throwing">Throwing</span></label>
                    <input type="number" name="attr_throwing" min=0 value=3 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=energy_guns}} {{skillName-i18n=^{energy_guns}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{energy_guns}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{energy_guns}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="energy_guns">Energy Guns</span></label>
                    <input type="number" name="attr_energy_guns" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=gunnery}} {{skillName-i18n=^{gunnery}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{gunnery}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{gunnery}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="gunnery">Gunnery</span></label>
                    <input type="number" name="attr_gunnery" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=artillery}} {{skillName-i18n=^{artillery}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{artillery}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{artillery}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="artillery">Artillery</span></label>
                    <input type="number" name="attr_artillery" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=fight}} {{skillName-i18n=^{fight}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{fight}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{fight}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="fight">Fight</span></label>
                    <input type="number" name="attr_fight" min=0 value=3 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=demolitions}} {{skillName-i18n=^{demolitions}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{demolitions}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{demolitions}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="demolitions">Demolitions</span></label>
                    <input type="number" name="attr_demolitions" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=melee}} {{skillName-i18n=^{melee}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{melee}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{melee}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="melee">Melee</span></label>
                    <input type="number" name="attr_melee" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=slug_guns}} {{skillName-i18n=^{slug_guns}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{slug_guns}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{slug_guns}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="slug_guns">Slug Guns</span></label>
                    <input type="number" name="attr_slug_guns" min=0 value=0 />
                </div>
            </div>
            <div class="fs-skill-col">
                <div class="fs-row fs-skill-family">
                    <span class="fs-secondary-table-name" data-i18n="control">Control</span>
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=aircraft}} {{skillName-i18n=^{aircraft}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{aircraft}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{aircraft}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="aircraft">Aircraft</span></label>
                    <input type="number" name="attr_aircraft" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=beastcraft}} {{skillName-i18n=^{beastcraft}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{beastcraft}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{beastcraft}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="beastcraft">Beastcraft</span></label>
                    <input type="number" name="attr_beastcraft" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=landcraft}} {{skillName-i18n=^{landcraft}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{landcraft}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{landcraft}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="landcraft">Landcraft</span></label>
                    <input type="number" name="attr_landcraft" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=spacecraft}} {{skillName-i18n=^{spacecraft}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{spacecraft}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{spacecraft}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="spacecraft">Spacecraft</span></label>
                    <input type="number" name="attr_spacecraft" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=watercraft}} {{skillName-i18n=^{watercraft}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{watercraft}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{watercraft}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="watercraft">Watercraft</span></label>
                    <input type="number" name="attr_watercraft" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=ride}} {{skillName-i18n=^{ride}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{ride}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{ride}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="ride">Ride</span></label>
                    <input type="number" name="attr_ride" min=0 value=0 />
                </div>

                <div class="fs-row fs-skill-family">
                    <span class="fs-secondary-table-name" data-i18n="creative">Creative</span>
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=disguise}} {{skillName-i18n=^{disguise}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{disguise}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{disguise}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="disguise">Disguise</span></label>
                    <input type="number" name="attr_disguise" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=gaming}} {{skillName-i18n=^{gaming}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{gaming}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{gaming}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                    <label class="fs-skill-label"><span data-i18n="gaming">Gaming</span></label>
                    <input type="number" name="attr_gaming" min=0 value=0 />
                </div>
                <div class="fs-col">
                    <fieldset class="repeating_creativeskills">
                        <div class="fs-skill">
                            <button type="roll" class="fs-d20" name="roll_skill" value="&{template:fs-GoalRoll} {{characterName=@{character_name}}} {{characteristicName=@{selected_characteristic}}} {{characteristicName-i18n=@{selected_characteristic_i18n}}} {{skillName=attr_creativeskill_name}} {{skillName-i18n=attr_creativeskill_name} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{selected_characteristic_value}+@{creativeskill_value}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{selected_characteristic_value}+@{creativeskill_value}+?{Bonus/Malus|0},19}kl1]]cf20]]}}"></button>
                            <input class="fs-skill-label" name="attr_creativeskill_name" type="text"></input>
                            <input type="number" name="attr_creative_skill_value" min=0 value=0 />
                        </div>
                    </fieldset>
                </div>

                <div class="fs-row fs-skill-family">
                    <span class="fs-secondary-table-name" data-i18n="lore">Lore</span>
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="beast_lore">Beast Lore</span></label>
                    <input name="attr_beast_lore" type="number" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="faction_lore_phoenix_empire">Faction Lore (Phoenix Empire)</span></label>
                    <input name="attr_faction_lore_phoenix_empire" type="number" min=0 value=3 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="faction_lore_ownalliance">Faction Lore (my alliance)</span></label>
                    <input name="attr_faction_lore_ownalliance" type="number" min=0 value=3 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="jumpweb_lore">Jumpweb Lore</label>
                    <input name="attr_jumpweb_lore" type="number" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="planetary_lore_homeworld">Planetary Lore (my homeworld)</span></label>
                    <input name="attr_planetary_lore_homeworld" type="number" min=0 value=3 />
                </div>
                <div class="fs-col">
                    <fieldset class="repeating_loreskills">
                        <div class="fs-skill">
                            <button type="action" name="act_loreskill-selectskill"></button>
                            <input class="fs-skill-label" name="attr_loreskill_name" type="text" />
                            <input name="attr_loreskill_value" type="number" min=0 value=0 />
                        </div>
                    </fieldset>
                </div>
                
            </div>
            <div class="fs-skill-col">
                
                <div class="fs-row fs-skill-family">
                    <span class="fs-secondary-table-name" data-i18n="malefaction">Malefaction</span>
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="lockpicking">Lockpicking</label>
                    <input type="number" name="attr_lockpicking" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="sleight_of_hand">Sleight of Hand</label>
                    <input type="number" name="attr_sleight_of_hand" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="sneak">Sneak</label>
                    <input type="number" name="attr_sneak" min=0 value=3 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="streetwise">Streetwise</label>
                    <input type="number" name="attr_streetwise" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="torture">Torture</label>
                    <input type="number" name="attr_torture" min=0 value=0 />
                </div>

                <div class="fs-row fs-skill-family">
                    <span class="fs-secondary-table-name" data-i18n="physical">Physical</span>
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="athletics">Athletics</label>
                    <input type="number" name="attr_athletics" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="self_control">Self Control</label>
                    <input type="number" name="attr_self_control" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="survival">Survival</label>
                    <input type="number" name="attr_survival" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="vigor">Vigor</label>
                    <input type="number" name="attr_vigor" min=0 value=3 />
                </div>

                <div class="fs-row fs-skill-family">
                    <span class="fs-secondary-table-name" data-i18n="sciences">Sciences</span>
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="applied_science">Applied Science</label>
                    <input type="number" name="attr_applied_science" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="life_science">Life Science</label>
                    <input type="number" name="attr_life_science" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="social_science">Social Science</label>
                    <input type="number" name="attr_social_science" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="physical_science">Physical Science</label>
                    <input type="number" name="attr_physical_science" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="terraforming">Terraforming</label>
                    <input type="number" name="attr_terraforming" min=0 value=0 />
                </div>
            </div>
            <div class="fs-skill-col">
                <div class="fs-row fs-skill-family">
                    <span class="fs-secondary-table-name" data-i18n="social">Social</span>
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="empathy">Empathy</label>
                    <input type="number" name="attr_empathy" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="etiquette">Etiquette</label>
                    <input type="number" name="attr_etiquette" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="influence">Influence</label>
                    <input type="number" name="attr_influence" min=0 value=3 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="knavery">Knavery</label>
                    <input type="number" name="attr_knavery" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="leadership">Leadership</label>
                    <input type="number" name="attr_leadership" min=0 value=0 />
                </div>
                
                <div class="fs-row fs-skill-family">
                    <span class="fs-secondary-table-name" data-i18n="technical">Technical</span>
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="spacecraft_operations">Spacecraft Operations</label>
                    <input type="number" name="attr_spacecraft_operations" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="tech_redemption">Tech Redemption</label>
                    <input type="number" name="attr_tech_redemption" min=0 value=0 />
                </div>
                <div class="fs-skill">
                    <label class="fs-skill-label"><span data-i18n="think_machine">Think Machine</label>
                    <input type="number" name="attr_think_machine" min=0 value=0 />
                </div>
            </div>
        </div>
    </div>

    <input class="fs-showarrow fs-h2arrow" type="checkbox" name="attr_weapons_armor_and_shield_show" value="1" checked />
    <h2 class="fs-clickheader fs-showsect"><label data-i18n="weapons_armor_and_shield">Weapons, Armor &amp; Shield</label></h2>
    <div class="fs-h2-section fs-nontable fs-core-details fs-wide-readonly">
        
        <div class="fs-weapons">
            <div class="fs-table">
                <span class="fs-table-head"></span>
                <span class="fs-table-head" data-i18n="weapon_name">Weapon</span>
                <span class="fs-table-head" data-i18n="characteristic_s">Charac.</span>
                <span class="fs-table-head" data-i18n="skill_s">Skill</span>
                <span class="fs-table-head" data-i18n="goal_bonus_malus">Goal</span>
                <span class="fs-table-head" data-i18n="damage">Damage</span>
                <span class="fs-table-head" data-i18n="strength_required">Min Str.</span>
                <span class="fs-table-head" data-i18n="weapon_range">Range</span>
                <span class="fs-table-head" data-i18n="weapon_shots">Shots</span>
                <span class="fs-table-head" data-i18n="weapon_rate">Rate</span>
                <span class="fs-table-head" data-i18n="weapon_size">Size</span>
                <span class="fs-table-head" data-i18n="tech_level">TL</span>
            </div>
            <fieldset class="repeating_weapons">
                <div class="fs-table">
                    <input type="hidden" name="attr_weapon_characteristic_value" min="0" />
                    <input type="hidden" name="attr_weapon_skill_value" min="0" />
                    <input type="hidden" name="attr_weapon_csc" value="weapon_csc"/>
                    <button type="roll" class="fs-hidden" name="roll_weapon_csc" value="&{template:fs-GoalRoll} {{title=@{weapon_name}}} {{characterName=@{character_name}}} {{characteristicName=@{weapon_characteristic}}} {{characteristicName-i18n=^{@{weapon_characteristic}}}} {{skillName=@{weapon_skill}}} {{skillName-i18n=^{@{weapon_skill}}}} {{bonus_malus=[[?{Please enter the Bonus/Malus again|0}]]}} {{goal=[[@{weapon_characteristic_value}+@{weapon_skill_value}+?{Please enter the Bonus/Malus again|0}]]}} {{roll=[[1d20cs[[{@{weapon_characteristic_value}+@{weapon_skill_value}+?{Please enter the Bonus/Malus again|0},19}kl1]]cf20]]}} {{critSuccessContinue=1}}"></button>
                    <input type="hidden" name="attr_weapon_cfc" value="weapon_cfc"/>
                    <button type="roll" class="fs-hidden" name="roll_weapon_cfc" value="&{template:fs-GoalRoll} {{title=@{weapon_name}}} {{characterName=@{character_name}}} {{characteristicName=@{weapon_characteristic}}} {{characteristicName-i18n=^{@{weapon_characteristic}}}} {{skillName=@{weapon_skill}}} {{skillName-i18n=^{@{weapon_skill}}}} {{bonus_malus=[[?{Please enter the Bonus/Malus again|0}]]}} {{goal=[[@{weapon_characteristic_value}+@{weapon_skill_value}+?{Please enter the Bonus/Malus again|0}]]}} {{roll=[[1d20cs[[{@{weapon_characteristic_value}+@{weapon_skill_value}+?{Please enter the Bonus/Malus again|0},19}kl1]]cf20]]}} {{critFailureConfirm=1}}"></button>
                    <button type="roll" class="fs-d20" name="roll_weapon_roll" value="&{template:fs-GoalRoll} {{title=@{weapon_name}}} {{characterName=@{character_name}}} {{characteristicName=@{weapon_characteristic}}} {{characteristicName-i18n=^{@{weapon_characteristic}}}} {{skillName=@{weapon_skill}}} {{skillName-i18n=^{@{weapon_skill}}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{weapon_characteristic_value}+@{weapon_skill_value}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{weapon_characteristic_value}+@{weapon_skill_value}+?{Bonus/Malus|0},19}kl1]]cf20]]}} {{csc=@{weapon_csc}}} {{cfc=@{weapon_cfc}}}"></button>
                    <input class="fs-table-cell" type="text" name="attr_weapon_name" />
                    <select class="fs-table-cell" name="attr_weapon_characteristic">
                        <option value="" selected></option>
                        <optgroup label="Body" data-i18n-label="body">
                            <option value="strength" data-i18n="strength">Strength</option>
                            <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                            <option value="endurance" data-i18n="endurance">Endurance</option>
                        </optgroup>
                        <optgroup label="Mind" data-i18n-label="mind">
                            <option value="wits" data-i18n="wits">Wits</option>
                            <option value="perception" data-i18n="perception">Perception</option>
                            <option value="tech" data-i18n="tech">Tech</option>
                        </optgroup>
                        <optgroup label="Spirit" data-i18n-label="spirit">
                            <option value="presence" data-i18n="presence">Presence</option>
                            <option value="will" data-i18n="will">Will</option>
                            <option value="faith" data-i18n="faith">Faith</option>
                        </optgroup>
                    </select>
                    <select class="fs-table-cell" name="attr_weapon_skill">
                        <option value="" selected></option>
                        <optgroup label="Analytical" data-i18n-label="analytical">
                            <option value="bureaucracy" data-i18n="bureaucracy">Bureaucracy</option>
                            <option value="investigation" data-i18n="investigation">Investigation</option>
                            <option value="observe" data-i18n="observe">Observe</option>
                            <option value="physick" data-i18n="physick">Physick</option>
                            <option value="warfare" data-i18n="warfare">Warfare</option>
                        </optgroup>
                        <optgroup label="Combat" data-i18n-label="combat">
                            <option value="artifact_melee" data-i18n="artifact_melee">Artifact melee</option>
                            <option value="archery" data-i18n="archery">Archery</option>
                            <option value="throwing" data-i18n="throwing">Throwing</option>
                            <option value="energy_guns" data-i18n="energy_guns">Energy guns</option>
                            <option value="gunnery" data-i18n="gunnery">Gunnery</option>
                            <option value="artillery" data-i18n="artillery">Artillery</option>
                            <option value="fight" data-i18n="fight">Fight</option>
                            <option value="demolitions" data-i18n="demolitions">Demolitions</option>
                            <option value="melee" data-i18n="melee">Melee</option>
                            <option value="slug_guns" data-i18n="slug_guns">Slug guns</option>
                        </optgroup>
                        <optgroup label="Control" data-i18n-label="control">
                            <option value="aircraft" data-i18n="aircraft">Aircraft</option>
                            <option value="beastcraft" data-i18n="beastcraft">Beastcraft</option>
                            <option value="landcraft" data-i18n="landcraft">Landcraft</option>
                            <option value="spacecraft" data-i18n="spacecraft">Spacecraft</option>
                            <option value="watercraft" data-i18n="watercraft">Watercraft</option>
                            <option value="ride" data-i18n="ride">Ride</option>
                        </optgroup>
                        <optgroup label="Creative" data-i18n-label="creative">
                            <option value="disguise" data-i18n="disguise">Disguise</option>
                            <option value="gaming" data-i18n="gaming">Gaming</option>
                        </optgroup>
                        <optgroup label="Lore" data-i18n-label="lore">
                            <option value="beast_lore" data-i18n="beast_lore">Beast lore</option>
                            <option value="faction_lore_phoenix_empire" data-i18n="faction_lore_phoenix_empire">Faction Lore (Phoenix Empire)</option>
                            <option value="faction_lore_ownalliance" data-i18n="faction_lore_ownalliance">Faction Lore (my alliance)</option>
                            <option value="jumpweb_lore" data-i18n="jumpweb_lore">Jumpweb lore</option>
                            <option value="planetary_lore_homeworld" data-i18n="planetary_lore_homeworld">Planetary Lore (my homeworld)</option>
                        </optgroup>
                        <optgroup label="Malefaction" data-i18n-label="malefaction">
                            <option value="lockpicking" data-i18n="lockpicking">Lockpicking</option>
                            <option value="sleight_of_hand" data-i18n="sleight_of_hand">Sleight of Hand</option>
                            <option value="sneak" data-i18n="sneak">Sneak</option>
                            <option value="streetwise" data-i18n="streetwise">Streetwise</option>
                            <option value="torture" data-i18n="torture">Torture</option>
                        </optgroup>
                        <optgroup label="Physical" data-i18n-label="physical">
                            <option value="athletics" data-i18n="athletics">Athletics</option>
                            <option value="self_control" data-i18n="self_control">Self Control</option>
                            <option value="survival" data-i18n="survival">Survival</option>
                            <option value="vigor" data-i18n="vigor">Vigor</option>
                        </optgroup>
                        <optgroup label="Sciences" data-i18n-label="sciences">
                            <option value="applied_science" data-i18n="applied_science">Applied Science</option>
                            <option value="life_science" data-i18n="life_science">Life Science</option>
                            <option value="social_science" data-i18n="social_science">Social Science</option>
                            <option value="physical_science" data-i18n="physical_science">Physical Science</option>
                            <option value="terraforming" data-i18n="terraforming">Terraforming</option>
                        </optgroup>
                        <optgroup label="Social" data-i18n-label="social">
                            <option value="empathy" data-i18n="empathy">Empathy</option>
                            <option value="etiquette" data-i18n="etiquette">Etiquette</option>
                            <option value="influence" data-i18n="influence">Influence</option>
                            <option value="knavery" data-i18n="knavery">Baratin</option>
                            <option value="leadership" data-i18n="leadership">Commandement</option>
                        </optgroup>
                        <optgroup label="Technical" data-i18n-label="technical">
                            <option value="spacecraft_operations" data-i18n="spacecraft_operations">Spacecraft Operations</option>
                            <option value="tech_redemption" data-i18n="tech_redemption">Tech Redemption</option>
                            <option value="think_machine" data-i18n="think_machine">Think Machine</option>
                        </optgroup>
                    </select>
                    <input class="fs-table-cell" type="text" name="attr_weapon_goal_bonus_malus" />
                    <button type="roll" class="fs-d20" value="&{template:fs-d6Roll} {{name-i18n=@{weapon_name}}} {{roll=[[@{weapon_damage}d6cs<4cf>5<4]]}} {{what-i18n=^{attack_damage}}}"></button>
                    <input class="fs-table-cell" type="text" name="attr_weapon_damage" />
                    <input class="fs-table-cell" type="text" name="attr_weapon_strength_required" />
                    <input class="fs-table-cell" type="text" name="attr_weapon_range" />
                    <input class="fs-table-cell" type="text" name="attr_weapon_shots" />
                    <input class="fs-table-cell" type="text" name="attr_weapon_rate" />
                    <input class="fs-table-cell" type="text" name="attr_weapon_size" />
                    <input class="fs-table-cell" type="number" name="attr_weapon_tech_level" min="0" />
                    <textarea class="fs-notes" name="attr_weapon_notes" data-i18n-placeholder="notes" placeholder="Notes" spellcheck="false"></textarea>
                </div>
            </fieldset>
        </div>

        <div class="fs-armors">
            <div class="fs-table">
                <span class="fs-table-head" data-i18n="armor">Armor</span>
                <span class="fs-table-head" data-i18n="armor_prot_s">Prot.</span>
                <span class="fs-table-head" data-i18n="armor_str_malus_s">Str.</span>
                <span class="fs-table-head" data-i18n="armor_dex_malus_s">Dex.</span>
                <span class="fs-table-head" data-i18n="armor_end_malus_s">End.</span>
                <span class="fs-table-head" data-i18n="armor_init_malus_s">Init.</span>
                <span class="fs-table-head" data-i18n="tech_level">TL</span>
            </div>
            <fieldset class="repeating_armors">
                <div class="fs-table">
                    <input class="fs-table-cell" type="text" name="attr_armor_name" />
                    <button type="roll" class="fs-d20" value="&{template:fs-d6Roll} {{name-i18n=@{armor_name}}} {{roll=[[@{armor_prot}d6cs<4cf>5<4]]}} {{what-i18n=^{mitigated_damage}}}"></button>
                    <input class="fs-table-cell" type="text" name="attr_armor_prot" />
                    <input class="fs-table-cell" type="text" name="attr_armor_str_malus" />
                    <input class="fs-table-cell" type="text" name="attr_armor_dex_malus" />
                    <input class="fs-table-cell" type="text" name="attr_armor_end_malus" />
                    <input class="fs-table-cell" type="text" name="attr_armor_init_malus" />
                    <input class="fs-table-cell" type="number" name="attr_armor_tech_level" min="0" />
                    <textarea class="fs-notes" name="attr_armor_notes" data-i18n-placeholder="notes" placeholder="Notes" spellcheck="false"></textarea>
                </div>
            </fieldset>
        </div>

        <div class="fs-shield-props fs-grid-1x6">
            <label class="fs-small-label2 fs-autoexpand"><input title="@{energy_shield_name}" type="text" name="attr_energy_shield_name"/><span data-i18n="energy_shield_name">Energy shield</span><span name="attr_energy_shield_name" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand fs-shield-impact"><input title="@{energy_shield_impact}" type="text" name="attr_energy_shield_impact"/><span data-i18n="energy_shield_impact">Impact</span><span name="attr_energy_shield_impact" class="fs-autoexpand"></span></label>
            /
            <label class="fs-small-label2 fs-autoexpand fs-shield-force"><input title="@{energy_shield_force}" type="text" name="attr_energy_shield_force"/><span data-i18n="energy_shield_force">Force</span><span name="attr_energy_shield_force" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand fs-energy-shield-charges"><input title="@{energy_shield|max}" type="number" name="attr_energy_shield_max" min="0" /><span data-i18n="energy_shield_charges">Charges</span><span name="attr_energy_shield_max" class="fs-autoexpand"></span></label>
            <div class="fs-dots">
                <input type="hidden" name="attr_energy_shield" class="fs-dot" value="0" />
                <button type="action" name="act_energy_shield_1" class="fs-dot">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_2" class="fs-dot fs-gt-1">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_3" class="fs-dot fs-gt-1 fs-gt-2">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_4" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_5" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_6" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_7" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_8" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_9" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_10" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_11" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_12" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_13" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_14" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_15" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_16" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_17" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15 fs-gt-1">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_18" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15 fs-gt-16 fs-gt-17">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_19" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15 fs-gt-16 fs-gt-17 fs-gt-18">
                    <span class="fs-checked"></span>
                </button>
                <button type="action" name="act_energy_shield_20" class="fs-dot fs-gt-1 fs-gt-2 fs-gt-3 fs-gt-4 fs-gt-5 fs-gt-6 fs-gt-7 fs-gt-8 fs-gt-9 fs-gt-10 fs-gt-11 fs-gt-12 fs-gt-13 fs-gt-14 fs-gt-15 fs-gt-16 fs-gt-17 fs-gt-18 fs-gt-19">
                    <span class="fs-checked"></span>
                </button>
            </div>
        </div>

    </div>
    
    <input class="fs-showarrow fs-h2arrow" type="checkbox" name="attr_combat_actions_show" value="1" checked />
    <h2 class="fs-clickheader fs-showsect"><label data-i18n="fighting_styles">Fighting styles</label></h2>
    <div class="fs-h2-section fs-nontable fs-core-details fs-wide-readonly">
        
        <div class="fs-combatactions">
            <div class="fs-table">
                <span class="fs-table-head" data-i18n="fighting_style">Fighting style</span>
                <span class="fs-table-head" data-i18n="combat_action_name">Stance/Action</span>
                <span class="fs-table-head" data-i18n="notes">Notes</span>
            </div>
            <fieldset class="repeating_combatactions">
                <div class="fs-table">
                    <input class="fs-table-cell" type="text" name="attr_combat_action_style" />
                    <input class="fs-table-cell" type="text" name="attr_combat_action_name" />
                    <input class="fs-table-cell" type="text" name="attr_combat_action_notes" />
                </div>
            </fieldset>
        </div>
    </div>

    <input class="fs-showarrow fs-h2arrow" type="checkbox" name="attr_psi_show" value="1" checked />
    <h2 class="fs-clickheader fs-showsect"><label data-i18n="psi">Psi</label></h2>
    <div class="fs-h2-section fs-nontable fs-core-details fs-wide-readonly">
        <div class="fs-space-evenly">
            <label class="fs-small-label2 fs-autoexpand"><input title="@{psi}" type="number" name="attr_psi" value="0" min="0" /><span data-i18n="psi">Psi</span><span name="attr_psi" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{psi_stigmata}" type="text" name="attr_psi_stigmata" /><span data-i18n="stigmata">Stigmata</span><span name="attr_psi_stigmata" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{urge}" type="number" name="attr_urge" value="0" min="0" /><span data-i18n="urge">Urge</span><span name="attr_urge" class="fs-autoexpand"></span></label>
        </div>
        
        <div class="fs-psipowers">
            <div class="fs-table">
                <span class="fs-table-head"></span>
                <span class="fs-table-head fs-table-text" data-i18n="psi_path">Path</span>
                <span class="fs-table-head" data-i18n="level_s">Lvl</span>
                <span class="fs-table-head" data-i18n="power_name">Power</span>
                <span class="fs-table-head" data-i18n="characteristic_s">Charac.</span>
                <span class="fs-table-head" data-i18n="skill_s">Skill</span>
                <span class="fs-table-head" data-i18n="power_range">Range</span>
                <span class="fs-table-head" data-i18n="power_duration">Duration</span>
                <span class="fs-table-head" data-i18n="wyrd">Wyrd</span>
            </div>
            <fieldset class="repeating_psipowers">
                <div class="fs-table">
                    <input type="hidden" name="attr_power_characteristic_value" min="0" />
                    <input type="hidden" name="attr_power_skill_value" min="0" />
                    <input type="hidden" name="attr_power_csc" value="power_csc"/>
                    <button type="roll" class="fs-hidden" name="roll_power_csc" value="&{template:fs-GoalRoll} {{title=@{power_name}}} {{characterName=@{character_name}}} {{characteristicName=@{power_characteristic}}} {{characteristicName-i18n=^{@{power_characteristic}}}} {{skillName=@{power_skill}}} {{skillName-i18n=^{@{power_skill}}}} {{bonus_malus=[[?{Please enter the Bonus/Malus again|0}]]}} {{goal=[[@{power_characteristic_value}+@{power_skill_value}+?{Please enter the Bonus/Malus again|0}]]}} {{roll=[[1d20cs[[{@{power_characteristic_value}+@{power_skill_value}+?{Please enter the Bonus/Malus again|0},19}kl1]]cf20]]}} {{critSuccessContinue=1}}"></button>
                    <input type="hidden" name="attr_power_cfc" value="power_cfc"/>
                    <button type="roll" class="fs-hidden" name="roll_power_cfc" value="&{template:fs-GoalRoll} {{title=@{power_name}}} {{characterName=@{character_name}}} {{characteristicName=@{power_characteristic}}} {{characteristicName-i18n=^{@{power_characteristic}}}} {{skillName=@{power_skill}}} {{skillName-i18n=^{@{power_skill}}}} {{bonus_malus=[[?{Please enter the Bonus/Malus again|0}]]}} {{goal=[[@{power_characteristic_value}+@{power_skill_value}+?{Please enter the Bonus/Malus again|0}]]}} {{roll=[[1d20cs[[{@{power_characteristic_value}+@{power_skill_value}+?{Please enter the Bonus/Malus again|0},19}kl1]]cf20]]}} {{critFailureConfirm=1}}"></button>
                    <button type="roll" class="fs-d20" name="roll_power_roll" value="&{template:fs-GoalRoll} {{title=@{power_name}}} {{characterName=@{character_name}}} {{characteristicName=@{power_characteristic}}} {{characteristicName-i18n=^{@{power_characteristic}}}} {{skillName=@{power_skill}}} {{skillName-i18n=^{@{power_skill}}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{power_characteristic_value}+@{power_skill_value}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{power_characteristic_value}+@{power_skill_value}+?{Bonus/Malus|0},19}kl1]]cf20]]}} {{csc=@{power_csc}}} {{cfc=@{power_cfc}}}"></button>
                    <input class="fs-table-cell" type="text" name="attr_power_path" />
                    <input class="fs-table-cell" type="number" name="attr_power_level" min="0" />
                    <input class="fs-table-cell" type="text" name="attr_power_name" />
                    <select class="fs-table-cell" name="attr_power_characteristic">
                        <option value="" selected></option>
                        <optgroup label="Body" data-i18n-label="body">
                            <option value="strength" data-i18n="strength">Strength</option>
                            <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                            <option value="endurance" data-i18n="endurance">Endurance</option>
                        </optgroup>
                        <optgroup label="Mind" data-i18n-label="mind">
                            <option value="wits" data-i18n="wits">Wits</option>
                            <option value="perception" data-i18n="perception">Perception</option>
                            <option value="tech" data-i18n="tech">Tech</option>
                        </optgroup>
                        <optgroup label="Spirit" data-i18n-label="spirit">
                            <option value="presence" data-i18n="presence">Presence</option>
                            <option value="will" data-i18n="will">Will</option>
                            <option value="faith" data-i18n="faith">Faith</option>
                        </optgroup>
                    </select>
                    <select class="fs-table-cell" name="attr_power_skill">
                        <option value="" selected></option>
                        <optgroup label="Analytical" data-i18n-label="analytical">
                            <option value="bureaucracy" data-i18n="bureaucracy">Bureaucracy</option>
                            <option value="investigation" data-i18n="investigation">Investigation</option>
                            <option value="observe" data-i18n="observe">Observe</option>
                            <option value="physick" data-i18n="physick">Physick</option>
                            <option value="warfare" data-i18n="warfare">Warfare</option>
                        </optgroup>
                        <optgroup label="Combat" data-i18n-label="combat">
                            <option value="artifact_melee" data-i18n="artifact_melee">Artifact melee</option>
                            <option value="archery" data-i18n="archery">Archery</option>
                            <option value="throwing" data-i18n="throwing">Throwing</option>
                            <option value="energy_guns" data-i18n="energy_guns">Energy guns</option>
                            <option value="gunnery" data-i18n="gunnery">Gunnery</option>
                            <option value="artillery" data-i18n="artillery">Artillery</option>
                            <option value="fight" data-i18n="fight">Fight</option>
                            <option value="demolitions" data-i18n="demolitions">Demolitions</option>
                            <option value="melee" data-i18n="melee">Melee</option>
                            <option value="slug_guns" data-i18n="slug_guns">Slug guns</option>
                        </optgroup>
                        <optgroup label="Control" data-i18n-label="control">
                            <option value="aircraft" data-i18n="aircraft">Aircraft</option>
                            <option value="beastcraft" data-i18n="beastcraft">Beastcraft</option>
                            <option value="landcraft" data-i18n="landcraft">Landcraft</option>
                            <option value="spacecraft" data-i18n="spacecraft">Spacecraft</option>
                            <option value="watercraft" data-i18n="watercraft">Watercraft</option>
                            <option value="ride" data-i18n="ride">Ride</option>
                        </optgroup>
                        <optgroup label="Creative" data-i18n-label="creative">
                            <option value="disguise" data-i18n="disguise">Disguise</option>
                            <option value="gaming" data-i18n="gaming">Gaming</option>
                        </optgroup>
                        <optgroup label="Lore" data-i18n-label="lore">
                            <option value="beast_lore" data-i18n="beast_lore">Beast lore</option>
                            <option value="faction_lore_phoenix_empire" data-i18n="faction_lore_phoenix_empire">Faction Lore (Phoenix Empire)</option>
                            <option value="faction_lore_ownalliance" data-i18n="faction_lore_ownalliance">Faction Lore (my alliance)</option>
                            <option value="jumpweb_lore" data-i18n="jumpweb_lore">Jumpweb lore</option>
                            <option value="planetary_lore_homeworld" data-i18n="planetary_lore_homeworld">Planetary Lore (my homeworld)</option>
                        </optgroup>
                        <optgroup label="Malefaction" data-i18n-label="malefaction">
                            <option value="lockpicking" data-i18n="lockpicking">Lockpicking</option>
                            <option value="sleight_of_hand" data-i18n="sleight_of_hand">Sleight of Hand</option>
                            <option value="sneak" data-i18n="sneak">Sneak</option>
                            <option value="streetwise" data-i18n="streetwise">Streetwise</option>
                            <option value="torture" data-i18n="torture">Torture</option>
                        </optgroup>
                        <optgroup label="Physical" data-i18n-label="physical">
                            <option value="athletics" data-i18n="athletics">Athletics</option>
                            <option value="self_control" data-i18n="self_control">Self Control</option>
                            <option value="survival" data-i18n="survival">Survival</option>
                            <option value="vigor" data-i18n="vigor">Vigor</option>
                        </optgroup>
                        <optgroup label="Sciences" data-i18n-label="sciences">
                            <option value="applied_science" data-i18n="applied_science">Applied Science</option>
                            <option value="life_science" data-i18n="life_science">Life Science</option>
                            <option value="social_science" data-i18n="social_science">Social Science</option>
                            <option value="physical_science" data-i18n="physical_science">Physical Science</option>
                            <option value="terraforming" data-i18n="terraforming">Terraforming</option>
                        </optgroup>
                        <optgroup label="Social" data-i18n-label="social">
                            <option value="empathy" data-i18n="empathy">Empathy</option>
                            <option value="etiquette" data-i18n="etiquette">Etiquette</option>
                            <option value="influence" data-i18n="influence">Influence</option>
                            <option value="knavery" data-i18n="knavery">Baratin</option>
                            <option value="leadership" data-i18n="leadership">Commandement</option>
                        </optgroup>
                        <optgroup label="Technical" data-i18n-label="technical">
                            <option value="spacecraft_operations" data-i18n="spacecraft_operations">Spacecraft Operations</option>
                            <option value="tech_redemption" data-i18n="tech_redemption">Tech Redemption</option>
                            <option value="think_machine" data-i18n="think_machine">Think Machine</option>
                        </optgroup>
                    </select>
                    <input class="fs-table-cell" type="text" name="attr_power_range" />
                    <input class="fs-table-cell" type="text" name="attr_power_duration" />
                    <input class="fs-table-cell" type="text" name="attr_power_wyrdcost" />
                    <textarea class="fs-notes" name="attr_power_notes" data-i18n-placeholder="notes" placeholder="Notes" spellcheck="false"></textarea>
                </div>
            </fieldset>
        </div>
    </div>
    
    <input class="fs-showarrow fs-h2arrow" type="checkbox" name="attr_theurgy_show" value="1" checked />
    <h2 class="fs-clickheader fs-showsect"><label data-i18n="theurgy">Theurgy</label></h2>
    <div class="fs-h2-section fs-nontable fs-core-details fs-wide-readonly">

        <div class="fs-space-evenly">
            <label class="fs-small-label2 fs-autoexpand"><input title="@{theurgy}" type="number" name="attr_theurgy" value="0" min="0" /><span data-i18n="theurgy">Theurgy</span><span name="attr_theurgy" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{theurgy_stigmata}" type="text" name="attr_theurgy_stigmata"/><span data-i18n="stigmata">Stigmata</span><span name="attr_theurgy_stigmata" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{hubris}" type="number" name="attr_hubris" value="0" min="0" /><span data-i18n="hubris">Hubris</span><span name="attr_hubris" class="fs-autoexpand"></span></label>
        </div>
        
        <div class="fs-theurgyrites">
            <div class="fs-table">
                <span class="fs-table-head"></span>
                <span class="fs-table-head" data-i18n="church_sect">Sect</span>
                <span class="fs-table-head" data-i18n="level_s">Lvl</span>
                <span class="fs-table-head" data-i18n="rite_name">Rite</span>
                <span class="fs-table-head" data-i18n="characteristic_s">Charact.</span>
                <span class="fs-table-head" data-i18n="skill_s">Skill</span>
                <span class="fs-table-head" data-i18n="rite_components_s">Compo.</span>
                <span class="fs-table-head" data-i18n="rite_range">Range</span>
                <span class="fs-table-head" data-i18n="rite_duration">Duration</span>
                <span class="fs-table-head" data-i18n="wyrd">Wyrd</span>
            </div>
            <fieldset class="repeating_theurgyrites">
                <div class="fs-table">
                    <input type="hidden" name="attr_rite_characteristic_value" min="0" />
                    <input type="hidden" name="attr_rite_skill_value" min="0" />
                    <input type="hidden" name="attr_rite_csc" value="rite_csc"/>
                    <button type="roll" class="fs-hidden" name="roll_rite_csc" value="&{template:fs-GoalRoll} {{title=@{rite_name}}} {{characterName=@{character_name}}} {{characteristicName=@{rite_characteristic}}} {{characteristicName-i18n=^{@{rite_characteristic}}}} {{skillName=@{rite_skill}}} {{skillName-i18n=^{@{rite_skill}}}} {{bonus_malus=[[?{Please enter the Bonus/Malus again|0}]]}} {{goal=[[@{rite_characteristic_value}+@{rite_skill_value}+?{Please enter the Bonus/Malus again|0}]]}} {{roll=[[1d20cs[[{@{rite_characteristic_value}+@{rite_skill_value}+?{Please enter the Bonus/Malus again|0},19}kl1]]cf20]]}} {{critSuccessContinue=1}}"></button>
                    <input type="hidden" name="attr_rite_cfc" value="rite_cfc"/>
                    <button type="roll" class="fs-hidden" name="roll_rite_cfc" value="&{template:fs-GoalRoll} {{title=@{rite_name}}} {{characterName=@{character_name}}} {{characteristicName=@{rite_characteristic}}} {{characteristicName-i18n=^{@{rite_characteristic}}}} {{skillName=@{rite_skill}}} {{skillName-i18n=^{@{rite_skill}}}} {{bonus_malus=[[?{Please enter the Bonus/Malus again|0}]]}} {{goal=[[@{rite_characteristic_value}+@{rite_skill_value}+?{Please enter the Bonus/Malus again|0}]]}} {{roll=[[1d20cs[[{@{rite_characteristic_value}+@{rite_skill_value}+?{Please enter the Bonus/Malus again|0},19}kl1]]cf20]]}} {{critFailureConfirm=1}}"></button>
                    <button type="roll" class="fs-d20" name="roll_rite_roll" value="&{template:fs-GoalRoll} {{title=@{rite_name}}} {{characterName=@{character_name}}} {{characteristicName=@{rite_characteristic}}} {{characteristicName-i18n=^{@{rite_characteristic}}}} {{skillName=@{rite_skill}}} {{skillName-i18n=^{@{rite_skill}}}} {{bonus_malus=[[?{Bonus/Malus|0}]]}} {{goal=[[@{rite_characteristic_value}+@{rite_skill_value}+?{Bonus/Malus|0}]]}} {{roll=[[1d20cs[[{@{rite_characteristic_value}+@{rite_skill_value}+?{Bonus/Malus|0},19}kl1]]cf20]]}} {{csc=@{rite_csc}}} {{cfc=@{rite_cfc}}}"></button>
                    <input class="fs-table-cell" type="text" name="attr_rite_path" />
                    <input class="fs-table-cell" type="number" name="attr_rite_level" min="0" />
                    <input class="fs-table-cell" type="text" name="attr_rite_name" />
                    <select class="fs-table-cell" name="attr_rite_characteristic">
                        <option value="" selected></option>
                        <optgroup label="Body" data-i18n-label="body">
                            <option value="strength" data-i18n="strength">Strength</option>
                            <option value="dexterity" data-i18n="dexterity">Dexterity</option>
                            <option value="endurance" data-i18n="endurance">Endurance</option>
                        </optgroup>
                        <optgroup label="Mind" data-i18n-label="mind">
                            <option value="wits" data-i18n="wits">Wits</option>
                            <option value="perception" data-i18n="perception">Perception</option>
                            <option value="tech" data-i18n="tech">Tech</option>
                        </optgroup>
                        <optgroup label="Spirit" data-i18n-label="spirit">
                            <option value="presence" data-i18n="presence">Presence</option>
                            <option value="will" data-i18n="will">Will</option>
                            <option value="faith" data-i18n="faith">Faith</option>
                        </optgroup>
                    </select>
                    <select class="fs-table-cell" name="attr_rite_skill">
                        <option value="" selected></option>
                        <optgroup label="Analytical" data-i18n-label="analytical">
                            <option value="bureaucracy" data-i18n="bureaucracy">Bureaucracy</option>
                            <option value="investigation" data-i18n="investigation">Investigation</option>
                            <option value="observe" data-i18n="observe">Observe</option>
                            <option value="physick" data-i18n="physick">Physick</option>
                            <option value="warfare" data-i18n="warfare">Warfare</option>
                        </optgroup>
                        <optgroup label="Combat" data-i18n-label="combat">
                            <option value="artifact_melee" data-i18n="artifact_melee">Artifact melee</option>
                            <option value="archery" data-i18n="archery">Archery</option>
                            <option value="throwing" data-i18n="throwing">Throwing</option>
                            <option value="energy_guns" data-i18n="energy_guns">Energy guns</option>
                            <option value="gunnery" data-i18n="gunnery">Gunnery</option>
                            <option value="artillery" data-i18n="artillery">Artillery</option>
                            <option value="fight" data-i18n="fight">Fight</option>
                            <option value="demolitions" data-i18n="demolitions">Demolitions</option>
                            <option value="melee" data-i18n="melee">Melee</option>
                            <option value="slug_guns" data-i18n="slug_guns">Slug guns</option>
                        </optgroup>
                        <optgroup label="Control" data-i18n-label="control">
                            <option value="aircraft" data-i18n="aircraft">Aircraft</option>
                            <option value="beastcraft" data-i18n="beastcraft">Beastcraft</option>
                            <option value="landcraft" data-i18n="landcraft">Landcraft</option>
                            <option value="spacecraft" data-i18n="spacecraft">Spacecraft</option>
                            <option value="watercraft" data-i18n="watercraft">Watercraft</option>
                            <option value="ride" data-i18n="ride">Ride</option>
                        </optgroup>
                        <optgroup label="Creative" data-i18n-label="creative">
                            <option value="disguise" data-i18n="disguise">Disguise</option>
                            <option value="gaming" data-i18n="gaming">Gaming</option>
                        </optgroup>
                        <optgroup label="Lore" data-i18n-label="lore">
                            <option value="beast_lore" data-i18n="beast_lore">Beast lore</option>
                            <option value="faction_lore_phoenix_empire" data-i18n="faction_lore_phoenix_empire">Faction Lore (Phoenix Empire)</option>
                            <option value="faction_lore_ownalliance" data-i18n="faction_lore_ownalliance">Faction Lore (my alliance)</option>
                            <option value="jumpweb_lore" data-i18n="jumpweb_lore">Jumpweb lore</option>
                            <option value="planetary_lore_homeworld" data-i18n="planetary_lore_homeworld">Planetary Lore (my homeworld)</option>
                        </optgroup>
                        <optgroup label="Malefaction" data-i18n-label="malefaction">
                            <option value="lockpicking" data-i18n="lockpicking">Lockpicking</option>
                            <option value="sleight_of_hand" data-i18n="sleight_of_hand">Sleight of Hand</option>
                            <option value="sneak" data-i18n="sneak">Sneak</option>
                            <option value="streetwise" data-i18n="streetwise">Streetwise</option>
                            <option value="torture" data-i18n="torture">Torture</option>
                        </optgroup>
                        <optgroup label="Physical" data-i18n-label="physical">
                            <option value="athletics" data-i18n="athletics">Athletics</option>
                            <option value="self_control" data-i18n="self_control">Self Control</option>
                            <option value="survival" data-i18n="survival">Survival</option>
                            <option value="vigor" data-i18n="vigor">Vigor</option>
                        </optgroup>
                        <optgroup label="Sciences" data-i18n-label="sciences">
                            <option value="applied_science" data-i18n="applied_science">Applied Science</option>
                            <option value="life_science" data-i18n="life_science">Life Science</option>
                            <option value="social_science" data-i18n="social_science">Social Science</option>
                            <option value="physical_science" data-i18n="physical_science">Physical Science</option>
                            <option value="terraforming" data-i18n="terraforming">Terraforming</option>
                        </optgroup>
                        <optgroup label="Social" data-i18n-label="social">
                            <option value="empathy" data-i18n="empathy">Empathy</option>
                            <option value="etiquette" data-i18n="etiquette">Etiquette</option>
                            <option value="influence" data-i18n="influence">Influence</option>
                            <option value="knavery" data-i18n="knavery">Baratin</option>
                            <option value="leadership" data-i18n="leadership">Commandement</option>
                        </optgroup>
                        <optgroup label="Technical" data-i18n-label="technical">
                            <option value="spacecraft_operations" data-i18n="spacecraft_operations">Spacecraft Operations</option>
                            <option value="tech_redemption" data-i18n="tech_redemption">Tech Redemption</option>
                            <option value="think_machine" data-i18n="think_machine">Think Machine</option>
                        </optgroup>
                    </select>
                    <input class="fs-table-cell" type="text" name="attr_rite_components" />
                    <input class="fs-table-cell" type="text" name="attr_rite_range" />
                    <input class="fs-table-cell" type="text" name="attr_rite_duration" />
                    <input class="fs-table-cell" type="text" name="attr_rite_wyrdcost" />
                    <textarea class="fs-notes" name="attr_rite_notes" data-i18n-placeholder="notes" placeholder="Notes" spellcheck="false"></textarea>
                </div>
            </fieldset>
        </div>
    </div>
    
    <input class="fs-showarrow fs-h2arrow" type="checkbox" name="attr_possessions_show" value="1" checked />
    <h2 class="fs-clickheader fs-showsect"><label data-i18n="possessions">Possessions</label></h2>
    <div class="fs-h2-section fs-nontable fs-core-details fs-wide-readonly">

        <div class="fs-grid-1x2-equal">
            <div class="fs-carried">
                <div class="fs-table">
                    <span class="fs-table-head" data-i18n="carried">Carried</span>
                    <input class="fs-table-cell" title="@{cash}" type="text" name="attr_cash" placeholder="Cash" data-i18n-placeholder="cash" />
                </div>
                <fieldset class="repeating_carried">
                    <div class="fs-table">
                        <input class="fs-table-cell" type="text" name="attr_carried" />
                    </div>
                </fieldset>
            </div>
            
            <div class="fs-owned">
                <div class="fs-table">
                    <span class="fs-table-head" data-i18n="owned">Owned</span>
                    <span class="fs-table-head" data-i18n="location">Location</span>
                </div>
                <fieldset class="repeating_owned">
                    <div class="fs-table">
                        <input class="fs-table-cell" type="text" name="attr_owned_what" />
                        <input class="fs-table-cell" type="text" name="attr_owned_where" />
                    </div>
                </fieldset>
            </div>
        </div>
    </div>
    
    <input class="fs-showarrow fs-h2arrow" type="checkbox" name="attr_experience_show" value="1" checked />
    <h2 class="fs-clickheader fs-showsect"><label data-i18n="experience">Experience</label></h2>
    <div class="fs-h2-section fs-nontable fs-core-details fs-wide-readonly">

        <div class="fs-space-evenly">
            <label class="fs-small-label2 fs-autoexpand"><input title="@{total_xp}" type="number" name="attr_total_xp"/><span data-i18n="total_xp">Total</span><span name="attr_total_xp" class="fs-autoexpand"></span></label>
            <label class="fs-small-label2 fs-autoexpand"><input title="@{unspent_xp}" type="number" name="attr_unspent_xp" readonly /><span data-i18n="unspent_xp">Unspent</span><span name="attr_unspent_xp" class="fs-autoexpand"></span></label>
        </div>
        
        <div class="fs-spentxp">
            <div class="fs-table">
                <span class="fs-table-head" data-i18n="trait">Trait</span>
                <span class="fs-table-head" data-i18n="rank_from">From</span>
                <span class="fs-table-head" data-i18n="rank_to">To</span>
                <span class="fs-table-head" data-i18n="xp_cost">Cost</span>
                <span class="fs-table-head" data-i18n="notes">Notes</span>
            </div>
            <fieldset class="repeating_spentxp">
                <div class="fs-table">
                    <input class="fs-table-cell" type="text" name="attr_spentxp_trait" />
                    <input class="fs-table-cell" type="number" name="attr_spentxp_rank_from" min="0" />
                    <input class="fs-table-cell" type="number" name="attr_spentxp_rank_to" min="0" />
                    <input class="fs-table-cell" type="text" name="attr_spentxp_cost" />
                    <input class="fs-table-cell" type="text" name="attr_spentxp_notes" />
                </div>
            </fieldset>
        </div>
    </div>
    
    <input class="fs-showarrow fs-h2arrow" type="checkbox" name="attr_notes_show" value="1" checked />
    <h2 class="fs-clickheader fs-showsect"><label data-i18n="notes">Notes</label></h2>
    <div class="fs-h2-section fs-nontable fs-core-details fs-wide-readonly">
        <textarea class="fs-inline-textarea fs-supertall-textarea fs-w100" title="@{notes}" type="text" name="attr_notes" spellcheck="false"></textarea>
    </div>

</div>
<!-- CHARACTER SHEET LAYOUT IS OVER  -->

<!-- NOW, ROLL TEMPLATES -->
<div style="display:none">
   
    <rolltemplate class="sheet-rolltemplate-fs-InitRoll">
        <div class="fs-container">
            <div class="fs-header"><h1>Initiative</h1></div>
            <div class="fs-arrow-container"><div class="fs-arrow-right"></div></div>
            <div>{{roll}} - {{stance}}</div>
            {{#^rollTotal() style 0}}
            <div>
                <span data-i18n="fighting_style">Fighting style</span>: {{style}}
            </div>
            {{/^rollTotal() style 0}}
        </div>
    </rolltemplate>
    
    <rolltemplate class="sheet-rolltemplate-fs-d6Roll">
        <div class="fs-container">
            <div class="fs-header"><h1>{{name-i18n}}</h1></div>
            <div class="fs-arrow-container"><div class="fs-arrow-right"></div></div>
            <div>{{roll}} {{what-i18n}}</div>
        </div>
    </rolltemplate>
    
    <rolltemplate class="sheet-rolltemplate-fs-GoalRoll">
        <div class="fs-container">
            {{#skillName}}
                <div class="fs-header"><h1>{{characteristicName-i18n}} + {{skillName-i18n}} {{#rollGreater() bonus_malus -1}}+{{/rollGreater() bonus_malus -1}}{{bonus_malus}}</h1></div>
            {{/skillName}}
            {{^skillName}}
                <div class="fs-header"><h1>{{characteristicName-i18n}} {{#rollGreater() bonus_malus -1}}+{{/rollGreater() bonus_malus -1}}{{bonus_malus}}</h1></div>
            {{/skillName}}

            {{#title}}<div class="fs-header"><h1>[ {{title}} ]</h1>{{/title}}

            <div class="fs-arrow-container"><div class="fs-arrow-right"></div></div>

            {{#^rollGreater() roll goal}}
                {{#^rollGreater() roll 19}} <!-- rolled [1, min(19, goal)] -->
                    {{#critFailureConfirm}}
                        <span class="fs-success fs-actualroll">{{roll}}</span><span> | {{goal}}. </span><span class="fs-failure" data-i18n="noncritical_failure">Non-critical failure.</span>
                    {{/critFailureConfirm}}
                    {{^critFailureConfirm}}
                        {{#rollWasCrit() roll}}  <!-- crit -->
                            <span class="fs-critsuccess fs-actualroll">{{roll}}</span><span> | {{goal}}. </span><span class="fs-critsuccess" data-i18n="critical_success">Critical success!</span>
                        {{/rollWasCrit() roll}}
                        {{#^rollWasCrit() roll}} <!-- not a crit -->
                            <span class="fs-success fs-actualroll">{{roll}}</span><span> | {{goal}}. </span><span class="fs-success" data-i18n="success">Success!</span>
                        {{/^rollWasCrit() roll}}
                        {{#rollTotal() roll 1}}
                            <span class="fs-success">0</span>
                        {{/rollTotal() roll 1}}
                        {{#rollBetween() roll 2 3}}
                            <span class="fs-success">1</span>
                        {{/rollBetween() roll 2 3}}
                        {{#rollBetween() roll 4 5}}
                            <span class="fs-success">2</span>
                        {{/rollBetween() roll 4 5}}
                        {{#rollBetween() roll 6 7}}
                            <span class="fs-success">3</span>
                        {{/rollBetween() roll 6 7}}
                        {{#rollBetween() roll 8 9}}
                            <span class="fs-success">4</span>
                        {{/rollBetween() roll 8 9}}
                        {{#rollBetween() roll 10 11}}
                            <span class="fs-success">5</span>
                        {{/rollBetween() roll 10 11}}
                        {{#rollBetween() roll 12 13}}
                            <span class="fs-success">6</span>
                        {{/rollBetween() roll 12 13}}
                        {{#rollBetween() roll 14 15}}
                            <span class="fs-success">7</span>
                        {{/rollBetween() roll 14 15}}
                        {{#rollBetween() roll 16 17}}
                            <span class="fs-success">8</span>
                        {{/rollBetween() roll 16 17}}
                        {{#rollBetween() roll 18 19}}
                            <span class="fs-success">9</span>
                        {{/rollBetween() roll 18 19}}
                        {{#rollBetween() goal 21 22}}
                        <span class="fs-success"> + 1</span>
                        {{/rollBetween() goal 21 22}}
                        {{#rollBetween() goal 23 24}}
                        <span class="fs-success"> + 2</span>
                        {{/rollBetween() goal 23 24}}
                        {{#rollBetween() goal 25 26}}
                        <span class="fs-success"> + 3</span>
                        {{/rollBetween() goal 25 26}}
                        {{#rollBetween() goal 27 28}}
                        <span class="fs-success"> + 4</span>
                        {{/rollBetween() goal 27 28}}
                        {{#rollBetween() goal 29 30}}
                        <span class="fs-success"> + 5</span>
                        {{/rollBetween() goal 29 30}}
                        {{#rollBetween() goal 31 32}}
                        <span class="fs-success"> + 6</span>
                        {{/rollBetween() goal 31 32}}
                        {{#rollBetween() goal 33 34}}
                        <span class="fs-success"> + 7</span>
                        {{/rollBetween() goal 33 34}}
                        {{#rollBetween() goal 35 36}}
                        <span class="fs-success"> + 8</span>
                        {{/rollBetween() goal 35 36}}
                        {{#rollBetween() goal 37 38}}
                        <span class="fs-success"> + 9</span>
                        {{/rollBetween() goal 37 38}}
                        {{#rollBetween() goal 39 40}}
                        <span class="fs-success"> + 10</span>
                        {{/rollBetween() goal 39 40}}
                        {{#rollGreater() goal 40}}
                        <span class="fs-success"> + (a ton of bonus)</span>
                        {{/rollGreater() goal 40}}
                        {{#critSuccessContinue}}
                            <span class="fs-success"> <span data-i18n="additional_vp">additional VP</span></span>
                        {{/critSuccessContinue}}
                        {{^critSuccessContinue}}
                            <span class="fs-success"> <span data-i18n="victory_points">VP</span></span>
                        {{/critSuccessContinue}}
                        {{#rollWasCrit() roll}}
                            {{#csc}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|{{csc}})</div>
                            {{/csc}}
                            {{^csc}}
                                {{#skillName}}
                                    {{#rollTotal() bonus_malus 0}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skill0)</div>
                                    {{/rollTotal() bonus_malus 0}}
                                    {{#rollTotal() bonus_malus 1}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skill1)</div>
                                    {{/rollTotal() bonus_malus 1}}
                                    {{#rollTotal() bonus_malus 2}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skill2)</div>
                                    {{/rollTotal() bonus_malus 2}}
                                    {{#rollTotal() bonus_malus 3}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skill3)</div>
                                    {{/rollTotal() bonus_malus 3}}
                                    {{#rollTotal() bonus_malus 4}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skill4)</div>
                                    {{/rollTotal() bonus_malus 4}}
                                    {{#rollTotal() bonus_malus 5}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skill5)</div>
                                    {{/rollTotal() bonus_malus 5}}
                                    {{#rollTotal() bonus_malus 6}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skill6)</div>
                                    {{/rollTotal() bonus_malus 6}}
                                    {{#rollTotal() bonus_malus 7}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skill7)</div>
                                    {{/rollTotal() bonus_malus 7}}
                                    {{#rollTotal() bonus_malus 8}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skill8)</div>
                                    {{/rollTotal() bonus_malus 8}}
                                    {{#rollTotal() bonus_malus 9}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skill9)</div>
                                    {{/rollTotal() bonus_malus 9}}
                                    {{#rollTotal() bonus_malus 10}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skill10)</div>
                                    {{/rollTotal() bonus_malus 10}}
                                    {{#rollGreater() bonus_malus 10}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skillr)</div>
                                    {{/rollGreater() bonus_malus 10}}
                                    {{#rollTotal() bonus_malus -1}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skillm1)</div>
                                    {{/rollTotal() bonus_malus -1}}
                                    {{#rollTotal() bonus_malus -2}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skillm2)</div>
                                    {{/rollTotal() bonus_malus -2}}
                                    {{#rollTotal() bonus_malus -3}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skillm3)</div>
                                    {{/rollTotal() bonus_malus -3}}
                                    {{#rollTotal() bonus_malus -4}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skillm4)</div>
                                    {{/rollTotal() bonus_malus -4}}
                                    {{#rollTotal() bonus_malus -5}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skillm5)</div>
                                    {{/rollTotal() bonus_malus -5}}
                                    {{#rollTotal() bonus_malus -6}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skillm6)</div>
                                    {{/rollTotal() bonus_malus -6}}
                                    {{#rollTotal() bonus_malus -7}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skillm7)</div>
                                    {{/rollTotal() bonus_malus -7}}
                                    {{#rollTotal() bonus_malus -8}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skillm8)</div>
                                    {{/rollTotal() bonus_malus -8}}
                                    {{#rollTotal() bonus_malus -9}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skillm9)</div>
                                    {{/rollTotal() bonus_malus -9}}
                                    {{#rollTotal() bonus_malus -10}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skillm10)</div>
                                    {{/rollTotal() bonus_malus -10}}
                                    {{#rollLess() bonus_malus -10}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|skillr)</div>
                                    {{/rollLess() bonus_malus -10}}
                                {{/skillName}}
                                {{^skillName}}
                                    {{#rollTotal() bonus_malus 0}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristic0)</div>
                                    {{/rollTotal() bonus_malus 0}}
                                    {{#rollTotal() bonus_malus 1}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristic1)</div>
                                    {{/rollTotal() bonus_malus 1}}
                                    {{#rollTotal() bonus_malus 2}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristic2)</div>
                                    {{/rollTotal() bonus_malus 2}}
                                    {{#rollTotal() bonus_malus 3}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristic3)</div>
                                    {{/rollTotal() bonus_malus 3}}
                                    {{#rollTotal() bonus_malus 4}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristic4)</div>
                                    {{/rollTotal() bonus_malus 4}}
                                    {{#rollTotal() bonus_malus 5}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristic5)</div>
                                    {{/rollTotal() bonus_malus 5}}
                                    {{#rollTotal() bonus_malus 6}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristic6)</div>
                                    {{/rollTotal() bonus_malus 6}}
                                    {{#rollTotal() bonus_malus 7}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristic7)</div>
                                    {{/rollTotal() bonus_malus 7}}
                                    {{#rollTotal() bonus_malus 8}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristic8)</div>
                                    {{/rollTotal() bonus_malus 8}}
                                    {{#rollTotal() bonus_malus 9}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristic9)</div>
                                    {{/rollTotal() bonus_malus 9}}
                                    {{#rollTotal() bonus_malus 10}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristic10)</div>
                                    {{/rollTotal() bonus_malus 10}}
                                    {{#rollGreater() bonus_malus 10}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristicr)</div>
                                    {{/rollGreater() bonus_malus 10}}
                                    {{#rollTotal() bonus_malus -1}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristicm1)</div>
                                    {{/rollTotal() bonus_malus -1}}
                                    {{#rollTotal() bonus_malus -2}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristicm2)</div>
                                    {{/rollTotal() bonus_malus -2}}
                                    {{#rollTotal() bonus_malus -3}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristicm3)</div>
                                    {{/rollTotal() bonus_malus -3}}
                                    {{#rollTotal() bonus_malus -4}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristicm4)</div>
                                    {{/rollTotal() bonus_malus -4}}
                                    {{#rollTotal() bonus_malus -5}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristicm5)</div>
                                    {{/rollTotal() bonus_malus -5}}
                                    {{#rollTotal() bonus_malus -6}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristicm6)</div>
                                    {{/rollTotal() bonus_malus -6}}
                                    {{#rollTotal() bonus_malus -7}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristicm7)</div>
                                    {{/rollTotal() bonus_malus -7}}
                                    {{#rollTotal() bonus_malus -8}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristicm8)</div>
                                    {{/rollTotal() bonus_malus -8}}
                                    {{#rollTotal() bonus_malus -9}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristicm9)</div>
                                    {{/rollTotal() bonus_malus -9}}
                                    {{#rollTotal() bonus_malus -10}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristicm10)</div>
                                    {{/rollTotal() bonus_malus -10}}
                                    {{#rollLess() bonus_malus -10}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|characteristicr)</div>
                                    {{/rollLess() bonus_malus -10}}
                                {{/skillName}}
                            {{/csc}}
                        {{/rollWasCrit() roll}}
                    {{/critFailureConfirm}}
                {{/^rollGreater() roll 19}}
            {{/^rollGreater() roll goal}}

            {{#rollGreater() roll goal}}
                {{#^rollGreater() roll 19}} <!-- rolled ]goal, 19] -->
                    {{#critFailureConfirm}}
                        <span class="fs-critfailure fs-actualroll">{{roll}}</span><span> | {{goal}}. </span><span class="fs-critfailure" data-i18n="critical_failure">Critical failure.</span>
                    {{/critFailureConfirm}}
                    {{^critFailureConfirm}}
                        {{#critSuccessContinue}}
                            <span class="failure fs-actualroll">{{roll}}</span><span> | {{goal}}. </span><span class="fs-success" data-i18n="the_end">Fin.</span>
                        {{/critSuccessContinue}}
                        {{^critSuccessContinue}}
                            <span class="failure fs-actualroll">{{roll}}</span><span> | {{goal}}. </span><span class="fs-failure" data-i18n="failure">Failure!</span>
                        {{/critSuccessContinue}}
                    {{/critFailureConfirm}}
                {{/^rollGreater() roll 19}}
            {{/rollGreater() roll goal}}

            {{#rollTotal() roll 20}} <!-- rolled a 20 -->
                {{#critFailureConfirm}}
                    <span class="fs-critfailure fs-actualroll">{{roll}}</span><span> | {{goal}}. </span><span class="fs-critfailure" data-i18n="critical_failure">Critical failure.</span>
                {{/critFailureConfirm}}
                {{^critFailureConfirm}}
                    {{#critSuccessContinue}}
                        <span class="failure fs-actualroll">{{roll}}</span><span> | {{goal}}. </span><span class="fs-success" data-i18n="the_end">Fin.</span>
                    {{/critSuccessContinue}}
                    {{^critSuccessContinue}}
                        <span class="fs-critfailure fs-actualroll">{{roll}}</span><span> | {{goal}}. </span><span class="fs-critfailure" data-i18n="critical_failure_q">Critical failure?</span>
                        {{#cfc}}
                            <div class="rolltemplate-fs-button">[<span data-i18n="roll_again">Roll again</span>](~{{characterName}}|{{cfc}})</div>
                        {{/cfc}}
                        {{^cfc}}
                            {{#skillName}}
                                {{#rollTotal() bonus_malus 0}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfc0)</div>
                                {{/rollTotal() bonus_malus 0}}
                                {{#rollTotal() bonus_malus 1}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfc1)</div>
                                {{/rollTotal() bonus_malus 1}}
                                {{#rollTotal() bonus_malus 2}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfc2)</div>
                                {{/rollTotal() bonus_malus 2}}
                                {{#rollTotal() bonus_malus 3}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfc3)</div>
                                {{/rollTotal() bonus_malus 3}}
                                {{#rollTotal() bonus_malus 4}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfc4)</div>
                                {{/rollTotal() bonus_malus 4}}
                                {{#rollTotal() bonus_malus 5}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfc5)</div>
                                {{/rollTotal() bonus_malus 5}}
                                {{#rollTotal() bonus_malus 6}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfc6)</div>
                                {{/rollTotal() bonus_malus 6}}
                                {{#rollTotal() bonus_malus 7}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfc7)</div>
                                {{/rollTotal() bonus_malus 7}}
                                {{#rollTotal() bonus_malus 8}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfc8)</div>
                                {{/rollTotal() bonus_malus 8}}
                                {{#rollTotal() bonus_malus 9}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfc9)</div>
                                {{/rollTotal() bonus_malus 9}}
                                {{#rollTotal() bonus_malus 10}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfc10)</div>
                                {{/rollTotal() bonus_malus 10}}
                                {{#rollGreater() bonus_malus 10}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfc)</div>
                                {{/rollGreater() bonus_malus 10}}
                                {{#rollTotal() bonus_malus -1}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfcm1)</div>
                                {{/rollTotal() bonus_malus -1}}
                                {{#rollTotal() bonus_malus -2}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfcm2)</div>
                                {{/rollTotal() bonus_malus -2}}
                                {{#rollTotal() bonus_malus -3}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfcm3)</div>
                                {{/rollTotal() bonus_malus -3}}
                                {{#rollTotal() bonus_malus -4}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfcm4)</div>
                                {{/rollTotal() bonus_malus -4}}
                                {{#rollTotal() bonus_malus -5}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfcm5)</div>
                                {{/rollTotal() bonus_malus -5}}
                                {{#rollTotal() bonus_malus -6}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfcm6)</div>
                                {{/rollTotal() bonus_malus -6}}
                                {{#rollTotal() bonus_malus -7}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfcm7)</div>
                                {{/rollTotal() bonus_malus -7}}
                                {{#rollTotal() bonus_malus -8}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfcm8)</div>
                                {{/rollTotal() bonus_malus -8}}
                                {{#rollTotal() bonus_malus -9}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfcm9)</div>
                                {{/rollTotal() bonus_malus -9}}
                                {{#rollTotal() bonus_malus -10}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfcm10)</div>
                                {{/rollTotal() bonus_malus -10}}
                                {{#rollLess() bonus_malus -10}}
                                    <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|skillcfc)</div>
                                {{/rollLess() bonus_malus -10}}
                            {{/skillName}}
                            {{^skillName}}
                                {{#rollTotal() bonus_malus 0}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfc0)</div>
                                {{/rollTotal() bonus_malus 0}}
                                {{#rollTotal() bonus_malus 1}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfc1)</div>
                                {{/rollTotal() bonus_malus 1}}
                                {{#rollTotal() bonus_malus 2}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfc2)</div>
                                {{/rollTotal() bonus_malus 2}}
                                {{#rollTotal() bonus_malus 3}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfc3)</div>
                                {{/rollTotal() bonus_malus 3}}
                                {{#rollTotal() bonus_malus 4}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfc4)</div>
                                {{/rollTotal() bonus_malus 4}}
                                {{#rollTotal() bonus_malus 5}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfc5)</div>
                                {{/rollTotal() bonus_malus 5}}
                                {{#rollTotal() bonus_malus 6}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfc6)</div>
                                {{/rollTotal() bonus_malus 6}}
                                {{#rollTotal() bonus_malus 7}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfc7)</div>
                                {{/rollTotal() bonus_malus 7}}
                                {{#rollTotal() bonus_malus 8}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfc8)</div>
                                {{/rollTotal() bonus_malus 8}}
                                {{#rollTotal() bonus_malus 9}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfc9)</div>
                                {{/rollTotal() bonus_malus 9}}
                                {{#rollTotal() bonus_malus 10}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfc10)</div>
                                {{/rollTotal() bonus_malus 10}}
                                {{#rollGreater() bonus_malus 10}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfc)</div>
                                {{/rollGreater() bonus_malus 10}}
                                {{#rollTotal() bonus_malus -1}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfcm1)</div>
                                {{/rollTotal() bonus_malus -1}}
                                {{#rollTotal() bonus_malus -2}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfcm2)</div>
                                {{/rollTotal() bonus_malus -2}}
                                {{#rollTotal() bonus_malus -3}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfcm3)</div>
                                {{/rollTotal() bonus_malus -3}}
                                {{#rollTotal() bonus_malus -4}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfcm4)</div>
                                {{/rollTotal() bonus_malus -4}}
                                {{#rollTotal() bonus_malus -5}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfcm5)</div>
                                {{/rollTotal() bonus_malus -5}}
                                {{#rollTotal() bonus_malus -6}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfcm6)</div>
                                {{/rollTotal() bonus_malus -6}}
                                {{#rollTotal() bonus_malus -7}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfcm7)</div>
                                {{/rollTotal() bonus_malus -7}}
                                {{#rollTotal() bonus_malus -8}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfcm8)</div>
                                {{/rollTotal() bonus_malus -8}}
                                {{#rollTotal() bonus_malus -9}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfcm9)</div>
                                {{/rollTotal() bonus_malus -9}}
                                {{#rollTotal() bonus_malus -10}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfcm10)</div>
                                {{/rollTotal() bonus_malus -10}}
                                {{#rollLess() bonus_malus -10}}
                                <div class="rolltemplate-fs-button">[<span data-i18n="confirm">Confirm</span>](~{{characterName}}|characteristiccfc)</div>
                                {{/rollLess() bonus_malus -10}}
                            {{/skillName}}
                        {{/cfc}}
                    {{/critSuccessContinue}}
                {{/critFailureConfirm}}
            {{/rollTotal() roll 20}}
        </div>
    </rolltemplate>
</div>
<!-- ROLL TEMPLATES DEFINED -->

<!-- NOW, SHEET WORKERS -->
<script type="text/worker">

    const characteristics = {
         body: [ 'strength', 'dexterity', 'endurance' ],
         mind: [ 'wits', 'perception', 'tech' ],
         spirit: [ 'presence', 'will', 'faith' ]
    };
    const all_characteristics = [].concat(Object.values(characteristics).flat());

    const nonrepeating_skills = {
        analytical: ['bureaucracy', 'investigation', 'observe', 'physick', 'warfare'],
        combat: ['artifact_melee', 'archery', 'throwing', 'energy_guns', 'gunnery', 'artillery', 'fight', 'demolitions', 'melee', 'slug_guns'],
        control: ['aircraft', 'beastcraft', 'landcraft', 'spacecraft', 'watercraft', 'ride'],
        creative: ['disguise', 'gaming'],
        lore: ['beast_lore', 'faction_lore_phoenix_empire', 'faction_lore_ownalliance', 'jumpweb_lore', 'planetary_lore_homeworld'],
        malefaction: ['lockpicking', 'sleight_of_hand', 'sneak', 'streetwise', 'torture'],
        physical: ['athletics', 'self_control', 'survival', 'vigor'],
        sciences: ['applied_science', 'life_science', 'social_science', 'physical_science', 'terraforming'],
        social: ['empathy', 'etiquette', 'influence', 'knavery', 'leadership'],
        technical: ['spacecraft_operations', 'tech_redemption', 'think_machine']
    };
    const all_nonrepeating_skills = [].concat(Object.values(nonrepeating_skills).flat());

    const special_repeating_skills = [
      { "section": "weapons", "prefix": "weapon" },
      { "section": "psipowers", "prefix": "power" },
      { "section": "theurgyrites", "prefix": "rite" }
    ];

    
    // used in sheet versioning
    // 'type' must be ['int', 'string']
    const convertAttribute = (getAttrsOj, setAttrsObj, srcAttribute, dstAttribute, allowed_values, translate, type) => {
        let srcValue = getAttrsOj[srcAttribute];
        let dstValue = getAttrsOj[dstAttribute];
        if (!dstValue && srcValue) {
            if (allowed_values instanceof Array) {
                allowed_values.forEach(attrValue => {
                    // migration from free-text (trying with a translation first if enabled) to a specific list of allowed (non language-specific) values
                    if (translate && getTranslationByKey(attrValue).toUpperCase() === srcValue.toUpperCase() ||
                        attrValue.toUpperCase() === srcValue.toUpperCase()) {
                        setAttrsObj[dstAttribute] = attrValue;
                    }
                });
            } else {
                // simple copy of the value of the old attribute to the new one
                setAttrsObj[dstAttribute] = (type === "int" ? parseInt(srcValue) : srcValue);
            }
        }
    };

    // used in sheet versioning
    // 'type' must be ['int', 'string']
    const migrateSimpleAttribute = (srcAttribute, dstAttribute, allowed_values, translate, type) => {
        getAttrs([].concat([srcAttribute, dstAttribute]), getAttrsObj => {
            let setAttrsObj = {};
            convertAttribute(getAttrsObj, setAttrsObj, srcAttribute, dstAttribute, allowed_values, translate, type);
            setAttrs(setAttrsObj);
        });
    };

    // used in sheet versioning
    // 'type' must be ['int', 'string']
    const migrateRepeatingAttribute = (section, srcAttribute, dstAttribute, allowed_values, translate, type) => {
        getSectionIDs(`repeating_${section}`, idArray => {
            const srcAttrArray = idArray.map(id => `repeating_${section}_${id}_${srcAttribute}`);
            const dstAttrArray = idArray.map(id => `repeating_${section}_${id}_${dstAttribute}`);
            getAttrs([].concat(srcAttrArray, dstAttrArray), getAttrsObj => {
                let setAttrsObj = {};
                for (let i = 0; i < idArray.length; ++i) {
                    convertAttribute(getAttrsObj, setAttrsObj,
                                     `repeating_${section}_${idArray[i]}_${srcAttribute}`,
                                     `repeating_${section}_${idArray[i]}_${dstAttribute}`,
                                     allowed_values,
                                     translate,
                                     type);
                }
                setAttrs(setAttrsObj);
            });
        });
    };
    
    const repeatingSum = (destination, section, fields, multiplier = 1, add = 0) => {
        if (!Array.isArray(fields)) fields = [fields];
        getSectionIDs(`repeating_${section}`, idArray => {
            const attrArray = idArray.reduce( (m,id) => [...m, ...(fields.map(field => `repeating_${section}_${id}_${field}`))],[]);
            getAttrs(attrArray, v => {
                // getValue: if not a number, returns 1 if it is 'on' (checkbox), otherwise returns 0..
                const getValue = (section, id, field) => parseFloat(v[`repeating_${section}_${id}_${field}`], 10) || (v[`repeating_${section}_${id}_${field}`] === 'on' ? 1 : 0); 
                const sumTotal = idArray.reduce((total, id) => total + fields.reduce((subtotal,field) => subtotal * getValue(section, id,field),1),0);
                setAttrs({[destination]: sumTotal * multiplier + add});    
            });
        });
    };
    
    on("change:total_xp change:repeating_spentxp:spentxp_cost", function() {
        getAttrs([ "total_xp" ], function(values) {
            let total_xp = Number(values.total_xp);
            repeatingSum("unspent_xp", "spentxp", "spentxp_cost", -1, total_xp);
       });
    });

    on("change:selected_characteristic", function(eventInfo) {
        getAttrs([ "selected_characteristic" ].concat(all_characteristics), function(values) {
            all_characteristics.forEach(charac => {
                if (values.selected_characteristic === charac) {
                    setAttrs({
                        selected_characteristic_i18n: getTranslationByKey(values.selected_characteristic),
                        selected_characteristic_value: values[charac]
                    });
                }
            });
        });
    });

    all_characteristics.forEach( charac => {
        on(`change:${charac}`, function(eventInfo) {
            getAttrs([ "selected_characteristic", `${charac}` ], function(values) {
                if (values.selected_characteristic === charac) {
                    setAttrs({
                        selected_characteristic_value: values[charac]
                    });
                }
            });

            special_repeating_skills.forEach( special_skill => {
                updateGoalNumber(special_skill.section, special_skill.prefix);
            });
        });
    });

    all_nonrepeating_skills.forEach( skill => {
        on(`change:${skill}`, function(eventInfo) {
            special_repeating_skills.forEach( special_skill => {
                updateGoalNumber(special_skill.section, special_skill.prefix);
            });
        });
    });

   const updateGoalNumber = (section, prefix) => {
        getSectionIDs(`repeating_${section}`, idArray => {
            const characteristicArray = idArray.map(id => `repeating_${section}_${id}_${prefix}_characteristic`);
            const characteristicValueArray = idArray.map(id => `repeating_${section}_${id}_${prefix}_characteristic_value`);
            const skillArray = idArray.map(id => `repeating_${section}_${id}_${prefix}_skill`);
            const skillValueArray = idArray.map(id => `repeating_${section}_${id}_${prefix}_skill_value`);
            getAttrs( [].concat(characteristicArray, skillArray), vNames => {
                getAttrs( vNames, vValues => {
                    let setAttrsObj = {};
                    for (let i = 0; i < idArray.length; ++i) {
                        setAttrsObj[characteristicValueArray[i]] = (parseInt(vValues[vNames[characteristicArray[i]]]) || 0);
                        setAttrsObj[skillValueArray[i]] = (parseInt(vValues[vNames[skillArray[i]]]) || 0);
                    }
                    setAttrs(setAttrsObj);
                });
            });
        });
    };

    const refreshCscAndCfcRollButton = (section, csc, cfc) => {
        getSectionIDs(section, function(idArray) {
            let setAttrsObj = {};
            for(var i=0; i < idArray.length; i++) {
                setAttrsObj[`repeating_${section}_${idArray[i]}_${csc}`] = `repeating_${section}_${idArray[i]}_${csc}`;
                setAttrsObj[`repeating_${section}_${idArray[i]}_${cfc}`] = `repeating_${section}_${idArray[i]}_${cfc}`;
            }
            setAttrs(setAttrsObj);
        });
    };

    special_repeating_skills.forEach( special_skill => {
        on(`change:repeating_${special_skill.section}`, eventInfo => {
            updateGoalNumber(special_skill.section, special_skill.prefix);
            refreshCscAndCfcRollButton(special_skill.section, `${special_skill.prefix}_csc`, `${special_skill.prefix}_cfc`);
        });
    });

    on("sheet:opened", function() {

        // contributes to sheet versioning v1.0.0 -> v1.0.1
        migrateRepeatingAttribute( "psipowers", "power_roll_characteristic", "power_characteristic", all_characteristics, true, "string");
        migrateRepeatingAttribute( "psipowers", "power_roll_skill", "power_skill", all_nonrepeating_skills, true, "string");
        migrateRepeatingAttribute( "theurgyrites", "ritual_roll_characteristic", "rite_characteristic", all_characteristics, true, "string");
        migrateRepeatingAttribute( "theurgyrites", "ritual_roll_skill", "rite_skill", all_nonrepeating_skills, true, "string");
        migrateRepeatingAttribute( "theurgyrites", "ritual_path", "rite_path", [], false, "string");
        migrateRepeatingAttribute( "theurgyrites", "ritual_level", "rite_level", [], false, "int");
        migrateRepeatingAttribute( "theurgyrites", "ritual_name", "rite_name", [], false, "string");
        migrateRepeatingAttribute( "theurgyrites", "ritual_components", "rite_components", [], false, "string");
        migrateRepeatingAttribute( "theurgyrites", "ritual_range", "rite_range", [], false, "string");
        migrateRepeatingAttribute( "theurgyrites", "ritual_duration", "rite_duration", [], false, "string");
        migrateRepeatingAttribute( "theurgyrites", "ritual_wyrdcost", "rite_wyrdcost", [], false, "string");
        migrateRepeatingAttribute( "theurgyrites", "ritual_notes", "rite_notes", [], false, "string");

        // contributes to sheet versioning v1.0.1 -> v1.1.0
        updateGoalNumber('psipowers', 'power');
        refreshCscAndCfcRollButton("psipowers", "power_csc", "power_cfc");
        updateGoalNumber('theurgyrites', 'rite');
        refreshCscAndCfcRollButton("theurgyrites", "rite_csc", "rite_cfc");

    });

    const barValues = ["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"];
    const barsWithMaxValues = [ 'wyrd', 'vitality', 'energy_shield' ];

    barsWithMaxValues.forEach( bar => {
        barValues.forEach( value => {
            on(`clicked:${bar}_${value}`, eventInfo => {
                getAttrs( [ bar, `${bar}_max` ], values => {
                    // by default, we assume the user clickde on the to-be value
                    let newValue = parseInt(value);

                    if (newValue > parseInt(values[`${bar}_max`])) {
                        // if the user clicked on a value that is higher than the allowed max, we max the value.
                        newValue = values[`${bar}_max`];
                    } else if (newValue == parseInt(values[bar])) {
                        // if the user clicked on the current value, we assume he/she wants to "unselect" it, i.e. we decrease the value by 1
                        --newValue;
                    }
                    let setAttrsObj = {};
                    setAttrsObj[bar] = newValue;
                    setAttrs(setAttrsObj);
                });
            });

            on(`change:${bar}_max`, eventInfo => {
                getAttrs( [ bar, `${bar}_max` ], values => {
                    let currentValue = parseInt(values[bar]);
                    let maxValue = parseInt(values[`${bar}_max`]);
	                if (currentValue > maxValue) {
                        let setAttrsObj = {};
                        setAttrsObj[bar] = maxValue;
                        setAttrs(setAttrsObj);
	                }
            	});
            });
        });
    });

</script>
<!-- SHEET WORKERS DEFINED -->

<!-- FIN -->
