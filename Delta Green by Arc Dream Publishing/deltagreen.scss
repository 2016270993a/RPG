// FUNCTIONS
//=============================
    @import 'src/scss/_functions';

// MIXINS
//=============================
    @import 'src/scss/_mixins';

// VARIABLES
//=============================
    @import 'src/scss/_variables';

// GLOBAL SETTINGS
//=============================
    @import 'src/scss/_globals';

// REPEATING SECTIONS
//=============================
    @import 'src/scss/_repcontrol';

/* HIDE DIFFERENT SHEET TYPES BY DEFAULT
============================= */
    div.sheet-npc,
    div.sheet-pc,
    div.sheet-settings {
        display: none;
    }

    input.sheet-type[value='npc'] ~ div.sheet-npc,
    input.sheet-type[value='pc'] ~ div.sheet-pc,
    input.sheet-display_string[value*='settings'] ~ div.sheet-settings {
        display: grid;
    }

    input.sheet-display_string[value*='settings'] ~ div.sheet-npc,
    input.sheet-display_string[value*='settings'] ~ div.sheet-pc {
        display: none;
    }

    /* HIGHLIGHT BUTTONS
   ============================= */
    input.sheet-whisper-toggle[value*='gm'] + button[name*='whisper'],
    input.sheet-display_string[value*='settings'] ~ div.sheet-tabs button[name='act_toggle_settings'] {
        @include back-color($gray);
        box-shadow: inset 0px 0px 3px 1px $accent1;
        color     : $accent1;
    } 

/* GRID
============================= */ 
    div.sheet-grid {
        display: inline-grid;
        //grid-column-gap: 0.2em;
        //grid-row-gap   : 0.2em;
    }

    div.sheet-grid-tab-inputs {
        @for $i from 1 through 3 {
            label:nth-of-type(#{$i})  {
                @include grid-area(2, 2, $i, $i);
            }
            span:nth-of-type(#{$i})  {
                @include grid-area(1, 1, $i, $i);
            }
        }
    }

/* TABS & LOGO SECTION
============================= */
    div.sheet-tabs {
        grid-template-columns: 8em 1fr 3em;
        margin-bottom: 0.5%;
        @include back-color($maincolor);

        label > input {
            width: 100%;
        }

        img {
            @include grid-area(1, 2, 3, 2);
        }

        button[name='attr_gm_toggle'] {
            @include grid-area(1, 1, 1, 1);
        }

        button[name='act_toggle_character'] {
            @include grid-area(1, 3, 1, 3);
        }

        button[name='act_toggle_npc'] {
            @include grid-area(2, 3, 2, 3);
        }

        input.sheet-whisper-toggle[value='/w gm'] ~ button > span.sheet-hidden > span.sheet-off,
        input.sheet-whisper-toggle[value=' '] ~ button > span.sheet-hidden > span.sheet-on {
            display: none;
        }
    }

/* GENERIC CLASSES
============================= */
    .sheet-border { border: 0.15em solid $maincolor; }
    .sheet-border-bottom { border-bottom: 0.15em solid $maincolor; }
    .sheet-center { @include text-align(center); }
    .sheet-header-body { grid-template-columns: 3em 1fr; }
    .sheet-italic {font-style: italic;}
    .sheet-margin-left {margin-left: 2%; }
    .sheet-pictos { font-family: $pictos; }

    h2.sheet-aligned-left,
    h3.sheet-aligned-left { 
        margin-left: 0.5em;
        text-align: left;
    }

/* STYLED CHECKBOXES
============================= */
    label.sheet-styled-checkbox {
        input[type='checkbox'] {
            height: 1.5em;
            width: 1.5em;
        } 
    }

    /* NOT USED AT MOMENT 
    button.sheet-pictos {
        @include grid-area(1, 1, 1, 1);
        height: 1.5em;
        width: 1.5em;
        z-index: 2;
    } */

/* NPC SHEET
============================= */
    
/* PC SHEET
============================= */
   div.sheet-pc {
        grid-column-gap: 0.2em;
        grid-row-gap: 0.2em;
        grid-template-columns: 1fr 1fr;

        button[type='roll'] {
            text-align: left;
        }

        h1 {
           font-size: 1em;
           text-align: center;
           transform: rotate(180deg);
        }

        input {
            &[type='text'],
            &[type='number'] {
                width: 100%;
            }

            &[type='text'] {
                text-align: left;
            } 
        }

        div.sheet-section-header {
           @include back-color($maincolor);
           @include grid-area(1, 1, 1, 1);
           text-orientation: sideways;
           writing-mode: vertical-lr;
        }

        div.sheet-vert-line,
        div.sheet-horz-line {
            @include back-color($maincolor);
        }

        div.sheet-horz-line {
            height: 2px;
        }

        /* PERSONAL DATA
        ----------------------------- */
        div.sheet-personal-data {
            grid-column: 1 / 3;

            @import 'src/scss/_section_personal_data';   
        }

        /* STATISTICAL DATA
        ----------------------------- */
        div.sheet-statistical-data {
            @include grid-area(2, 1, 2, 1);

            button[type='roll'],
            div.sheet-derived-attr {
                font-size: 1em;

                span { font-size: 0.8em; }
            }

            h3 {
                display: inline;
                margin-right: 2%;
                text-transform: capitalize;
            }

            //STATISTICS
            div.sheet-section-stats {
                grid-template-columns: 9em 0.155em 2fr 0.155em 1fr 0.155em 14em;

                input[type='number'] { text-align: right; }
                span.sheet-center {  padding-top: 25%; }
                div.sheet-horz-line { grid-column: 1 / 8; }
            }

            //DERIVED ATTRIBUTES
            div.sheet-section-derived {
                div.sheet-section {
                    grid-template-columns: 12em 0.155em 1fr 0.155em 1fr;
                }

                span {
                    padding: 4%;
                }
            }

            //PHYSICAL DESCRIPTION
            div.sheet-section-physical {
                h2 {grid-row: 1 / 1}
                textarea {grid-row: 2 / 2}
            }
        }

        /* PSYCHOLOGICAL DATA
        ----------------------------- */
        div.sheet-pyschological-data {
            @include grid-area(2, 2, 2, 2);
            grid-template-rows: min-content;

            textarea {
                min-height: 11.5em;
            }
            
            div.sheet-section-bonds {
                div.sheet-max-height {
                    max-height: 1.8em;
                }

                div.sheet-section {
                    grid-template-columns: 25em 0.155em 1fr;
                }

                div.sheet-repeating-container {
                    margin-bottom: 2%;
                    min-height: 14.5em;

                    .repcontrol {
                        .repcontrol_add {
                            right: -84%;
                        }
                    }
                }
            }

            div.sheet-incidents-body {
                grid-template-columns: 5em 1fr 1fr 1fr 4em 6em 1fr 1fr 1fr 4em;
                padding-top: 1%;

                h3 { text-transform: capitalize; }
            }
        }

        /* APPLICABLE SKILL SET
        ----------------------------- */
        div.sheet-applicable-skill-sets {
            grid-column: 1 / 3;

            div.sheet-section-body {
                grid-template-columns: 1fr 1fr 1fr;

                @for $i from 1 through 3 {
                    div.sheet-section-skill-col:nth-of-type(#{$i})  {
                        grid-column: #{$i} / #{$i};
                    }
                }

                div.sheet-section-skill-col {
                    grid-template-columns: 2em 15em 0.155em 2fr;

                    &:nth-of-type(1),
                    &:nth-of-type(2) {
                        border-right: 0.15em solid $maincolor;
                    }

                    div.sheet-horz-line {
                        grid-column: 1 / 5;
                    }

                    input[type='checkbox'] {
                        margin-left: 10%;
                        margin-top: 50%;
                    }

                    input[type='number'] { height: 100%; }

                    span {
                        font-size: 0.8em;
                        text-align: center;
                    }

                    button {
                        display: inline;

                        h3 {
                            display: inline;
                            margin-right: 5%;
                            padding-left: 2%;
                        }
                    }

                    label.sheet-custom-label { grid-column: 1 / 5; }

                    textarea {
                        margin-bottom: 0em;
                        margin-left: 1%;
                        min-height: 2em;
                        width: 98%;
                    }

                    div.sheet-repeating-container {
                        grid-column: 1 / 5;
                        input[type='checkbox'] { margin-top: 20%;  }

                        .repcontrol {
                            .repcontrol_add {
                                right: -75%;
                            }
                        }

                        div.sheet-section-repeating {
                            grid-template-columns: 1fr 12.5em 2.5em 0.155em 2fr;
                        }
                    }
                }

                div.sheet-section-directions { grid-column: 1 / 4; }
            }
        }
    
        /* INJURIES
        ----------------------------- */
        div.sheet-injuries {
            grid-column: 1 / 3;

            h1 { grid-row: 1; }
            label { display: inline; }

            div.border-bottom { grid-row: 2; }
        }


        /* EQUIPMENT
        ----------------------------- */
        div.sheet-equipment {
            grid-column: 1 / 3;

            div.sheet-section-weapons {
                grid-template-columns: 8em 0.155em 1fr 0.155em 2fr 0.155em 2fr 0.155em 3fr 0.155em 2fr 0.155em 2fr 0.155em 1fr;
            }

            div.sheet-repeating-container {
                .repcontrol {
                    .repcontrol_add {
                        right: -93%;
                    }
                }
            }
        }


        /* REMARKS
        ----------------------------- */
        div.sheet-remarks {
            grid-column: 1 / 3;

            div.sheet-section-body {
                grid-template-columns: 1fr 0.155em 1fr;


                div.sheet-section-19 {
                    grid-template-columns: 1fr 0.155em 1fr;
                }

                div.sheet-repeating-container {
                    .repcontrol {
                        .repcontrol_add {
                            right: -83%;
                        }
                    }
                }
            }

            div.sheet-section-directions {
                grid-column: 1 / 4;
            }
        }


        /* AUTHORIZING OFFICER
        ----------------------------- */
        div.sheet-authorizing-officer {
            grid-column: 1 / 3;
            grid-template-columns: 1fr 0.155em 1fr;

            h2 { grid-row: 1; }
            label { grid-row: 2; }
        }

        /* BOTTOM DECORATION
        ----------------------------- */
        div.sheet-section-bottom-decor {
            grid-column: 1 / 3;
            grid-template-columns: 3em 1fr 20em 3fr 5em;
            margin-top: 2%;

            span {
                text-transform: uppercase;

                &:nth-of-type(odd) { 
                    color: $maincolor;
                    font-size: 1.5em;
                    font-weight: bolder;
                }

                &:nth-of-type(even) {
                    color: $gray;
                    opacity: 0.8;
                    text-align: center;
                }
            }
        }
    }   

/* SETTINGS SHEET
============================= */
    button[name="act_sheet_select"] {
        height: 2em;
        width: 2em;
    }

/* ACCESSIBILITY ADJUSTMENTS
============================= */
    .sheet-hidden {
        clip     : rect(1px, 1px, 1px, 1px);
        clip-path: inset(50%);
        height   : 1px;
        margin   : -1px;
        overflow : hidden;
        padding  : 0;
        position : absolute;
        width    : 1px;
    }