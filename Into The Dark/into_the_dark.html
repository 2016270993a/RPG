<script type="text/worker">
    on("sheet:opened", function(eventInfo){
        setAttrs({
            rollmodifier: "?{" + getTranslationByKey("modifier") + "|0|1|2|3|-1|-2|-3}",
        });
    });
</script>

<div class="sheet-itd-container">
    <div class="sheet-itd-inner sheet-itd-logo-and-info">
        <table class="sheet-itd-table">
            <tbody>
                <tr>
                    <td><img class="sheet-itd-logo"
                            src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Into%20The%20Dark/images/into_the_dark_logo.png"/>
                    </td>
                    <td>
                        <table class="sheet-itd-table">
                            <tr>
                                <td class="sheet-itd-label-basic-info"><span data-i18n="name">NOMBRE</span>:</td>
                                <td><input name="attr_character_name" type="text" class="sheet-input-basic-info" /></td>
                            </tr>
                            <tr>
                                <td class="sheet-itd-label-basic-info"><span data-i18n="origin">ORIGEN</span>:</td>
                                <td><input name="attr_origin" type="text" class="sheet-input-basic-info" /></td>
                            </tr>
                            <tr>
                                <td class="sheet-itd-label-basic-info"><span data-i18n="training">FORMACIÓN</span>:</td>
                                <td><input name="attr_training" type="text" class="sheet-input-basic-info" /></td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>


    <div class="sheet-itd-inner">
        <table class="sheet-itd-table">
            <tr class="sheet-itd-basic-attribute-cells">
                <td width: 20%;><input type="text" value="0" spellcheck="false" class="sheet-itd-input-basic-attribute" name="attr_body" /></td>
                <td width: 20%;><input type="text" value="0" spellcheck="false" class="sheet-itd-input-basic-attribute" name="attr_determination" /></td>
                <td width: 20%;><input type="text" value="0" spellcheck="false" class="sheet-itd-input-basic-attribute" name="attr_memory" /></td>
                <td width: 20%;><input type="text" value="0" spellcheck="false" class="sheet-itd-input-basic-attribute" name="attr_technology" /></td>
                <td width: 20%;><input type="text" value="0" spellcheck="false" class="sheet-itd-input-basic-attribute" name="attr_violence" /></td>
            </tr>
            <tr class="sheet-itd-basic-attribute-cells" class="sheet-itd-basic-attribute">
                <td><span data-i18n="attr-body">CUERPO</span></td>
                <td><span data-i18n="attr-determination">DETERMINACIÓN</span></td>
                <td><span data-i18n="attr-memory">MEMORIA</span></td>
                <td><span data-i18n="attr-technology">TECNOLOGÍA</span></td>
                <td><span data-i18n="attr-violence">VIOLENCIA</span></td>
            </tr>
            <tr class="sheet-itd-basic-attribute-cells">
                <td><button type="roll" class="sheet-itd-attr-button" name="roll_Body"
                        value="&{template:itd} {{title=@{character_name}}} {{subheader=^{attr-body}}} {{result=[[2d6+@{body}+@{rollmodifier}]]}}"></button>
                </td>
                <td><button type="roll" class="sheet-itd-attr-button" name="roll_Determination"
                        value="&{template:itd} {{title=@{character_name}}} {{subheader=^{attr-determination}}} {{result=[[2d6+@{determination}+@{rollmodifier}]]}}"></button>
                </td>
                <td><button type="roll" class="sheet-itd-attr-button" name="roll_Memory"
                        value="&{template:itd} {{title=@{character_name}}} {{subheader=^{attr-memory}}} {{result=[[2d6+@{memory}+@{rollmodifier}]]}}"></button>
                </td>
                <td><button type="roll" class="sheet-itd-attr-button" name="roll_Technology"
                        value="&{template:itd} {{title=@{character_name}}} {{subheader=^{attr-technology}}} {{result=[[2d6+@{technology}+@{rollmodifier}]]}}"></button>
                </td>
                <td><button type="roll" class="sheet-itd-attr-button" name="roll_Violence"
                        value="&{template:itd} {{title=@{character_name}}} {{subheader=^{attr-violence}}} {{result=[[2d6+@{violence}+@{rollmodifier}]]}}"></button>
                </td>
            </tr>
        </table>
    </div>


    <div class="sheet-itd-black-band">
        <div class="sheet-itd-black-band-text">
            <table class="sheet-itd-table">
                <tr>
                    <td class="sheet-itd-three-columns-td"><span data-i18n="protection">PROTECCIÓN</span> &nbsp;
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_protection" value="0" checked="checked">
                            <span class="sheet-itd-radio-checkmark sheet-zero-color"></span>
                        </label>
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_protection" value="1">
                            <span class="sheet-itd-radio-checkmark sheet-protection-color"></span>
                        </label>
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_protection" value="2">
                            <span class="sheet-itd-radio-checkmark sheet-protection-color"></span>
                        </label>
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_protection" value="3">
                            <span class="sheet-itd-radio-checkmark sheet-protection-color"></span>
                        </label>
                    </td>
                    <td class="sheet-itd-three-columns-td"><span data-i18n="wounds">HERIDAS</span> &nbsp;
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_wounds" value="0" checked="checked">
                            <span class="sheet-itd-radio-checkmark sheet-zero-color"></span>
                        </label>
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_wounds" value="1">
                            <span class="sheet-itd-radio-checkmark sheet-wound-color"></span>
                        </label>
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_wounds" value="2">
                            <span class="sheet-itd-radio-checkmark sheet-wound-color"></span>
                        </label>
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_wounds" value="3">
                            <span class="sheet-itd-radio-checkmark sheet-wound-color"></span>
                        </label>
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_wounds" value="4">
                            <span class="sheet-itd-radio-checkmark sheet-wound-color"></span>
                        </label>
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_wounds" value="5">
                            <span class="sheet-itd-radio-checkmark sheet-wound-color"></span>
                        </label>
                    </td>
                    <td class="sheet-itd-three-columns-td"><span data-i18n="stress">ESTRÉS</span> &nbsp;
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_stress" value="0" checked="checked">
                            <span class="sheet-itd-radio-checkmark sheet-zero-color"></span>
                        </label>
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_stress" value="1">
                            <span class="sheet-itd-radio-checkmark sheet-stress-color"></span>
                        </label>
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_stress" value="2">
                            <span class="sheet-itd-radio-checkmark sheet-stress-color"></span>
                        </label>
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_stress" value="3">
                            <span class="sheet-itd-radio-checkmark sheet-stress-color"></span>
                        </label>
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_stress" value="4">
                            <span class="sheet-itd-radio-checkmark sheet-stress-color"></span>
                        </label>
                        <label class="sheet-itd-radio-container">
                            <input type="radio" name="attr_stress" value="5">
                            <span class="sheet-itd-radio-checkmark sheet-stress-color"></span>
                        </label>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <div class="sheet-itd-marker">
        <span class="sheet-itd-marker-text"><span data-i18n="shell">FUNDA</span></span>
    </div>
    <div class="sheet-itd-inner-text">
        <textarea rows="4" width="100%" spellcheck="false" name="attr_shell"></textarea>
    </div>

    <div class="sheet-itd-marker">
        <span class="sheet-itd-marker-text"><span data-i18n="specializations-and-talens">ESPECIALIZACIONES Y TALENTOS</span></span>
    </div>
    <div class="sheet-itd-inner-text">
        <textarea rows="8" cols="50" spellcheck="false" name="attr_specializations-and-talens"></textarea>
    </div>

    <div class="sheet-itd-marker">
        <span class="sheet-itd-marker-text"><span data-i18n="weapons-and-gear">ARMAS Y EQUIPAMIENTO</span></span>
    </div>
    <div class="sheet-itd-inner-text">
        <textarea rows="6" cols="50" spellcheck="false" name="attr_weapons-and-gear"></textarea>
    </div>

    <div class="sheet-itd-black-band">
        <div class="sheet-itd-black-band-text">
            <span data-i18n="experience">EXPERIENCIA</span> &nbsp;
            <label class="sheet-itd-radio-container">
                <input type="radio" name="attr_experience" value="0" checked="checked">
                <span class="sheet-itd-radio-checkmark sheet-zero-color"></span>
            </label>
            <label class="sheet-itd-radio-container">
                <input type="radio" name="attr_experience" value="1">
                <span class="sheet-itd-radio-checkmark sheet-experience-color"></span>
            </label>
            <label class="sheet-itd-radio-container">
                <input type="radio" name="attr_experience" value="2">
                <span class="sheet-itd-radio-checkmark sheet-experience-color"></span>
            </label>
            <label class="sheet-itd-radio-container">
                <input type="radio" name="attr_experience" value="3">
                <span class="sheet-itd-radio-checkmark sheet-experience-color"></span>
            </label>
            &nbsp;&nbsp;
            <span data-i18n="experience-rule">Cada 3PE, elige una opción y márcala.</span>
        </div>
    </div>


    <div class="sheet-itd-inner">
        <table class="sheet-itd-table">
            <tr>
                <td class="sheet-itd-three-columns-td">
                    <label class="sheet-itd-checkbox-container">
                        <input type="checkbox" name="attr_increment_attr1">
                        <span class="sheet-itd-checkbox-checkmark"></span>
                    </label>
                    <span data-i18n="plus-one-to-attr">+1 en un atributo</span>
                </td>
                <td class="sheet-itd-three-columns-td">
                    <label class="sheet-itd-checkbox-container">
                        <input type="checkbox" name="attr_new_specialization1">
                        <span class="sheet-itd-checkbox-checkmark"></span>
                    </label>
                    <span data-i18n="new-specialization">Una nueva especialización</span>
                </td>
                <td class="sheet-itd-three-columns-td">
                    <label class="sheet-itd-checkbox-container">
                        <input type="checkbox" name="attr_new_talent1">
                        <span class="sheet-itd-checkbox-checkmark"></span>
                    </label>
                    <span data-i18n="new-talent">Un nuevo talento</span>
                </td>
            </tr>
            <tr>
                <td class="sheet-itd-three-columns-td">
                    <label class="sheet-itd-checkbox-container">
                        <input type="checkbox" name="attr_increment_attr2">
                        <span class="sheet-itd-checkbox-checkmark"></span>
                    </label>
                    <span data-i18n="plus-one-to-attr">+1 en un atributo</span>
                </td>
                <td class="sheet-itd-three-columns-td">
                    <label class="sheet-itd-checkbox-container">
                        <input type="checkbox" name="attr_new_specialization2">
                        <span class="sheet-itd-checkbox-checkmark"></span>
                    </label>
                    <span data-i18n="new-specialization">Una nueva especialización</span>
                </td>
                <td class="sheet-itd-three-columns-td">
                    <label class="sheet-itd-checkbox-container">
                        <input type="checkbox" name="attr_new_talent2">
                        <span class="sheet-itd-checkbox-checkmark"></span>
                    </label>
                    <span data-i18n="new-talent">Un nuevo talento</span>
                </td>
            </tr>
            <tr>
                <td class="sheet-itd-three-columns-td">
                    <label class="sheet-itd-checkbox-container">
                        <input type="checkbox" name="attr_increment_attr3">
                        <span class="sheet-itd-checkbox-checkmark"></span>
                    </label>
                    <span data-i18n="plus-one-to-attr">+1 en un atributo</span>
                </td>
                <td class="sheet-itd-three-columns-td">
                    <label class="sheet-itd-checkbox-container">
                        <input type="checkbox" name="attr_new_specialization3">
                        <span class="sheet-itd-checkbox-checkmark"></span>
                    </label>
                    <span data-i18n="new-specialization">Una nueva especialización</span>
                </td>
                <td class="sheet-itd-three-columns-td">
                    <label class="sheet-itd-checkbox-container">
                        <input type="checkbox" name="attr_new_talent3">
                        <span class="sheet-itd-checkbox-checkmark"></span>
                    </label>
                    <span data-i18n="new-talent">Un nuevo talento</span>
                </td>
            </tr>
        </table>
    </div>
</div>



<!-- ROLL TEMPLATE INTO THE DARK-->
<rolltemplate class="sheet-rolltemplate-itd">
    <div class="sheet-rolltemplate-itd-background sheet-rolltemplate-itd-center">
        <div class="sheet-rolltemplate-itd-center sheet-rolltemplate-itd-header">
            {{title}}
        </div>
        <div class="sheet-rolltemplate-itd-center sheet-rolltemplate-itd-subheader">
            {{subheader}}
        </div>
        {{#rollGreater() result 6}}
        <div class="sheet-rolltemplate-itd-center sheet-template-itd-result sheet-template-itd-succeeds">
            {{result}}
        </div>
        {{/rollGreater() result 6}}
        {{#rollLess() result 7}}
        <div class="sheet-rolltemplate-itd-center sheet-template-itd-result sheet-template-itd-misses">
            {{result}}
        </div>
        {{/rollLess() result 7}}
    </div>
</rolltemplate>