- var track = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ]
include ../../data/difficulties
include ../progress/mixins/box

div.vows
  fieldset.repeating_vow
    input(type="text" class="vow-name" name="attr_vow_name")
    div.vows-header
      each difficulty, index in difficulties
        label.difficulty
          if difficulty.checked
            input(type="radio" class="hide" name="attr_rank" value=index checked)
          else
            input(type="radio" class="hide" name="attr_rank" value=index)
          h5=difficulty.text

    div.vow
      div
        label.btn MARK
          input(class="mark-vow hide" type="checkbox" name="attr_mark_progress")
        label.btn CLEAR
          input(class="clear-vow hide" type="checkbox" name="attr_clear_progress")
        each index in track
          select(name=`attr_progress_${index}` class="progress-input")
            +progressBox
        label.btn FULFILL 
          button(
            type="roll"
            class='hide'
            name="rollVow"
            value="&{template:ironsworn_progress} {{progress_type=Vow}} {{header=@{character_name} <em>Fulfill Your Vow</em> }} {{progress_name=@{vow_name}}} {{progress=[[@{vow-filled}]]}} {{challenge1=[[d10]]}} {{challenge2=[[d10]]}}"
          )               
        input(
          type="text"
          class="hide"
          name="attr_vow-filled"
          value="floor((@{progress_0}+@{progress_1}+@{progress_2}+@{progress_3}+@{progress_4}+@{progress_5}+@{progress_6}+@{progress_7}+@{progress_8}+@{progress_9})/4)"
          disabled
        )
  //- h3 Vow Archive
  //- fieldset.repeating_vowarchive
  //-   span(name="attr_vow_name")
