<!-- DO NOT EDIT V20.html, generated from V20.py -->
<h1>Vampire the Masquerade</h1>
<h4>20th Anniversary Edition</h4>

<div class="sheet-3colrow">
    <div class="sheet-col">
        <label>Name:</label><input type="text" name="attr_name"/><br/>
        <label>Player:</label><input type="text" name="attr_player"/><br/>
        <label>Chronicle:</label><input type="text" name="attr_chronicle"/><br/>
    </div>
    <div class="sheet-col">
        <label>Nature:</label><input type="text" name="attr_nature"/><br/>
        <label>Demeanor:</label><input type="text" name="attr_demeanor"/><br/>
        <label>Concept:</label><input type="text" name="attr_concept"/><br/>
    </div>
    <div class="sheet-col">
        <label>Clan:</label>
        <select name="attr_clan">
          <option value="assamite">Assamite</option>
          <option value="brujah">Brujah</option>
          <option value="followers_of_set">Followers_of_set</option>
          <option value="gangrel">Gangrel</option>
          <option value="giovanni">Giovanni</option>
          <option value="lasombra">Lasombra</option>
          <option value="malkavian">Malkavian</option>
          <option value="nosferatu">Nosferatu</option>
          <option value="ravnos">Ravnos</option>
          <option value="toreador">Toreador</option>
          <option value="tremere">Tremere</option>
          <option value="tzimisce">Tzimisce</option>
          <option value="ventrue">Ventrue</option>
          <option value="caitiff">Caitiff</option>
          <option value="werewolf">Werewolf</option>
          <option value="human">Human</option>
          <option value="mage">Mage</option>
          <option value="faerie">Faerie</option>
          <option value="ghost">Ghost</option>
          <option value="demon">Demon</option>
        </select><br/>
        <label>Generation:</label><input type="number" value="13" min="1" max="15" name="attr_generation"/><br/>
        <label>Sire:</label><input type="text" name="attr_sire"/><br/>
    </div>
</div>

<h2>Attributes</h2>
<div class="sheet-3colrow">

    <div class="sheet-col">
        <table>
            <tr>
                <th><h5>Physical</h5></th>
                <th>Base</th>
                <th>Free</th>
                <th>Xp</th>
                <th>Tot</th>
            </tr>
            <tr>
                <th>Strength</th>
                <td><input name="attr_strength_base" type="number" value="1" min="1" max="10" title="strength_base" class="sheet-short"></td>
                <td><input name="attr_strength_free" type="number" value="0" min="0" max="10" title="strength_free" class="sheet-short"></td>
                <td><input name="attr_strength_xp" type="number" value="0" min="0" max="10" title="strength_xp" class="sheet-short"></td>
                <td><input name="attr_strength" type="number" value="@{strength_base} + @{strength_free} + @{strength_xp}" title="strength" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Dexterity</th>
                <td><input name="attr_dexterity_base" type="number" value="1" min="1" max="10" title="dexterity_base" class="sheet-short"></td>
                <td><input name="attr_dexterity_free" type="number" value="0" min="0" max="10" title="dexterity_free" class="sheet-short"></td>
                <td><input name="attr_dexterity_xp" type="number" value="0" min="0" max="10" title="dexterity_xp" class="sheet-short"></td>
                <td><input name="attr_dexterity" type="number" value="@{dexterity_base} + @{dexterity_free} + @{dexterity_xp}" title="dexterity" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Stamina</th>
                <td><input name="attr_stamina_base" type="number" value="1" min="1" max="10" title="stamina_base" class="sheet-short"></td>
                <td><input name="attr_stamina_free" type="number" value="0" min="0" max="10" title="stamina_free" class="sheet-short"></td>
                <td><input name="attr_stamina_xp" type="number" value="0" min="0" max="10" title="stamina_xp" class="sheet-short"></td>
                <td><input name="attr_stamina" type="number" value="@{stamina_base} + @{stamina_free} + @{stamina_xp}" title="stamina" class="sheet-short" disabled="true"></td>
            </tr>
        </table>
    </div>
    <div class="sheet-col">
        <table>
            <tr>
                <th><h5>Social</h5></th>
                <th>Base</th>
                <th>Free</th>
                <th>Xp</th>
                <th>Tot</th>
            </tr>
            <tr>
                <th>Charisma</th>
                <td><input name="attr_charisma_base" type="number" value="1" min="1" max="10" title="charisma_base" class="sheet-short"></td>
                <td><input name="attr_charisma_free" type="number" value="0" min="0" max="10" title="charisma_free" class="sheet-short"></td>
                <td><input name="attr_charisma_xp" type="number" value="0" min="0" max="10" title="charisma_xp" class="sheet-short"></td>
                <td><input name="attr_charisma" type="number" value="@{charisma_base} + @{charisma_free} + @{charisma_xp}" title="charisma" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Manipulation</th>
                <td><input name="attr_manipulation_base" type="number" value="1" min="1" max="10" title="manipulation_base" class="sheet-short"></td>
                <td><input name="attr_manipulation_free" type="number" value="0" min="0" max="10" title="manipulation_free" class="sheet-short"></td>
                <td><input name="attr_manipulation_xp" type="number" value="0" min="0" max="10" title="manipulation_xp" class="sheet-short"></td>
                <td><input name="attr_manipulation" type="number" value="@{manipulation_base} + @{manipulation_free} + @{manipulation_xp}" title="manipulation" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Appearance</th>
                <td><input name="attr_appearance_base" type="number" value="1" min="1" max="10" title="appearance_base" class="sheet-short"></td>
                <td><input name="attr_appearance_free" type="number" value="0" min="0" max="10" title="appearance_free" class="sheet-short"></td>
                <td><input name="attr_appearance_xp" type="number" value="0" min="0" max="10" title="appearance_xp" class="sheet-short"></td>
                <td><input name="attr_appearance" type="number" value="@{appearance_base} + @{appearance_free} + @{appearance_xp}" title="appearance" class="sheet-short" disabled="true"></td>
            </tr>
        </table>
    </div>
    <div class="sheet-col">
        <table>
            <tr>
                <th><h5>Mental</h5></th>
                <th>Base</th>
                <th>Free</th>
                <th>Xp</th>
                <th>Tot</th>
            </tr>
            <tr>
                <th>Perception</th>
                <td><input name="attr_perception_base" type="number" value="1" min="1" max="10" title="perception_base" class="sheet-short"></td>
                <td><input name="attr_perception_free" type="number" value="0" min="0" max="10" title="perception_free" class="sheet-short"></td>
                <td><input name="attr_perception_xp" type="number" value="0" min="0" max="10" title="perception_xp" class="sheet-short"></td>
                <td><input name="attr_perception" type="number" value="@{perception_base} + @{perception_free} + @{perception_xp}" title="perception" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Intelligence</th>
                <td><input name="attr_intelligence_base" type="number" value="1" min="1" max="10" title="intelligence_base" class="sheet-short"></td>
                <td><input name="attr_intelligence_free" type="number" value="0" min="0" max="10" title="intelligence_free" class="sheet-short"></td>
                <td><input name="attr_intelligence_xp" type="number" value="0" min="0" max="10" title="intelligence_xp" class="sheet-short"></td>
                <td><input name="attr_intelligence" type="number" value="@{intelligence_base} + @{intelligence_free} + @{intelligence_xp}" title="intelligence" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Wits</th>
                <td><input name="attr_wits_base" type="number" value="1" min="1" max="10" title="wits_base" class="sheet-short"></td>
                <td><input name="attr_wits_free" type="number" value="0" min="0" max="10" title="wits_free" class="sheet-short"></td>
                <td><input name="attr_wits_xp" type="number" value="0" min="0" max="10" title="wits_xp" class="sheet-short"></td>
                <td><input name="attr_wits" type="number" value="@{wits_base} + @{wits_free} + @{wits_xp}" title="wits" class="sheet-short" disabled="true"></td>
            </tr>
        </table>
    </div>
</div>

<h2>Abilities</h2>
<div class="sheet-3colrow">

    <div class="sheet-col">
        <table>
            <tr>
                <th><h5>Talents</h5></th>
                <th>Base</th>
                <th>Free</th>
                <th>Xp</th>
                <th>Tot</th>
            </tr>
            <tr>
                <th>Alertness</th>
                <td><input name="attr_alertness_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_alertness_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_alertness_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_alertness" type="number" value="@{alertness_base} + @{alertness_free} + @{alertness_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Athletics</th>
                <td><input name="attr_athletics_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_athletics_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_athletics_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_athletics" type="number" value="@{athletics_base} + @{athletics_free} + @{athletics_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Awareness</th>
                <td><input name="attr_awareness_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_awareness_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_awareness_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_awareness" type="number" value="@{awareness_base} + @{awareness_free} + @{awareness_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Brawl</th>
                <td><input name="attr_brawl_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_brawl_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_brawl_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_brawl" type="number" value="@{brawl_base} + @{brawl_free} + @{brawl_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Empathy</th>
                <td><input name="attr_empathy_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_empathy_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_empathy_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_empathy" type="number" value="@{empathy_base} + @{empathy_free} + @{empathy_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Expression</th>
                <td><input name="attr_expression_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_expression_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_expression_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_expression" type="number" value="@{expression_base} + @{expression_free} + @{expression_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Intimidation</th>
                <td><input name="attr_intimidation_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_intimidation_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_intimidation_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_intimidation" type="number" value="@{intimidation_base} + @{intimidation_free} + @{intimidation_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Leadership</th>
                <td><input name="attr_leadership_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_leadership_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_leadership_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_leadership" type="number" value="@{leadership_base} + @{leadership_free} + @{leadership_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Streetwise</th>
                <td><input name="attr_streetwise_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_streetwise_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_streetwise_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_streetwise" type="number" value="@{streetwise_base} + @{streetwise_free} + @{streetwise_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Subterfuge</th>
                <td><input name="attr_subterfuge_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_subterfuge_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_subterfuge_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_subterfuge" type="number" value="@{subterfuge_base} + @{subterfuge_free} + @{subterfuge_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
        </table>
    </div>
    <div class="sheet-col">
        <table>
            <tr>
                <th><h5>Skills</h5></th>
                <th>Base</th>
                <th>Free</th>
                <th>Xp</th>
                <th>Tot</th>
            </tr>
            <tr>
                <th>Animal_ken</th>
                <td><input name="attr_animal_ken_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_animal_ken_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_animal_ken_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_animal_ken" type="number" value="@{animal_ken_base} + @{animal_ken_free} + @{animal_ken_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Crafts</th>
                <td><input name="attr_crafts_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_crafts_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_crafts_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_crafts" type="number" value="@{crafts_base} + @{crafts_free} + @{crafts_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Drive</th>
                <td><input name="attr_drive_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_drive_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_drive_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_drive" type="number" value="@{drive_base} + @{drive_free} + @{drive_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Etiquette</th>
                <td><input name="attr_etiquette_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_etiquette_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_etiquette_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_etiquette" type="number" value="@{etiquette_base} + @{etiquette_free} + @{etiquette_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Firearms</th>
                <td><input name="attr_firearms_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_firearms_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_firearms_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_firearms" type="number" value="@{firearms_base} + @{firearms_free} + @{firearms_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Larceny</th>
                <td><input name="attr_larceny_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_larceny_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_larceny_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_larceny" type="number" value="@{larceny_base} + @{larceny_free} + @{larceny_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Melee</th>
                <td><input name="attr_melee_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_melee_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_melee_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_melee" type="number" value="@{melee_base} + @{melee_free} + @{melee_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Performance</th>
                <td><input name="attr_performance_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_performance_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_performance_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_performance" type="number" value="@{performance_base} + @{performance_free} + @{performance_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Stealth</th>
                <td><input name="attr_stealth_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_stealth_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_stealth_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_stealth" type="number" value="@{stealth_base} + @{stealth_free} + @{stealth_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Survival</th>
                <td><input name="attr_survival_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_survival_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_survival_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_survival" type="number" value="@{survival_base} + @{survival_free} + @{survival_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
        </table>
    </div>
    <div class="sheet-col">
        <table>
            <tr>
                <th><h5>Knowledges</h5></th>
                <th>Base</th>
                <th>Free</th>
                <th>Xp</th>
                <th>Tot</th>
            </tr>
            <tr>
                <th>Academics</th>
                <td><input name="attr_academics_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_academics_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_academics_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_academics" type="number" value="@{academics_base} + @{academics_free} + @{academics_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Computer</th>
                <td><input name="attr_computer_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_computer_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_computer_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_computer" type="number" value="@{computer_base} + @{computer_free} + @{computer_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Finance</th>
                <td><input name="attr_finance_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_finance_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_finance_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_finance" type="number" value="@{finance_base} + @{finance_free} + @{finance_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Investigation</th>
                <td><input name="attr_investigation_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_investigation_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_investigation_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_investigation" type="number" value="@{investigation_base} + @{investigation_free} + @{investigation_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Law</th>
                <td><input name="attr_law_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_law_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_law_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_law" type="number" value="@{law_base} + @{law_free} + @{law_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Medicine</th>
                <td><input name="attr_medicine_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_medicine_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_medicine_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_medicine" type="number" value="@{medicine_base} + @{medicine_free} + @{medicine_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Occult</th>
                <td><input name="attr_occult_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_occult_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_occult_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_occult" type="number" value="@{occult_base} + @{occult_free} + @{occult_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Politics</th>
                <td><input name="attr_politics_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_politics_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_politics_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_politics" type="number" value="@{politics_base} + @{politics_free} + @{politics_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Science</th>
                <td><input name="attr_science_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_science_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_science_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_science" type="number" value="@{science_base} + @{science_free} + @{science_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Technology</th>
                <td><input name="attr_technology_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_technology_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_technology_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_technology" type="number" value="@{technology_base} + @{technology_free} + @{technology_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
        </table>
    </div>
</div>

<h2>Advantages</h2>
<div class="sheet-3colrow">
    <div class="sheet-col">
        <h3>Disciplines</h3>
        <table>
            <tr>
                <th>Name</th>
                <th>Base</th>
                <th>Free</th>
                <th>Xp</th>
                <th>Tot</th>
            </tr>
            <tr>
                <th><input name="attr_discipline_1_name" type="text" value="" class="sheet-namebox"></th>
                <td><input name="attr_discipline_1_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_1_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_1_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_1" type="number" value="@{discipline_1_base} + @{discipline_1_free} + @{discipline_1_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th><input name="attr_discipline_2_name" type="text" value="" class="sheet-namebox"></th>
                <td><input name="attr_discipline_2_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_2_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_2_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_2" type="number" value="@{discipline_2_base} + @{discipline_2_free} + @{discipline_2_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th><input name="attr_discipline_3_name" type="text" value="" class="sheet-namebox"></th>
                <td><input name="attr_discipline_3_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_3_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_3_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_3" type="number" value="@{discipline_3_base} + @{discipline_3_free} + @{discipline_3_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th><input name="attr_discipline_4_name" type="text" value="" class="sheet-namebox"></th>
                <td><input name="attr_discipline_4_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_4_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_4_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_4" type="number" value="@{discipline_4_base} + @{discipline_4_free} + @{discipline_4_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th><input name="attr_discipline_5_name" type="text" value="" class="sheet-namebox"></th>
                <td><input name="attr_discipline_5_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_5_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_5_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_5" type="number" value="@{discipline_5_base} + @{discipline_5_free} + @{discipline_5_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th><input name="attr_discipline_6_name" type="text" value="" class="sheet-namebox"></th>
                <td><input name="attr_discipline_6_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_6_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_6_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_discipline_6" type="number" value="@{discipline_6_base} + @{discipline_6_free} + @{discipline_6_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
        </table>
    </div>
    <div class="sheet-col">
        <h3>Backgrounds</h3>
        <table>
            <tr>
                <th>Name</th>
                <th>Base</th>
                <th>Free</th>
                <th>Xp</th>
                <th>Tot</th>
            </tr>
            <tr>
                <th><input name="attr_background_1_name" type="text" value="" class="sheet-namebox"></th>
                <td><input name="attr_background_1_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_1_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_1_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_1" type="number" value="@{background_1_base} + @{background_1_free} + @{background_1_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th><input name="attr_background_2_name" type="text" value="" class="sheet-namebox"></th>
                <td><input name="attr_background_2_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_2_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_2_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_2" type="number" value="@{background_2_base} + @{background_2_free} + @{background_2_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th><input name="attr_background_3_name" type="text" value="" class="sheet-namebox"></th>
                <td><input name="attr_background_3_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_3_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_3_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_3" type="number" value="@{background_3_base} + @{background_3_free} + @{background_3_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th><input name="attr_background_4_name" type="text" value="" class="sheet-namebox"></th>
                <td><input name="attr_background_4_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_4_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_4_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_4" type="number" value="@{background_4_base} + @{background_4_free} + @{background_4_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th><input name="attr_background_5_name" type="text" value="" class="sheet-namebox"></th>
                <td><input name="attr_background_5_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_5_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_5_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_5" type="number" value="@{background_5_base} + @{background_5_free} + @{background_5_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th><input name="attr_background_6_name" type="text" value="" class="sheet-namebox"></th>
                <td><input name="attr_background_6_base" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_6_free" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_6_xp" type="number" value="0" min="0" max="10" class="sheet-short"></td>
                <td><input name="attr_background_6" type="number" value="@{background_6_base} + @{background_6_free} + @{background_6_xp}" min="0" max="10" title="total" class="sheet-short" disabled="true"></td>
            </tr>
        </table>
    </div>
    <div class="sheet-col">
        <h3>Virtues</h3>
        <table>
            <tr>
                <th>Name</th>
                <th>Base</th>
                <th>Free</th>
                <th>Xp</th>
                <th>Tot</th>
            </tr>
            <tr>
                <th>Conscience</th>
                <td><input name="attr_conscience_base" type="number" value="1" min="1" max="5" class="sheet-short"></td>
                <td><input name="attr_conscience_free" type="number" value="0" min="0" max="5" class="sheet-short"></td>
                <td><input name="attr_conscience_xp" type="number" value="0" min="0" max="5" class="sheet-short"></td>
                <td><input name="attr_conscience" type="number" value="@{conscience_base} + @{conscience_free} + @{conscience_xp}" min="0" max="5" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Self_control</th>
                <td><input name="attr_self_control_base" type="number" value="1" min="1" max="5" class="sheet-short"></td>
                <td><input name="attr_self_control_free" type="number" value="0" min="0" max="5" class="sheet-short"></td>
                <td><input name="attr_self_control_xp" type="number" value="0" min="0" max="5" class="sheet-short"></td>
                <td><input name="attr_self_control" type="number" value="@{self_control_base} + @{self_control_free} + @{self_control_xp}" min="0" max="5" title="total" class="sheet-short" disabled="true"></td>
            </tr>
            <tr>
                <th>Courage</th>
                <td><input name="attr_courage_base" type="number" value="1" min="1" max="5" class="sheet-short"></td>
                <td><input name="attr_courage_free" type="number" value="0" min="0" max="5" class="sheet-short"></td>
                <td><input name="attr_courage_xp" type="number" value="0" min="0" max="5" class="sheet-short"></td>
                <td><input name="attr_courage" type="number" value="@{courage_base} + @{courage_free} + @{courage_xp}" min="0" max="5" title="total" class="sheet-short" disabled="true"></td>
            </tr>
        </table>

    </div>
</div>

<table>
    <tr>
        <td>
            <table>
                <tr>
                    <th><h4>Attributes</h4></th>
                    <th>7/5/3</th>
                </tr>
                <tr>
                    <th>Physical</th>
                    <input name="attr_base_physical" type="hidden" value="0">
                    <td><input name="attr_base_physical_disp" type="number" value="@{base_physical}" class="sheet-short" disabled="true"></td>
                </tr>
                <tr>
                    <th>Social</th>
                    <input name="attr_base_social" type="hidden" value="0">
                    <td><input name="attr_base_social_disp" type="number" value="@{base_social}" class="sheet-short" disabled="true"></td>
                </tr>
                <tr>
                    <th>Mental</th>
                    <input name="attr_base_mental" type="hidden" value="0">
                    <td><input name="attr_base_mental_disp" type="number" value="@{base_mental}" class="sheet-short" disabled="true"></td>
                </tr>
            </table>
        </td>
        <td>
            <table>
                <tr>
                    <th><h4>Abilities</h4></th>
                    <th>13/9/5</th>
                </tr>
                <tr>
                    <th>Talents</th>
                    <input name="attr_base_talents" type="hidden" value="0">
                    <td><input name="attr_base_talents_disp" type="number" value="@{base_talents}" class="sheet-short" disabled="true"></td>
                </tr>
                <tr>
                    <th>Skills</th>
                    <input name="attr_base_skills" type="hidden" value="0">
                    <td><input name="attr_base_skills_disp" type="number" value="@{base_skills}" class="sheet-short" disabled="true"></td>
                </tr>
                <tr>
                    <th>Knowledges</th>
                    <input name="attr_base_knowledges" type="hidden" value="0">
                    <td><input name="attr_base_knowledges_disp" type="number" value="@{base_knowledges}" class="sheet-short" disabled="true"></td>
                </tr>
            </table>
        </td>
        <td>
            <table>
                <tr>
                    <th><h4>Advantages</h4></th>
                </tr>
                <tr>
                    <th>Background</th>
                    <input name="attr_base_background" type="hidden" value="0">
                    <td><input name="attr_base_background_disp" type="number" value="@{base_background}" class="sheet-short" disabled="true"></td>
                </tr>
                <tr>
                    <th>Virtue</th>
                    <input name="attr_base_virtue" type="hidden" value="0">
                    <td><input name="attr_base_virtue_disp" type="number" value="@{base_virtue}" class="sheet-short" disabled="true"></td>
                </tr>
                <tr>
                    <th>Discipline</th>
                    <input name="attr_base_discipline" type="hidden" value="0">
                    <td><input name="attr_base_discipline_disp" type="number" value="@{base_discipline}" class="sheet-short" disabled="true"></td>
                </tr>
            </table>
        </td>
        <td>
            <table>
                <tr>
                    <th><h4>Experience</h4></th>
                </tr>
                <tr>
                    <th></th>
                    <th>Avail</th>
                    <th>Spent</th>
                    <th>Left</th>
                </tr>
                <tr>
                    <th>Free</th>
                    <input name="attr_free_spent" type="hidden" value="0">
                    <td><input name="attr_free_avail" type="number" value="15" class="sheet-short" disabled="true"></td>
                    <td><input name="attr_free_spent_disp" type="number" value="@{free_spent}" class="sheet-short" disabled="true"></td>
                    <td><input name="attr_free_left" type="number" value="(@{free_avail} - @{free_spent})" class="sheet-short" disabled="true"></td>
                </tr>
                <tr>
                    <th>Experience</th>
                    <input name="attr_xp_spent" type="hidden" value="0">
                    <td><input name="attr_xp_avail" type="number" value="50" class="sheet-short"</td>
                    <td><input name="attr_xp_spent_disp" type="number" value="@{xp_spent}" class="sheet-short" disabled="true"></td>
                    <td><input name="attr_xp_left" type="number" value="(@{xp_avail} - @{xp_spent})" class="sheet-short" disabled="true"></td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<script type="text/worker">
const data = JSON.parse('{"attribute_types":["physical","social","mental"],"ability_types":["talents","skills","knowledges"],"physical":["strength","dexterity","stamina"],"social":["charisma","manipulation","appearance"],"mental":["perception","intelligence","wits"],"talents":["alertness","athletics","awareness","brawl","empathy","expression","intimidation","leadership","streetwise","subterfuge"],"skills":["animal_ken","crafts","drive","etiquette","firearms","larceny","melee","performance","stealth","survival"],"knowledges":["academics","computer","finance","investigation","law","medicine","occult","politics","science","technology"],"free_cost":{"attribute":5,"ability":2,"discipline":7,"background":1,"virtue":2,"path":2,"willpoer":1},"new_xp_cost":{"attribute":0,"virtue":0,"background":0,"ability":3,"discipline":10,"secondary_path":7},"mult_xp_cost":{"attribute":4,"ability":2,"background":0,"clan_discipline":5,"caitiff_discipline":6,"discipline":7,"secondary_path":4,"virtue":2,"humanity":2,"willpower":1},"clans":["assamite","brujah","followers_of_set","gangrel","giovanni","lasombra","malkavian","nosferatu","ravnos","toreador","tremere","tzimisce","ventrue","caitiff","werewolf","human","mage","faerie","ghost","demon"],"clan_disciplines":{"assamite":["celerity","obfuscate","quietus","","","",""],"brujah":["celerity","potence","presence","","","",""],"followers_of_set":["obfuscate","presence","serpentis","","","",""],"gangrel":["animalism","fortitude","protean","","","",""],"giovanni":["dominate","necromancy","potence","","","",""],"lasombra":["dominate","obtenebration","potence","","","",""],"malkavian":["auspex","dementation","obfuscate","","","",""],"nosferatu":["animalism","obfuscate","potence","","","",""],"ravnos":["animalism","chimerstry","fortitude","","","",""],"toreador":["auspex","celerity","presence","","","",""],"tremere":["auspex","dominate","thaumaturgy","","","",""],"tzimisce":["animalism","auspex","vicissitude","","","",""],"ventrue":["dominate","fortitude","presence","","","",""],"caitiff":["","","","","","",""],"human":["","","","","","",""],"werewolf":["celerity","potence","protean","","","",""],"mage":["auspex","chimerstry","dominate","fortitude","presence","thaumaturgy",""],"faerie":["animalism","auspex","chimerstry","celerity","obfuscate","protean",""],"ghost":["auspex","chimerstry","dementation","dominate","presence","vicissitude",""],"demon":["dominate","potence","fortitude","daimoinon","vicissitude",""]},"generation_table":{"hdr":["trait_max","blood_pool_max","blood_per_turn"],"3":[10,100,20],"4":[9,50,10],"5":[8,40,8],"6":[7,30,6],"7":[6,20,4],"8":[5,15,3],"9":[5,14,2],"10":[5,13,1],"11":[5,12,1],"12":[5,11,1],"13":[5,10,1]},"virtues":["conscience","self_control","courage"],"postfixes":["base","free","xp"],"disciplines":["discipline_1","discipline_2","discipline_3","discipline_4","discipline_5","discipline_6"],"backgrounds":["background_1","background_2","background_3","background_4","background_5","background_6"]}');
"use strict";
const attribute_types = data.attribute_types;
const ability_types = data.ability_types;
const attributes = [].concat(...attribute_types.map(x => data[x]));
const abilities = [].concat(...ability_types.map(x => data[x]));
const disciplines = data.disciplines;
const backgrounds = data.backgrounds;
const virtues = data.virtues;
const clan_disciplines = data.clan_disciplines;

console.log('reading data from JSON');
console.log('attribute_types', attribute_types);
console.log('ability_types', ability_types);
console.log('attributes', attributes);
console.log('abilities', abilities);
console.log('disciplines', disciplines);
console.log('backgrounds', backgrounds);
console.log('virtues', virtues);
console.log('clan_disciplines', clan_disciplines);

const properties = [].concat(attributes, abilities,
		disciplines, backgrounds, virtues);
const discipline_names = disciplines.map(x => x + "_name");
const prop_base = properties.map(x => x + "_base");
const prop_free = properties.map(x => x + "_free");
const prop_xp = properties.map(x => x + "_xp");
const xp_deps = [].concat(prop_base, prop_free, prop_xp, ["clan"]);
const lists = [attributes, abilities, disciplines,
	backgrounds, virtues];
const types = ["attribute", "ability", "discipline", "background", "virtue"];

// change arg lists
function list_changed(l) {
	var out = l.map(x => "change:" + x).join(" ");
	return out;
}

function xpCost(b, f, xp, k, new_cost) {
	var cost = 0;
	if (xp > 0) {
		cost += k*(b + f - 1)*xp + k*xp*(xp + 1)/2;
		if ((b + f) === 0) {
			cost += new_cost;
		}
	}
	return cost;
}

function update_free_spent() {
	getAttrs(xp_deps, function(v) {
		console.log("updating free spent");
		var cost = 0;
		for (l in lists) {
			for (x in lists[l]) {
				var name = lists[l][x];
				var type = types[l];
				var f = parseInt(v[name + "_free"], 10);
				cost += f*data.free_cost[type];
			}
		}
		setAttrs({
			free_spent: cost
		});
	});
}

function update_base() {
	getAttrs(prop_base, function(v) {
		console.log("updating base spent");
		d_set = {};
		for (l in lists) {
			var type = types[l];
			if (type === "attribute") {
				for (x in attribute_types) {
					var attr_type = attribute_types[x];
					var base = 0;
					for (y in data[attr_type]) {
						var name = data[attr_type][y];
						base += parseInt(v[name + "_base"], 10);
					}
					d_set["base_" + attr_type] = base - 3;
				}
			} else if (type === "ability") {
				for (x in ability_types) {
					var abil_type = ability_types[x];
					var base = 0;
					for (y in data[abil_type]) {
						var name = data[abil_type][y];
						base += parseInt(v[name + "_base"], 10);
					}
					d_set["base_" + abil_type] = base;
				}
			} else if (type === "virtue") {
				var base = 0;
				for (x in lists[l]) {
					var name = lists[l][x];
					base += parseInt(v[name + "_base"], 10);
				}
				d_set["base_" + type] = base - 3;
			} else {
				var base = 0;
				for (x in lists[l]) {
					var name = lists[l][x];
					base += parseInt(v[name + "_base"], 10);
				}
				d_set["base_" + type] = base;
			}
		}
		setAttrs(d_set);
	});
}


function update_xp_spent() {
	getAttrs(xp_deps, function(v) {
		console.log("updating xp spent");
		var cost = 0;
		for (l in lists) {
			for (x in lists[l]) {
				var name = lists[l][x];
				var b = parseInt(v[name + "_base"], 10);
				var f = parseInt(v[name + "_free"], 10);
				var xp = parseInt(v[name + "_xp"], 10);

				// get parameters
				var type = types[l];
				var k = data.mult_xp_cost[type];
				if (k === undefined) {
					console.error("undefined k for type", type);
					return 0;
				}
				var new_cost = data.new_xp_cost[type];
				if (new_cost === undefined) {
					console.error("undefined new_cost for type", type);
					return 0;
				}

				cost += xpCost(b, f, xp, k, new_cost);
			}
		}
		setAttrs({
			xp_spent: cost
		});
	});
}

on("sheet:opened", function() {
	console.log("sheet opened");
	//getAttrs(["strength"], function(v) {
		//if (v.strength != undefined) {
			//console.log("deleting strength");
			//setAttrs({
				//strength_base: v.strength,
				//strength: undefined
			//});
		//};
	//});
});

on(list_changed(prop_free), function(){
	console.log("free change");
	update_free_spent();
});

on(list_changed(prop_xp), function(){
	console.log("xp change");
});

on(list_changed(prop_base), function(){
	console.log("base change");
	update_base();
});

on(list_changed(xp_deps), function(){
	console.log("xp deps change");
	update_xp_spent();
});

on("change:clan", function(){
	console.log("clan change");
	// initialize to clan disciplines
	getAttrs([].concat(discipline_names, ["clan"]), function(v) {
		var d_set = {};
		for(d in discipline_names) {
			var discipline_name = v[discipline_names[d]];
			console.log("discipline name", discipline_names[d], discipline_name);
			if (d < clan_disciplines[v.clan].length) {
				clan_discipline = clan_disciplines[v.clan][d];
				d_set[discipline_names[d]] = clan_discipline;
			}
		}
		setAttrs(d_set);
	});
});

</script>

<!-- vim: set et fenc=utf-8 ff=unix sts=0 sw=4 ts=4 ft=javascript nowrap: -->