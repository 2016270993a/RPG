<div class="wrapper">
  <input
    type="hidden"
    class="sheet-tabstoggle"
    name="attr_sheet_tab"
    title="@{sheet_tab}"
    value="personal" />
  <div class="navigation-bar">
    <h2>
      <input
        type="text"
        name="attr_sheet_tab_display"
        value="sheet_tab = @{sheet_tab}"
        disabled />
    </h2>
    <button type="action" name="act_personal">Personal</button>
    <button type="action" name="act_skills">Skills</button>
    <button type="action" name="act_combat">Combat &amp; Wounds</button>
  </div>

  <section class="tab" id="section-personal">
    <div class="section-box" id="portrait">
      <h3>Portrait</h3>
      <img
        class="portrait"
        src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/fc40415351ad246c0d3e67292d1fc11116e1a51e/Rivers%20of%20London/images/police-in-action.svg"
        alt="POlice officer in action from https://freesvg.org/policeman-in-act" />
    </div>

    <div class="section-box" id="investigator-info">
      <h3>Investigator Info</h3>
      <div>
        <div class="input-row col-2">
          <label>Name</label><input type="text" name="attr_character_name" />
        </div>
        <div class="input-row col-2">
          <label for="attr_occupation">Occupation</label>
          <input
            type="text"
            name="attr_occupation"
            list="occupations"
            placeholder="Choose an Occupation" />
        </div>
        <div class="input-row col-2">
          <label>Place of Birth</label>
          <input type="text" name="attr_place_of_birth" />
        </div>
        <div class="input-row col-2">
          <label>Residence</label><input type="text" name="attr_residence" />
          <label>Pronoun</label><input type="text" name="attr_pronoun" />
        </div>
        <div class="input-row col-2">
          <label>Age</label><input type="number" name="attr_age" />
          <label>Affluence</label><input type="text" name="attr_affluence" />
        </div>
        <div class="input-row col-1">
          <textarea
            name="attr_inv_notes"
            placeholder="Additional notes"></textarea>
        </div>
      </div>
    </div>
  </section>

  <section class="tab" id="section-skills">
    <div class="section-box" id="characteristics">
      <h3>Characteristics</h3>
      <div>
        <button
          type="roll"
          name="roll_str"
          value="&{template:default} {{name=Strength (@{str})}}  {{Roll=[[1d100]]}}"></button>
        <label for="attr_str">
          <span class="stat-abbreviation">STR</span>ength</label
        >
        <input type="number" name="attr_str" title="@{str}" min="0" max="100" />
        /
        <input
          type="number"
          name="attr_str_half"
          value="round(@{str}/2)"
          disabled />
      </div>
      <div>
        <button
          type="roll"
          name="roll_con"
          value="/em uses Constitution (@{con}) and rolls [[d100]]"></button>
        <label for="attr_con"
          ><span class="stat-abbreviation">CON</span>stitution</label
        >
        <input type="number" name="attr_con" title="@{con}" min="0" max="100" />
        /
        <input
          type="number"
          name="attr_con_half"
          value="round(@{con}/2)"
          disabled />
      </div>
      <div>
        <button
          type="roll"
          name="roll_dex"
          value="/em uses Dexterity (@{dex}) and rolls [[d100]]"></button>
        <label for="attr_dex"
          ><span class="stat-abbreviation">DEX</span>terity</label
        >
        <input type="number" name="attr_dex" title="@{dex}" min="0" max="100" />
        /
        <input
          type="number"
          name="attr_dex_half"
          value="round(@{dex}/2)"
          disabled />
      </div>
      <div>
        <button
          type="roll"
          name="roll_int"
          value="/em uses Intelligence (@{int}) and rolls [[d100]]"></button>
        <label for="attr_int"
          ><span class="stat-abbreviation">INT</span>elligence</label
        >
        <input type="number" name="attr_int" title="@{int}" min="0" max="100" />
        /
        <input
          type="number"
          name="attr_int_half"
          value="round(@{int}/2)"
          disabled />
      </div>
      <div>
        <button
          type="roll"
          name="roll_pow"
          value="/em uses Power (@{pow}) and rolls [[d100]]"></button>
        <label><span class="stat-abbreviation">POW</span>er</label>
        <input type="number" name="attr_pow" title="@{pow}" min="0" max="100" />
        /
        <input
          type="number"
          name="attr_pow_half"
          value="round(@{pow}/2)"
          disabled />
      </div>
    </div>

    <div class="section-box" id="supplemental-info">
      <h3>Supplemental Info</h3>
      <div>
        <label for="attr_mov"><span class="stat-abbreviation">MOV</span></label>
        <input type="text" name="attr_mov" title="@{mov}" />
      </div>
      <div>
        <label for="attr_current_luck">Luck</label>
        <input
          type="number"
          name="attr_starting_luck"
          title="@{starting_luck}"
          min="0"
          max="100" />
        /
        <input
          type="number"
          name="attr_current_luck"
          title="@{current_luck}"
          min="0"
          max="100" />
      </div>
      <div>
        <label for="attr_current_magic">Magic Pts</label>
        <input
          type="number"
          name="attr_starting_magic"
          title="@{starting_magic}"
          min="0"
          max="100" />
        /
        <input
          type="number"
          name="attr_current_magic"
          title="@{current_magic}"
          min="0"
          max="100" />
      </div>
    </div>

    <div id="advantages-and-disadvantages" class="section-box">
      <h3>Advantages &amp; Disadvantages</h3>
      <fieldset class="repeating_vantages">
        <select name="attr_vantagetype">
          <option>Advantage</option>
          <option>Disadvantage</option>
        </select>
        <input type="text" name="attr_vantagename" />
      </fieldset>
    </div>

    <div id="common-skills" class="section-box">
      <h3>Common Skills</h3>
      <div>
        <button
          type="roll"
          name="roll_athletics"
          value="/em uses @{athletics}, and rolls [[d100]]"></button>
        <label for="attr_athletics">Athletics</label>
        <input
          type="number"
          name="attr_athletics"
          title="@{athletics}"
          min="0"
          max="100" />
        /
        <input
          type="text"
          name="attr_athletics_half"
          value="round(@{athletics}/2)"
          disabled />
      </div>
      <div>
        <button
          type="roll"
          name="roll_drive"
          value="/em uses @{drive}, and rolls [[d100]]"></button>
        <label for="attr_drive">Drive</label>
        <input
          type="number"
          name="attr_drive"
          title="@{drive}"
          min="0"
          max="100" />
        /
        <input
          type="text"
          name="attr_drive_half"
          value="round(@{drive}/2)"
          disabled />
      </div>
      <div>
        <button
          type="roll"
          name="roll_navigate"
          value="/em uses @{navigate}, and rolls [[d100]]"></button>
        <label for="attr_navigate">Navigate</label>
        <input
          type="number"
          name="attr_navigate"
          title="@{navigate}"
          min="0"
          max="100" />
        /
        <input
          type="text"
          name="attr_navigate_half"
          value="round(@{navigate}/2)"
          disabled />
      </div>
      <div>
        <button
          type="roll"
          name="roll_observation"
          value="/em uses @{observation}, and rolls [[d100]]"></button>
        <label for="attr_observation">Observation</label>
        <input
          type="number"
          name="attr_observation"
          title="@{observation}"
          min="0"
          max="100" />
        /
        <input
          type="text"
          name="attr_observation_half"
          value="round(@{observation}/2)"
          disabled />
      </div>
      <div>
        <button
          type="roll"
          name="roll_read_person"
          value="/em uses @{read_person}, and rolls [[d100]]"></button>
        <label for="attr_read_person">Read Person</label>
        <input
          type="number"
          name="attr_read_person"
          title="@{read_person}"
          min="0"
          max="100" />
        /
        <input
          type="text"
          name="attr_read_person_half"
          value="round(@{read_person}/2)"
          disabled />
      </div>
      <div>
        <button
          type="roll"
          name="roll_research"
          value="/em uses @{research}, and rolls [[d100]]"></button>
        <label for="attr_research">Research</label>
        <input
          type="number"
          name="attr_research"
          title="@{research}"
          min="0"
          max="100" />
        /
        <input
          type="text"
          name="attr_research_half"
          value="round(@{research}/2)"
          disabled />
      </div>
      <div>
        <button
          type="roll"
          name="roll_sense_vestigia"
          value="/em uses @{sense_vestigia}, and rolls [[d100]]"></button>
        <label for="attr_sense_vestigia">Sense Vestigia</label>
        <input
          type="number"
          name="attr_sense_vestigia"
          title="@{sense_vestigia}"
          min="0"
          max="100" />
        /
        <input
          type="text"
          name="attr_sense_vestigia_half"
          value="round(@{sense_vestigia}/2)"
          disabled />
      </div>
      <div>
        <button
          type="roll"
          name="roll_social"
          value="/em uses @{social}, and rolls [[d100]]"></button>
        <label for="attr_social">Social</label>
        <input
          type="number"
          name="attr_social"
          title="@{social}"
          min="0"
          max="100" />
        /
        <input
          type="text"
          name="attr_social_half"
          value="round(@{social}/2)"
          disabled />
      </div>
      <div>
        <button
          type="roll"
          name="roll_stealth"
          value="/em uses @{stealth}, and rolls [[d100]]"></button>
        <label for="attr_stealth">Stealth</label>
        <input
          type="number"
          name="attr_stealth"
          title="@{stealth}"
          min="0"
          max="100" />
        /
        <input
          type="text"
          name="attr_stealth_half"
          value="round(@{stealth}/2)"
          disabled />
      </div>
    </div>

    <div id="expert-skills" class="section-box">
      <h3>Expert Skills</h3>

      <fieldset class="repeating_expertskills">
        <button
          type="roll"
          name="roll_expertskill"
          value="/em uses @{expertskill}, and rolls [[d100]]"></button>
        <label for="attr_expertskill">
          <input type="text" name="attr_expertskillname" />
        </label>
        <input
          type="number"
          name="attr_expertskill"
          title="@{expertskill}"
          min="0"
          max="100" />
        /
        <input
          type="text"
          name="attr_expertskill_half"
          value="round(@{expertskill}/2)"
          disabled />
      </fieldset>
    </div>
  </section>

  <section class="tab" id="section-combat">
    <div id="combat" class="section-box">
      <h3>Combat</h3>
      <div class="col-1">
        <label for="attr_fighting">Fighting</label>
        <input
          type="number"
          name="attr_fighting"
          title="@{fighting}"
          min="0"
          max="100" />
        /
        <input
          type="text"
          name="attr_fighting_half"
          value="round(@{fighting}/2)"
          disabled />
      </div>
      <div>
        <label for="attr_firearms">Firearms</label>
        <input
          type="number"
          name="attr_firearms"
          title="@{firearms}"
          min="0"
          max="100" />
        /
        <input
          type="text"
          name="attr_firearms_half"
          value="round(@{firearms}/2)"
          disabled />
      </div>
    </div>

    <div id="Damage" class="section-box">
      <h3>Damage</h3>
      <input type="checkbox" id="attr_hurt" name="attr_hurt" value="1" /><label
        for="attr_hurt"
        >Hurt</label
      >
      <input
        type="checkbox"
        id="attr_bloodied"
        name="attr_bloodied"
        value="1" /><label for="attr_bloodied">Bloodied</label>
      <input type="checkbox" id="attr_down" name="attr_down" value="1" /><label
        for="attr_down"
        >Down</label
      >
      <input
        type="checkbox"
        id="attr_impaired"
        name="attr_impaired"
        value="1" /><label for="attr_impaired">Impaired</label>
    </div>
  </section>

  <script type="text/worker">
    /* ---------------------------------------------------------------------------------------------------
     * Tabs button worker
     * --------------------------------------------------------------------------------------------------- */
    const buttonlist = ["personal", "skills", "combat"];
    buttonlist.forEach(button => {
      on(`clicked:${button}`, function() {
          setAttrs({
              sheet_tab: button
            });
        });
    });
  </script>
</div>
