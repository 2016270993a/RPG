<!-- QUest HTML */ -->
<!-- Version 1.0 -->

<div class="ept">

  <!-- Hidden Values -->
  <input type='hidden' class='profession-select' name='attr_profession' value='Warrior' />

  <h2 class="title"><span class="underline">Quest</span>: Character Sheet</h2>

  <!-- Basics Section -->
  <div class="section">
    <span class="flex-row"><label>Player Name</label><input class="fill" type="text" name="attr_player_name" placeholder="(player name)" title="@{Player}"/></span>
    <span class="flex-row">
      <label data-i18n="profession-u">Profession</label>
      <select class="profession-select fill" name="attr_profession" title="@{Profession}">
        <option value="Warrior" selected="selected">Warrior</option>
        <option value="Priest">Priest</option>
        <option value="Magic-User">Magic User</option>
      </select>
    </span>
    <span class="flex-row"><label >Kaitar</label><input class="fill nospin" type="number" name="attr_kiatar" title="@{Kiatar}" value="0" min="0" /></span>
    <span class="flex-row"><label >Level</label><span class="fill worker" name="attr_level"></span></span>
  </div>
  <!-- END Basics Section -->

  <!-- Items Section -->
  <div class="section">
      <label class="flex-row label">Equipment</label>
      <div class="checklist sheet- tab1">
        <div class="items">
          <div class="skill-set">
            <input class="skill-checkbox" type="checkbox" name="attr_sword" value="yes" />
            <label class="skill-label">Sword +1</label>
          </div>
          <label class="flex-row  label">Eyes</label>
          <div class="skill-set tab2">
            <input class="skill-checkbox" type="checkbox" name="attr_unconquerable" value="yes" />
            <label class="skill-label">Unconquerable</label>
          </div>
          <div class="skill-set tab2">
            <input class="skill-checkbox" type="checkbox" name="attr_madness" value="yes" />
            <label class="skill-label">Madness</label>
          </div>
          <div class="skill-set tab2">
            <input class="skill-checkbox" type="checkbox" name="attr_kramighty" value="yes" />
            <label class="skill-label">Kra the Mighty</label>
          </div>
          <div class="skill-set tab2">
            <input class="skill-checkbox" type="checkbox" name="attr_ragingpower" value="yes" />
            <label class="skill-label">Raging Power</label>
          </div>
        </div>
      </div>
  </div>

  <!-- Skills Section -->
  <div class="spells section">
    <div class="prof-skill-select flex-row">
      <span class="flex-row label-prof"><label class="label">Spells: </label>
        <label class="label label-profession-warrior">Warrior</label>
        <label class="label label-profession-priest">Priest</label>
        <label class="label label-profession-magicuser">Magic&nbsp;User</label>
      </span>
    </div>
    <div class="profession-warrior">
      <div class="skill-set">
        <label class="skill-label tab1">None</label>
      </div>
    </div>

    <div class="profession-magicuser">
      <span class="flex-row"><label>Number of spells</label><span class="fill worker" name="attr_spells"></span></span>
      <span class="flex-row  tab1 fill"><label>Control Person</label><input class="fill" type="text" name="attr_spell_controlperson" /></span>
      <span class="flex-row  tab1 fill"><label>Doom Kill</label><input class="fill" type="text" name="attr_spell_doomkill" /></span>
      <span class="flex-row  tab1 fill"><label>Energy Bolt</label><input class="fill" type="text" name="attr_spell_energybolt" /></span>
      <span class="flex-row  tab1 fill"><label>Walls</label><input class="fill" type="text" name="attr_spell_walls" /></span>
    </div>
    <div class="profession-priest">
      <span class="flex-row"><label>Number of spells</label><span class="fill worker" name="attr_spells"></span></span>
      <span class="flex-row  tab1 fill"><label>Control Creatures</label><input class="fill" type="text" name="attr_spell_controlcreatures" /></span>
      <span class="flex-row  tab1 fill"><label>Creatures</label><input class="fill" type="text" name="attr_spell_creatures" /></span>
      <span class="flex-row  tab1 fill"><label>Fear</label><input class="fill" type="text" name="attr_spell_fear" /></span>
      <span class="flex-row  tab1 fill"><label>Silver Halo</label><input class="fill" type="text" name="attr_spell_silverhalo" /></span>
    </div>
  </div>

  <!--  Misc. Section  -->
  <div class="misc section">
    <div class="flex-row">
      <label class="flex-row  label">Treasures</label>
    </div>
    <fieldset class="flex-row repeating_misc">
      <input class="fill100" type="text" name="attr_misc" />
    </fieldset>
  </div>
  <!-- END Misc. Section -->

</div>


<!-- Sheet Workers  -->
<script type="text/worker">

  // Talent based calulations
  on("change:kiatar sheet:opened", function() {
    getAttrs(["KIATAR"], function(values) {
      let kiatar = parseInt(values.KIATAR)||0;
      let level = 1;
      let spells = 3;

      // Strength modifiers
      if (kiatar >= 30000) {
        level = 4;
        spells = 6;
      } else if (kiatar >= 20000) {
        level = 3;
        spells = 5;
      } else if (kiatar >= 10000) {
        level = 2;
        spells = 4;
      }
      setAttrs({
        level: level,
        spells: spells,
      });
  	});
  });

</script>
<!-- END charsheet EPT -->
